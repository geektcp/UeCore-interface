 PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a = {}; PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0] = { PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027 = 0.0, PorEnhance_0f402d7ba502a47a51c410aee99b1ff1 = 1.0, PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7 = 0.0 }; PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[1] = { PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027 = 1.0, PorEnhance_0f402d7ba502a47a51c410aee99b1ff1 = 0.7, PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7 = 0.2 }; PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[2] = { PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027 = 1.0, PorEnhance_0f402d7ba502a47a51c410aee99b1ff1 = 0.0, PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7 = 0.0 }; PorEnhance_33c9f64253006c3a21cb4e8afd362a2a = {}; PorEnhance_33c9f64253006c3a21cb4e8afd362a2a[0] = { r = 0.0, g = 1.0, b = 1.0 }; PorEnhance_33c9f64253006c3a21cb4e8afd362a2a[1] = PowerBarColor["RAGE"]; PorEnhance_33c9f64253006c3a21cb4e8afd362a2a[2] = PowerBarColor["FOCUS"]; PorEnhance_33c9f64253006c3a21cb4e8afd362a2a[3] = PowerBarColor["ENERGY"]; PorEnhance_33c9f64253006c3a21cb4e8afd362a2a[4] = PowerBarColor["HAPPINESS"]; PorEnhance_33c9f64253006c3a21cb4e8afd362a2a[5] = PowerBarColor["RUNES"]; PorEnhance_33c9f64253006c3a21cb4e8afd362a2a[6] = PowerBarColor["RUNIC_POWER"]; PorEnhance_d6ce3153373d8dac04ff1bfc4d81f0cd = nil; PorEnhance_5aec7b0593a50b2afbdfab5963660139 = nil; PorEnhance_aa88a33381bd240ae3a34be8330afeb8 = nil; PorEnhance_0d961df4948b58a183f9e63217a09fc9 = nil; PorEnhance_bc920268778e213bcbe933e06f2146db = nil; local PorEnhance_75430b8195f7a1d99df1b41dbdf5fe9f = TargetPortrait or TargetFramePortrait local PorEnhance_64f35781dbe4ccc5c88667f3f96d0d47 = "Interface\\AddOns\\PorEnhance\\ClassIcon"; local function MoveFrame() if PorEnhancement_ShowXPBar and PorEnhance_0d961df4948b58a183f9e63217a09fc9 then PetFrame:SetToplevel(false) if TotemFrame then TotemFrame:SetPoint("TOPLEFT", PlayerFrame, "BOTTOMLEFT", 99, 25) end if RuneFrame and RuneFrame:IsShown() then RuneFrame:SetFrameStrata("MEDIUM"); RuneFrame:SetScale(1); RuneFrame:SetFrameLevel(PetFrame:GetFrameLevel()+2); RuneFrame:SetPoint("TOPLEFT", PlayerFrame, "BOTTOMLEFT", 99, 25) end if PaladinPowerBar and PaladinPowerBar:IsShown() then PaladinPowerBar:SetPoint("TOPLEFT", PlayerFrame, "BOTTOMLEFT", 99, 25) end if ShardBarFrame and ShardBarFrame:IsShown() then ShardBarFrame:SetFrameStrata("MEDIUM"); ShardBarFrame:SetScale(1); ShardBarFrame:SetFrameLevel(PetFrame:GetFrameLevel()+2); ShardBarFrame:SetPoint("TOPLEFT", PlayerFrame, "BOTTOMLEFT", 99, 25) end if PlayerFrameAlternateManaBar and PlayerFrameAlternateManaBar:IsShown() then PlayerFrameAlternateManaBar:SetPoint("TOPLEFT", PlayerFrame, "BOTTOMLEFT", 226, 35) PlayerFrameAlternateManaBarText:SetFont("Fonts\\FRIZQT__.TTF",10) end else PetFrame:SetToplevel(true) if TotemFrame then TotemFrame:SetPoint("TOPLEFT", PlayerFrame, "BOTTOMLEFT", 99, 38) end if RuneFrame and RuneFrame:IsShown() then RuneFrame:SetFrameStrata("MEDIUM"); RuneFrame:SetScale(1); RuneFrame:SetFrameLevel(PetFrame:GetFrameLevel()+2); RuneFrame:SetPoint("TOPLEFT", PlayerFrame, "BOTTOMLEFT", 99, 38) end if PaladinPowerBar and PaladinPowerBar:IsShown() then PaladinPowerBar:SetPoint("TOPLEFT", PlayerFrame, "BOTTOMLEFT", 99, 38) end if ShardBarFrame and ShardBarFrame:IsShown() then ShardBarFrame:SetFrameStrata("MEDIUM"); ShardBarFrame:SetScale(1); ShardBarFrame:SetFrameLevel(PetFrame:GetFrameLevel()+2); ShardBarFrame:SetPoint("TOPLEFT", PlayerFrame, "BOTTOMLEFT", 99, 38) end if PlayerFrameAlternateManaBar and PlayerFrameAlternateManaBar:IsShown() then PlayerFrameAlternateManaBar:SetPoint("TOPLEFT", PlayerFrame, "BOTTOMLEFT", 114, 34) PlayerFrameAlternateManaBarText:SetFont("Fonts\\FRIZQT__.TTF",12) end end end function PorEnhance_OnLoad(self) if PlayerFrame_ToPlayerArt then hooksecurefunc("PlayerFrame_ToPlayerArt",MoveFrame) end PlayerFrameHealthBar:HookScript("OnValueChanged", HealthBar_OnValueChanged_Hooked); PartyMemberFrame1HealthBar:HookScript("OnValueChanged", HealthBar_OnValueChanged_Hooked); PartyMemberFrame2HealthBar:HookScript("OnValueChanged", HealthBar_OnValueChanged_Hooked); PartyMemberFrame3HealthBar:HookScript("OnValueChanged", HealthBar_OnValueChanged_Hooked); PartyMemberFrame4HealthBar:HookScript("OnValueChanged", HealthBar_OnValueChanged_Hooked); end function PorEnhance_ToggleEnable(flag) if ( flag==1 and not PorEnhance_0d961df4948b58a183f9e63217a09fc9) then PorEnhance_0d961df4948b58a183f9e63217a09fc9 = 1; PorEnhanceFrame:RegisterEvent("UNIT_HEALTH"); PorEnhanceFrame:RegisterEvent("UNIT_MANA"); PorEnhanceFrame:RegisterEvent("UNIT_RAGE"); PorEnhanceFrame:RegisterEvent("UNIT_FOCUS"); PorEnhanceFrame:RegisterEvent("UNIT_ENERGY"); PorEnhanceFrame:RegisterEvent("UNIT_MAXMANA"); PorEnhanceFrame:RegisterEvent("UNIT_DISPLAYPOWER"); PorEnhanceFrame:RegisterEvent("UNIT_ENTERING_VEHICLE"); PorEnhanceFrame:RegisterEvent("UNIT_EXITED_VEHICLE"); PorEnhance_7e81c0664bdb5c86c5837aa3df747cb2(); PorEnhance_Refresh(); PorEnhance_9d880fb4065fd5be23627092c95cc76d(1); PlayerFrameHealthBarText:SetText(""); PlayerFrameManaBarText:SetText(""); PetFrame:SetPoint("TOPLEFT", "PlayerFrame", "TOPLEFT", 70, -71); PorEnhanceFrame:Show(); WorldStateAlwaysUpFrame:SetPoint("TOP", UIParent, "TOP", 25, -15); elseif ( arg~=1 and PorEnhance_0d961df4948b58a183f9e63217a09fc9) then PorEnhance_0d961df4948b58a183f9e63217a09fc9 = nil; if (not PorEnhance_0d961df4948b58a183f9e63217a09fc9 and not PorEnhance_d6ce3153373d8dac04ff1bfc4d81f0cd) then PorEnhanceFrame:UnregisterEvent("UNIT_HEALTH"); PorEnhanceFrame:UnregisterEvent("UNIT_MANA"); PorEnhanceFrame:UnregisterEvent("UNIT_RAGE"); PorEnhanceFrame:UnregisterEvent("UNIT_FOCUS"); PorEnhanceFrame:UnregisterEvent("UNIT_ENERGY"); PorEnhanceFrame:UnregisterEvent("UNIT_MAXMANA"); PorEnhanceFrame:UnregisterEvent("UNIT_DISPLAYPOWER"); PorEnhanceFrame:UnregisterEvent("UNIT_ENTERING_VEHICLE"); PorEnhanceFrame:UnregisterEvent("UNIT_EXITED_VEHICLE"); end PorEnhance_9d880fb4065fd5be23627092c95cc76d(nil); PetFrame:SetPoint("TOPLEFT", "PlayerFrame", "TOPLEFT", 80, -60); PorEnhanceFrame:Hide(); WorldStateAlwaysUpFrame:SetPoint("TOP", UIParent, "TOP", -5, -15); PlayerFrameHealthBar:SetStatusBarColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); end end function PorEnhance_ToggleExpBar(flag) if flag ==1 then PorEnhancement_ShowXPBar = 1; PlayerPorExpBar:RegisterEvent("PLAYER_XP_UPDATE"); PlayerPorExpBar:RegisterEvent("UPDATE_EXHAUSTION"); PlayerPorExpBar:RegisterEvent("PLAYER_LEVEL_UP"); PlayerPorExpBar:RegisterEvent("PLAYER_UPDATE_RESTING"); PlayerPorExpBar:RegisterEvent("UPDATE_FACTION"); PlayerPorExpBar_Update(); PlayerPorExhaustionTick_Update(PlayerPorExhaustionTick, "UPDATE_EXHAUSTION"); else PorEnhancement_ShowXPBar = nil; PlayerPorExpBar:UnregisterEvent("PLAYER_XP_UPDATE"); PlayerPorExpBar:UnregisterEvent("UPDATE_EXHAUSTION"); PlayerPorExpBar:UnregisterEvent("PLAYER_LEVEL_UP"); PlayerPorExpBar:UnregisterEvent("PLAYER_UPDATE_RESTING"); PlayerPorExpBar:UnregisterEvent("UPDATE_FACTION"); PlayerPorExpBar:Hide(); PlayerPorExhaustionTick:Hide(); end MoveFrame(); end function PorEnhance_TogglePartyPor(flag) if (flag ==1 and not PorEnhance_5aec7b0593a50b2afbdfab5963660139) then PorEnhance_5aec7b0593a50b2afbdfab5963660139 = 1; local __index; for __index = 1, 4, 1 do PorEnhance_a8f437b3156f9bba489243b38e0d21ea(__index); local PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("PartyMemberFrame"..__index); local PorEnhance_0c3bbeaa5002d7e1b442174596c91a2b = getglobal("PartyPorFrame"..__index); local PorEnhance_3a8b92f592ad0483b011682677bdc16d = getglobal("PartyMemberFrame"..__index.."HealthBar"); local PorEnhance_67f55e452a6cb8a50b9823c2d2c81583 = getglobal("PartyMemberFrame"..__index.."ManaBar"); TextStatusBar_UpdateTextString(PorEnhance_3a8b92f592ad0483b011682677bdc16d); TextStatusBar_UpdateTextString(PorEnhance_67f55e452a6cb8a50b9823c2d2c81583); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterAnchorFrame(PorEnhance_0c3bbeaa5002d7e1b442174596c91a2b, 9, "LEFT", "RIGHT", -13, 5, 81); PorEnhance_0c3bbeaa5002d7e1b442174596c91a2b:Show(); PartyPorEnhanceFrame_Refresh(PorEnhance_0c3bbeaa5002d7e1b442174596c91a2b); end elseif (flag~=1 and PorEnhance_5aec7b0593a50b2afbdfab5963660139) then local __index; for __index = 1, 4, 1 do if (not PorEnhance_d6ce3153373d8dac04ff1bfc4d81f0cd) then PorEnhance_da4c8acc592ce4265dba163b6d4f7365(__index); end local PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("PartyMemberFrame"..__index); local PorEnhance_0c3bbeaa5002d7e1b442174596c91a2b = getglobal("PartyPorFrame"..__index); local PorEnhance_3a8b92f592ad0483b011682677bdc16d = getglobal("PartyMemberFrame"..__index.."HealthBar"); local PorEnhance_67f55e452a6cb8a50b9823c2d2c81583 = getglobal("PartyMemberFrame"..__index.."ManaBar"); PorEnhance_3a8b92f592ad0483b011682677bdc16d:SetStatusBarColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); TextStatusBar_UpdateTextString(PorEnhance_3a8b92f592ad0483b011682677bdc16d); TextStatusBar_UpdateTextString(PorEnhance_67f55e452a6cb8a50b9823c2d2c81583); PorEnhance_0c3bbeaa5002d7e1b442174596c91a2b:Hide(); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterAnchorFrame(PorEnhance_0c3bbeaa5002d7e1b442174596c91a2b); end PorEnhance_5aec7b0593a50b2afbdfab5963660139 = nil; end end function PorEnhance_TogglePartyText(flag) if flag ==1 then local __index; for __index = 1, 4, 1 do local PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("PartyMemberFrame"..__index); local PorEnhance_3a8b92f592ad0483b011682677bdc16d = getglobal("PartyMemberFrame"..__index.."HealthBar"); local PorEnhance_67f55e452a6cb8a50b9823c2d2c81583 = getglobal("PartyMemberFrame"..__index.."ManaBar"); if (GetCVar("partyStatusText") == "1") then TextStatusBar_UpdateTextString(PorEnhance_3a8b92f592ad0483b011682677bdc16d); TextStatusBar_UpdateTextString(PorEnhance_67f55e452a6cb8a50b9823c2d2c81583); end end end end function PorEnhance_ToggleColorHealth(flag) if flag ==1 then PorEnhance_d6ce3153373d8dac04ff1bfc4d81f0cd = 1; PorEnhanceFrame:RegisterEvent("UNIT_HEALTH"); for __index = 1, 4, 1 do PorEnhance_a8f437b3156f9bba489243b38e0d21ea(__index); end else PorEnhance_d6ce3153373d8dac04ff1bfc4d81f0cd = nil; if (not PorEnhance_0d961df4948b58a183f9e63217a09fc9) then PorEnhanceFrame:UnregisterEvent("UNIT_HEALTH"); end if (not PorEnhance_5aec7b0593a50b2afbdfab5963660139) then for __index = 1, 4, 1 do PorEnhance_da4c8acc592ce4265dba163b6d4f7365(__index); end end end end function PorEnhance_ToggleClassInfo(flag) if flag ==1 then TargetFrameClassFrame:RegisterEvent("PLAYER_TARGET_CHANGED"); PorEnhance_9a694611c8b20488e27672f5013fc61e(TargetFrameClassFrame, "target"); PartyClassWidget1:RegisterEvent("PARTY_MEMBERS_CHANGED"); PartyClassWidget2:RegisterEvent("PARTY_MEMBERS_CHANGED"); PartyClassWidget3:RegisterEvent("PARTY_MEMBERS_CHANGED"); PartyClassWidget4:RegisterEvent("PARTY_MEMBERS_CHANGED"); PorEnhance_bffb312dd87e35ebaf9805916e18788c(PartyClassWidget1, "party1"); PorEnhance_bffb312dd87e35ebaf9805916e18788c(PartyClassWidget2, "party2"); PorEnhance_bffb312dd87e35ebaf9805916e18788c(PartyClassWidget3, "party3"); PorEnhance_bffb312dd87e35ebaf9805916e18788c(PartyClassWidget4, "party4"); else TargetFrameClassFrame:UnregisterEvent("PLAYER_TARGET_CHANGED"); TargetFrameClassFrame:Hide(); PartyClassWidget1:UnregisterEvent("PARTY_MEMBERS_CHANGED"); PartyClassWidget2:UnregisterEvent("PARTY_MEMBERS_CHANGED"); PartyClassWidget3:UnregisterEvent("PARTY_MEMBERS_CHANGED"); PartyClassWidget4:UnregisterEvent("PARTY_MEMBERS_CHANGED"); PartyClassWidget1:Hide(); PartyClassWidget2:Hide(); PartyClassWidget3:Hide(); PartyClassWidget4:Hide(); end end function PorEnhance_Toggle3DPor(flag) if flag==1 then PorEnhance3DPortraitFramePlayerModel:RegisterEvent("UNIT_MODEL_CHANGED"); PorEnhance3DPortraitFramePlayerModel:RegisterEvent("PLAYER_TARGET_CHANGED"); PorEnhance3DPortraitFramePlayerModel:RegisterEvent("UNIT_PORTRAIT_UPDATE"); PorEnhance3DPortraitFramePlayer:Show(); PorEnhance3DPortraitFramePlayer:SetFrameStrata("BACKGROUND"); PlayerFrame:SetFrameStrata("MEDIUM"); PorEnhance3DPortraitFramePlayer:SetPoint("TOPLEFT", "PlayerFrame", "TOPLEFT", 46, -17); PlayerPortrait:Hide(); PorEnhance3DPortraitFrameTargetModel:RegisterEvent("UNIT_MODEL_CHANGED"); PorEnhance3DPortraitFrameTargetModel:RegisterEvent("PLAYER_TARGET_CHANGED"); PorEnhance3DPortraitFrameTargetModel:RegisterEvent("UNIT_PORTRAIT_UPDATE") if (TargetFrame:IsVisible()) then PorEnhance3DPortraitFrameTarget:Show(); else PorEnhance3DPortraitFrameTarget:Hide(); end PorEnhance3DPortraitFrameTarget:SetFrameStrata("BACKGROUND"); TargetFrame:SetFrameStrata("MEDIUM"); PorEnhance3DPortraitFrameTarget:SetPoint("TOPRIGHT", "TargetFrame", "TOPRIGHT", -46, -17); PorEnhance_75430b8195f7a1d99df1b41dbdf5fe9f:Hide(); PorEnhance3DPortrait_OnEvent(PorEnhance3DPortraitFrameTargetModel, "PLAYER_TARGET_CHANGED"); PorEnhance_3c9258edd605f408eb6fa2ab390ca894 = true; else PorEnhance3DPortraitFramePlayerModel:UnregisterEvent("UNIT_MODEL_CHANGED"); PorEnhance3DPortraitFramePlayerModel:UnregisterEvent("PLAYER_TARGET_CHANGED"); PorEnhance3DPortraitFramePlayerModel:UnregisterEvent("UNIT_PORTRAIT_UPDATE") PorEnhance3DPortraitFramePlayer:Hide(); PlayerPortrait:Show(); PorEnhance3DPortraitFrameTargetModel:UnregisterEvent("UNIT_MODEL_CHANGED"); PorEnhance3DPortraitFrameTargetModel:UnregisterEvent("PLAYER_TARGET_CHANGED"); PorEnhance3DPortraitFrameTargetModel:UnregisterEvent("UNIT_PORTRAIT_UPDATE") PorEnhance3DPortraitFrameTarget:Hide(); PorEnhance_75430b8195f7a1d99df1b41dbdf5fe9f:Show(); PorEnhance_3c9258edd605f408eb6fa2ab390ca894 = nil; end end function PorEnhance_9a694611c8b20488e27672f5013fc61e(PorEnhance_938cdde7e7d68b27b1b09aa6f205b59e, PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c) local PorEnhance_51bbc6646cac6748cc62569220600b52 = getglobal(PorEnhance_938cdde7e7d68b27b1b09aa6f205b59e:GetName() .. "Icon"); PorEnhance_51bbc6646cac6748cc62569220600b52:SetTexCoord(0, 1, 0, 1); local PorEnhance_fa4937e66e18ae5f1550c5e012a08d0e, PorEnhance_b962f54280c77029bc350c2b321adc64 = UnitClass(PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c); if (PorEnhance_b962f54280c77029bc350c2b321adc64 and UnitIsPlayer(PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c)) then PorEnhance_51bbc6646cac6748cc62569220600b52:SetTexture(PorEnhance_64f35781dbe4ccc5c88667f3f96d0d47); PorEnhance_51bbc6646cac6748cc62569220600b52:SetTexCoord(CLASS_ICON_TCOORDS[PorEnhance_b962f54280c77029bc350c2b321adc64][1], CLASS_ICON_TCOORDS[PorEnhance_b962f54280c77029bc350c2b321adc64][2], CLASS_ICON_TCOORDS[PorEnhance_b962f54280c77029bc350c2b321adc64][3], CLASS_ICON_TCOORDS[PorEnhance_b962f54280c77029bc350c2b321adc64][4]); PorEnhance_938cdde7e7d68b27b1b09aa6f205b59e:Show(); else PorEnhance_938cdde7e7d68b27b1b09aa6f205b59e:Hide(); end end function PorEnhance_bffb312dd87e35ebaf9805916e18788c(PorEnhance_938cdde7e7d68b27b1b09aa6f205b59e, PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c) local PorEnhance_51bbc6646cac6748cc62569220600b52 = getglobal(PorEnhance_938cdde7e7d68b27b1b09aa6f205b59e:GetName() .. "Icon"); local PorEnhance_fa4937e66e18ae5f1550c5e012a08d0e, PorEnhance_b962f54280c77029bc350c2b321adc64 = UnitClass(PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c); if (PorEnhance_b962f54280c77029bc350c2b321adc64 and UnitIsPlayer(PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c)) then PorEnhance_51bbc6646cac6748cc62569220600b52:SetTexture(PorEnhance_64f35781dbe4ccc5c88667f3f96d0d47); PorEnhance_51bbc6646cac6748cc62569220600b52:SetTexCoord(CLASS_ICON_TCOORDS[PorEnhance_b962f54280c77029bc350c2b321adc64][1], CLASS_ICON_TCOORDS[PorEnhance_b962f54280c77029bc350c2b321adc64][2], CLASS_ICON_TCOORDS[PorEnhance_b962f54280c77029bc350c2b321adc64][3], CLASS_ICON_TCOORDS[PorEnhance_b962f54280c77029bc350c2b321adc64][4]); PorEnhance_938cdde7e7d68b27b1b09aa6f205b59e:Show(); else PorEnhance_938cdde7e7d68b27b1b09aa6f205b59e:Hide(); end end function TargetFrameClassFrame_OnEvent(self, PorEnhance_d0708241b607c9a9dd1953c812fadfb7) if (PorEnhance_d0708241b607c9a9dd1953c812fadfb7 == "PLAYER_TARGET_CHANGED") then PorEnhance_9a694611c8b20488e27672f5013fc61e(TargetFrameClassFrame, "target"); end end function PartyMemberFrameClassFrame_OnLoad(self) local PorEnhance_8d0febf2348ea712b2b375ae95601d5f = self:GetID(); local PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c = "party"..PorEnhance_8d0febf2348ea712b2b375ae95601d5f; self.unit = PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c; end function PartyMemberFrameClassFrame_OnEvent(self, PorEnhance_d0708241b607c9a9dd1953c812fadfb7, ...) if (PorEnhance_d0708241b607c9a9dd1953c812fadfb7 == "PARTY_MEMBERS_CHANGED") then local PorEnhance_569986277582974b035afc053037547b = UnitName(self.unit); if (PorEnhance_569986277582974b035afc053037547b and PorEnhance_569986277582974b035afc053037547b ~= self.name) then PorEnhance_bffb312dd87e35ebaf9805916e18788c(self, self.unit); self.name = PorEnhance_569986277582974b035afc053037547b; end end end function PorEnhance_a8f437b3156f9bba489243b38e0d21ea(PorEnhance_8d0febf2348ea712b2b375ae95601d5f) local PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("PartyPorFrame"..PorEnhance_8d0febf2348ea712b2b375ae95601d5f); if (not PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a.counter) then PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a.counter = 1; if ( PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a ) then PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_HEALTH"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_MANA"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_RAGE"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_FOCUS"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_ENERGY"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_MAXMANA"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_DISPLAYPOWER"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_AURA"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("PARTY_MEMBERS_CHANGED"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_ENTERED_VEHICLE"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_EXITED_VEHICLE"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_TARGET") PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_SPELLCAST_START"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_SPELLCAST_STOP"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_SPELLCAST_FAILED"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_SPELLCAST_INTERRUPTED"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_SPELLCAST_DELAYED"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_SPELLCAST_CHANNEL_START"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_SPELLCAST_CHANNEL_UPDATE"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_SPELLCAST_CHANNEL_STOP"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:RegisterEvent("UNIT_SPELLCAST_SUCCEEDED") end else PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a.counter = PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a.counter + 1; end end function PorEnhance_da4c8acc592ce4265dba163b6d4f7365(PorEnhance_8d0febf2348ea712b2b375ae95601d5f) local PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("PartyPorFrame"..PorEnhance_8d0febf2348ea712b2b375ae95601d5f); if (PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a.counter) then PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a.counter = PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a.counter - 1; if (PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a.counter <= 0) then PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_HEALTH"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_MANA"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_RAGE"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_FOCUS"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_ENERGY"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_MAXMANA"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_DISPLAYPOWER"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_AURA"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("PARTY_MEMBERS_CHANGED"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_ENTERED_VEHICLE"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_EXITED_VEHICLE"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_TARGET") PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_SPELLCAST_START"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_SPELLCAST_STOP"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_SPELLCAST_FAILED"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_SPELLCAST_INTERRUPTED"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_SPELLCAST_DELAYED"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_SPELLCAST_CHANNEL_START"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_SPELLCAST_CHANNEL_UPDATE"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_SPELLCAST_CHANNEL_STOP"); PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:UnregisterEvent("UNIT_SPELLCAST_SUCCEEDED") PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a.counter = nil; end end end function PartyPorEnhanceFrame_OnLoad(self) local PorEnhance_8d0febf2348ea712b2b375ae95601d5f = self:GetID(); local PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c = "party"..PorEnhance_8d0febf2348ea712b2b375ae95601d5f; self.unit = PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c --[[ local targetframe = _G[self:GetName().."TargetFrame"] if targetframe then self.targetunit="party"..PorEnhance_8d0febf2348ea712b2b375ae95601d5f.."target" targetframe:RegisterForClicks("LeftButtonUp") targetframe:SetAttribute("*type1", "target") targetframe:SetAttribute("unit",self.targetunit) self.targettex = targetframe:CreateTexture() self.targettex:SetAllPoints() self.targetname= _G[self:GetName().."TargetFrameTargetText"] RegisterUnitWatch(targetframe) end local castingbar = _G[self:GetName().."CastingBar"] if castingbar then local castingbartext = _G[castingbar:GetName().."Text"] local font,size,flag = castingbartext:GetFont() castingbartext:SetFont(font,size*1.5,flag) CastingBarFrame_OnLoad(castingbar, self.unit, true); castingbar:SetScale(0.5) end self.targetframe = targetframe self.castingbar = castingbar]] end function PartyPorEnhanceFrame_Refresh(PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a) if not PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a.unit then PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:Hide() return end local PorEnhance_8d0febf2348ea712b2b375ae95601d5f = PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:GetID(); if (PorEnhance_8d0febf2348ea712b2b375ae95601d5f and GetPartyMember(PorEnhance_8d0febf2348ea712b2b375ae95601d5f)) then local PorEnhance_db2e34bc03f375a2abda68fc28730133 = UnitHealth(PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a.unit); local PorEnhance_4df8bc8a99e8bc700bf31353aad21ba8 = UnitHealthMax(PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a.unit); local PorEnhance_972107bf3cf8cc7d79e39295349667cc = PorEnhance_db2e34bc03f375a2abda68fc28730133/PorEnhance_4df8bc8a99e8bc700bf31353aad21ba8; local PorEnhance_e6955c64cf39bdb23dc86de1a9ec2117 = getglobal(PorEnhance_411b8aa6d5954c6020f0b9c9e80e847a:GetName().."HealthText"); if ( PorEnhance_e6955c64cf39bdb23dc86de1a9ec2117 ) then PorEnhance_e6955c64cf39bdb23dc86de1a9ec2117:SetText(PorEnhance_db2e34bc03f375a2abda68fc28730133.."/"..PorEnhance_4df8bc8a99e8bc700bf31353aad21ba8); if ( PorEnhance_d6ce3153373d8dac04ff1bfc4d81f0cd ) then if ( PorEnhance_972107bf3cf8cc7d79e39295349667cc > 0.5 ) then PorEnhance_e6955c64cf39bdb23dc86de1a9ec2117:SetTextColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); elseif ( PorEnhance_972107bf3cf8cc7d79e39295349667cc > 0.25 ) then PorEnhance_e6955c64cf39bdb23dc86de1a9ec2117:SetTextColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[1].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[1].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[1].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); else PorEnhance_e6955c64cf39bdb23dc86de1a9ec2117:SetTextColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[2].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[2].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[2].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); end end end end end function PartyPorEnhanceFrame_OnEvent(self, PorEnhance_d0708241b607c9a9dd1953c812fadfb7, ...) local PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c = ...; if (PorEnhance_d0708241b607c9a9dd1953c812fadfb7 ~= "PARTY_MEMBERS_CHANGED" and self.unit == PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c) then PartyPorEnhanceFrame_Refresh(self); elseif (PorEnhance_d0708241b607c9a9dd1953c812fadfb7 == "PARTY_MEMBERS_CHANGED") then local PorEnhance_569986277582974b035afc053037547b = UnitName(self.unit); if (PorEnhance_569986277582974b035afc053037547b and self.name ~= PorEnhance_569986277582974b035afc053037547b) then self.name = PorEnhance_569986277582974b035afc053037547b; PartyPorEnhanceFrame_Refresh(self); end elseif (PorEnhance_d0708241b607c9a9dd1953c812fadfb7 == "UNIT_ENTERED_VEHICLE") then if self.unit ==PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c then self.unit = PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c.."pet" PartyPorEnhanceFrame_Refresh(self) end elseif (PorEnhance_d0708241b607c9a9dd1953c812fadfb7 == "UNIT_EXITED_VEHICLE") then if self.unit == PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c.."pet" then self.unit = PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c PartyPorEnhanceFrame_Refresh(self) end --[[elseif (PorEnhance_d0708241b607c9a9dd1953c812fadfb7 =="UNIT_TARGET")then if not self.targetunit then return end if UnitExists(self.targetunit) then local color = RAID_CLASS_COLORS[select(2,UnitClassBase(self.targetunit))] if color and self.targettex then self.targettex:SetTexture(color.r,color.g,color.b); end if self.targetname then self.targetname:SetText(UnitName(self.targetunit)) end end ]] end end function HealthBar_OnValueChanged_Hooked(self, value) if (PorEnhance_0d961df4948b58a183f9e63217a09fc9 and PorEnhance_d6ce3153373d8dac04ff1bfc4d81f0cd) then local PorEnhance_a22192947cbcf5f27a4eaf500379d03d, PorEnhance_9226ee55ff8eed638d37ee13a4bdd517 = self:GetMinMaxValues(); local PorEnhance_536473f22dedf9f29b94b1004a62b8a0 = self:GetValue(); local PorEnhance_972107bf3cf8cc7d79e39295349667cc = PorEnhance_536473f22dedf9f29b94b1004a62b8a0/PorEnhance_9226ee55ff8eed638d37ee13a4bdd517; local PorEnhance_69072c73fde2ed407f863929fd1e7483 = self; if ( PorEnhance_69072c73fde2ed407f863929fd1e7483 ) then if ( PorEnhance_972107bf3cf8cc7d79e39295349667cc > 0.5 ) then PorEnhance_69072c73fde2ed407f863929fd1e7483:SetStatusBarColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); elseif ( PorEnhance_972107bf3cf8cc7d79e39295349667cc > 0.25 ) then PorEnhance_69072c73fde2ed407f863929fd1e7483:SetStatusBarColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[1].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[1].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[1].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); else PorEnhance_69072c73fde2ed407f863929fd1e7483:SetStatusBarColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[2].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[2].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[2].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); end end end end function PorEnhance_Refresh(flag) if (PorEnhance_0d961df4948b58a183f9e63217a09fc9 == nil) then PorEnhanceFrame:Hide(); PlayerPorExpBar:Hide(); else PorEnhanceFrame:Show(); if (PorEnhancement_ShowXPBar) then PlayerPorExpBar:Show(); end end if (flag == "health" or flag == nil) then local PorEnhance_db2e34bc03f375a2abda68fc28730133 = UnitHealth("player"); local PorEnhance_4df8bc8a99e8bc700bf31353aad21ba8 = UnitHealthMax("player"); local PorEnhance_972107bf3cf8cc7d79e39295349667cc = PorEnhance_db2e34bc03f375a2abda68fc28730133/PorEnhance_4df8bc8a99e8bc700bf31353aad21ba8; if (PorEnhance_0d961df4948b58a183f9e63217a09fc9) then local PorEnhance_80b122b2b55d9fee0b4effccf185d249 = math.floor(PorEnhance_972107bf3cf8cc7d79e39295349667cc*100).."%"; PlayerPorTextPaneHealthText:SetText(PorEnhance_db2e34bc03f375a2abda68fc28730133.."/"..PorEnhance_4df8bc8a99e8bc700bf31353aad21ba8); PlayerPorTextPaneHealthPercentText:SetText(PorEnhance_80b122b2b55d9fee0b4effccf185d249); end if ( PorEnhance_d6ce3153373d8dac04ff1bfc4d81f0cd ) then local PorEnhance_af1a489bdb8674202d5008fa2dd03a77 = getglobal("PlayerPorTextPaneHealthText"); local PorEnhance_275d8987c05d8a3354b272353d89a65d = getglobal("PlayerPorTextPaneHealthPercentText"); if ( PorEnhance_972107bf3cf8cc7d79e39295349667cc > 0.5 ) then PorEnhance_af1a489bdb8674202d5008fa2dd03a77:SetTextColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); PorEnhance_275d8987c05d8a3354b272353d89a65d:SetTextColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); elseif ( PorEnhance_972107bf3cf8cc7d79e39295349667cc > 0.25 ) then PorEnhance_af1a489bdb8674202d5008fa2dd03a77:SetTextColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[1].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[1].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[1].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); PorEnhance_275d8987c05d8a3354b272353d89a65d:SetTextColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[1].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[1].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[1].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); else PorEnhance_af1a489bdb8674202d5008fa2dd03a77:SetTextColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[2].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[2].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[2].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); PorEnhance_275d8987c05d8a3354b272353d89a65d:SetTextColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[2].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[2].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[2].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); end else local PorEnhance_af1a489bdb8674202d5008fa2dd03a77 = getglobal("PlayerPorTextPaneHealthText"); local PorEnhance_275d8987c05d8a3354b272353d89a65d = getglobal("PlayerPorTextPaneHealthPercentText"); local PorEnhance_69072c73fde2ed407f863929fd1e7483 = getglobal("PlayerFrameHealthBar"); PorEnhance_af1a489bdb8674202d5008fa2dd03a77:SetTextColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); PorEnhance_275d8987c05d8a3354b272353d89a65d:SetTextColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); if ( PorEnhance_69072c73fde2ed407f863929fd1e7483 ) then PorEnhance_69072c73fde2ed407f863929fd1e7483:SetStatusBarColor(PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_3ae1f2c4b38d5f7c356b4cdb7c6e4027, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_0f402d7ba502a47a51c410aee99b1ff1, PorEnhance_ca403b0dc304ab7e4cc5b6801c7e3c5a[0].PorEnhance_a0a053cacf1c8c43346fdc3adb684cb7); end end end if (flag == "mana" or flag == nil) then if (PorEnhance_0d961df4948b58a183f9e63217a09fc9) then local PorEnhance_208d4d4e303d73302bb6d6f063253f7e = UnitPowerType("player", PorEnhance_208d4d4e303d73302bb6d6f063253f7e); local PorEnhance_c453507d7e4b2ed85d448f9fa82e730e = UnitPower("player", PorEnhance_208d4d4e303d73302bb6d6f063253f7e); local PorEnhance_48897fef8a19a2ed09dac6a835c3de84 = UnitManaMax("player"); PlayerPorTextPaneManaText:SetText(PorEnhance_c453507d7e4b2ed85d448f9fa82e730e.."/"..PorEnhance_48897fef8a19a2ed09dac6a835c3de84); end end end function PorEnhance_OnUpdate(self, elapsed) if (not self.interval) then self.interval = 0; end self.interval = self.interval + elapsed; if (self.interval > 0.1) then self.interval = 0; if (GetCVarBool("predictedHealth")) then PorEnhance_Refresh("health"); end if (GetCVarBool("predictedPower")) then PorEnhance_Refresh("mana"); end end end function PorEnhance_OnEvent(self, PorEnhance_d0708241b607c9a9dd1953c812fadfb7, ...) local PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c = ...; if (PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c == "player") then if (PorEnhance_d0708241b607c9a9dd1953c812fadfb7 == "UNIT_DISPLAYPOWER") then PorEnhance_7e81c0664bdb5c86c5837aa3df747cb2(); else PorEnhance_Refresh(); end end end function PorEnhance_9d880fb4065fd5be23627092c95cc76d(PorEnhance_7739b813d90aed43ab9d0eb84ec1c1ae) if (InCombatLockdown()) then BigFoot_DelayCall(PorEnhance_9d880fb4065fd5be23627092c95cc76d, 1, PorEnhance_7739b813d90aed43ab9d0eb84ec1c1ae); return; end if ( PorEnhance_7739b813d90aed43ab9d0eb84ec1c1ae == 1 ) then TargetFrame:SetPoint("TOPLEFT", "UIParent", "TOPLEFT", 292, -4); else TargetFrame:SetPoint("TOPLEFT", "UIParent", "TOPLEFT", 250, -4); end end function PorEnhance_7e81c0664bdb5c86c5837aa3df747cb2(PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c) if ( not PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c ) then PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c = "player"; end local PorEnhance_a44ecbf575d7f2eca081a0592e8d84fa = PorEnhance_33c9f64253006c3a21cb4e8afd362a2a[UnitPowerType(PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c)]; PlayerPorTextPaneManaText:SetTextColor(PorEnhance_a44ecbf575d7f2eca081a0592e8d84fa.r, PorEnhance_a44ecbf575d7f2eca081a0592e8d84fa.g, PorEnhance_a44ecbf575d7f2eca081a0592e8d84fa.b); end function PlayerPorExpBar_Update() if ( PorEnhancement_ShowXPBar ) then PlayerPorExpBar:Show(); if (UnitLevel("player") == MAX_PLAYER_LEVEL) then local PorEnhance_8983c60d66c8593ec7165ea9dbedb584, PorEnhance_c563f0e90b41e682984a062bfdb28376, PorEnhance_a22192947cbcf5f27a4eaf500379d03d, PorEnhance_9226ee55ff8eed638d37ee13a4bdd517, PorEnhance_2361bab8b48b1041ad740bb561b21aee = GetWatchedFactionInfo(); if (PorEnhance_8983c60d66c8593ec7165ea9dbedb584) then local PorEnhance_e0e85008d0859db6bb769f09cf1b7b30 = FACTION_BAR_COLORS[PorEnhance_c563f0e90b41e682984a062bfdb28376]; PlayerPorExhaustionTick:Hide(); PlayerPorExpBar:SetMinMaxValues(0, PorEnhance_9226ee55ff8eed638d37ee13a4bdd517 - PorEnhance_a22192947cbcf5f27a4eaf500379d03d); PlayerPorExpBar:SetValue(PorEnhance_2361bab8b48b1041ad740bb561b21aee - PorEnhance_a22192947cbcf5f27a4eaf500379d03d); PlayerPorExpBar:SetStatusBarColor(PorEnhance_e0e85008d0859db6bb769f09cf1b7b30.r, PorEnhance_e0e85008d0859db6bb769f09cf1b7b30.g, PorEnhance_e0e85008d0859db6bb769f09cf1b7b30.b); return; end end local PorEnhance_d60e87d9ea28576959032ba3a7b8215e = UnitXP("player"); local PorEnhance_69b7174f04def7ef8202b6344d336f08 = UnitXPMax("player"); PlayerPorExpBar:SetMinMaxValues(min(0, PorEnhance_d60e87d9ea28576959032ba3a7b8215e), PorEnhance_69b7174f04def7ef8202b6344d336f08); PlayerPorExpBar:SetValue(PorEnhance_d60e87d9ea28576959032ba3a7b8215e); else PlayerPorExpBar:Hide(); end end function PlayerPorExhaustionTick_OnLoad(self) self:RegisterEvent("PLAYER_XP_UPDATE"); self:RegisterEvent("UPDATE_EXHAUSTION"); self:RegisterEvent("PLAYER_LEVEL_UP"); self:RegisterEvent("PLAYER_UPDATE_RESTING"); end function PlayerPorExhaustionTick_Update(self, event, ...) if ( PorEnhancement_ShowXPBar ) then if ((event == "PLAYER_XP_UPDATE") or (event == "UPDATE_EXHAUSTION") or (event == "PLAYER_LEVEL_UP")) then local PorEnhance_df0f414db2f188626d2d75db04d3f233 = UnitXP("player"); local PorEnhance_0828f7c4396722395e2269bfbb142528 = UnitXPMax("player"); local PorEnhance_30fb219f92a42c57875b25afb287d890 = GetXPExhaustion(); local PorEnhance_9586350b5f08dfd474d3a70a696f30e1, PorEnhance_bdc53e69c171b999c9833ac2c27b3028, PorEnhance_68c99caf4206a66d8d8a8fd5ec900a87; PorEnhance_9586350b5f08dfd474d3a70a696f30e1, PorEnhance_bdc53e69c171b999c9833ac2c27b3028, PorEnhance_68c99caf4206a66d8d8a8fd5ec900a87 = GetRestState(); if (PorEnhance_9586350b5f08dfd474d3a70a696f30e1 >= 3) then PlayerPorExhaustionTick:SetPoint("CENTER", "PlayerPorExpBar", "RIGHT", 0, 0); end if (not PorEnhance_30fb219f92a42c57875b25afb287d890) then PlayerPorExhaustionTick:Hide(); PlayerPorExhaustionLevelFillBar:Hide(); else local PorEnhance_528f782a710276134e96b8732d300011 = max(((PorEnhance_df0f414db2f188626d2d75db04d3f233 + PorEnhance_30fb219f92a42c57875b25afb287d890) / PorEnhance_0828f7c4396722395e2269bfbb142528) * PlayerPorExpBar:GetWidth(), 0); PlayerPorExhaustionTick:Show(); PlayerPorExhaustionTick:ClearAllPoints(); PlayerPorExhaustionLevelFillBar:Show(); if (PorEnhance_528f782a710276134e96b8732d300011 > PlayerPorExpBar:GetWidth()) then PlayerPorExhaustionTick:Hide(); PlayerPorExhaustionLevelFillBar:Hide(); else PlayerPorExhaustionTick:Show(); PlayerPorExhaustionTick:SetPoint("CENTER", "PlayerPorExpBar", "LEFT", PorEnhance_528f782a710276134e96b8732d300011, 0); PlayerPorExhaustionLevelFillBar:Show(); PlayerPorExhaustionLevelFillBar:SetPoint("TOPRIGHT", "PlayerPorExpBar", "TOPLEFT", PorEnhance_528f782a710276134e96b8732d300011, 0); end end end if (event == "UPDATE_EXHAUSTION") then local PorEnhance_9586350b5f08dfd474d3a70a696f30e1 = GetRestState(); if (PorEnhance_9586350b5f08dfd474d3a70a696f30e1 == 1) then PlayerPorExpBar:SetStatusBarColor(0.0, 0.39, 0.88, 1.0); PlayerPorExhaustionLevelFillBar:SetVertexColor(0.0, 0.39, 0.88, 0.15); PlayerPorExhaustionTickHighlight:SetVertexColor(0.0, 0.39, 0.88); elseif (PorEnhance_9586350b5f08dfd474d3a70a696f30e1 == 2) then PlayerPorExpBar:SetStatusBarColor(1.0, 1.0, 0.7, 1.0); PlayerPorExhaustionLevelFillBar:SetVertexColor(0.97, 0.58, 0.434, 0.15); PlayerPorExhaustionTickHighlight:SetVertexColor(0.97, 0.58, 0.434); end end else PlayerPorExhaustionTick:Hide(); end end function PlayerPorExpBar_OnEnter(self) local PorEnhance_7e14f8309a8440b165408a90264d8358, PorEnhance_0828f7c4396722395e2269bfbb142528 = PlayerPorExpBar:GetMinMaxValues(); local PorEnhance_df0f414db2f188626d2d75db04d3f233 = PlayerPorExpBar:GetValue(); local PorEnhance_e6955c64cf39bdb23dc86de1a9ec2117 = PorEnhance_df0f414db2f188626d2d75db04d3f233 .. "/" .. PorEnhance_0828f7c4396722395e2269bfbb142528; PlayerPorExpBarText:SetText(PorEnhance_e6955c64cf39bdb23dc86de1a9ec2117); PlayerPorExpBarText:Show(); end function PlayerPorExpBar_OnLeave(self) PlayerPorExpBarText:Hide(); end function PorEnhance_0c9720aba408fe8da6ea418cf6315ff7(bar, prefix) if (string.sub(bar:GetName(), 1, 16) == "PartyMemberFrame") then return; else PorEnhance_bc920268778e213bcbe933e06f2146db(bar, prefix); end end function PorEnhance3DPortrait_OnLoad(self) local PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c = string.gsub(string.gsub(self:GetName(), "PorEnhance3DPortraitFrame", ""), "Model", ""); self.PorEnhance_816a22c06f8a02a6936413a126809166 = PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c.."Portrait"; self.PorEnhance_cb030d6066e082b4621e84233d5c29f5 =string.lower(PorEnhance_fd724fd3c5e25aaf3b4226e1dae5257c); self:SetUnit(self.PorEnhance_cb030d6066e082b4621e84233d5c29f5); PorEnhance_16e4e3f845b4acba47626b6ea2c8e35c = 1/30; self.PorEnhance_6b668e23872f7e4c02320422f13fa97f = 0; self.PorEnhance_681a79cec901942251b39d16e72f5638 = true; self.PorEnhance_01e0e4b27cf75958621ea2c9a3c35018 = 0; self.PorEnhance_05b3777052633c86152f82b6a8173b48 = 1; self.PorEnhance_cf5feba72d5f364f7e750582a7d2ca91 = 0; self.PorEnhance_76cfee50e498f9e004865465afb99330 = 0; self.PorEnhance_9f91d9ab083d59f5d21b6d3bfb30fb7f = 0; end function PorEnhance3DPortrait_OnEvent(self, PorEnhance_d0708241b607c9a9dd1953c812fadfb7, ...) if (PorEnhance_3c9258edd605f408eb6fa2ab390ca894 and self.PorEnhance_681a79cec901942251b39d16e72f5638) then if (UnitIsVisible(self.PorEnhance_cb030d6066e082b4621e84233d5c29f5)) then if (not self:GetParent():IsVisible()) then self:GetParent():Show(); end local PorEnhance_9248008bbb6d0ee7ce13f6ee45680051 = getglobal(self.PorEnhance_816a22c06f8a02a6936413a126809166); if (PorEnhance_9248008bbb6d0ee7ce13f6ee45680051 and PorEnhance_9248008bbb6d0ee7ce13f6ee45680051:IsVisible()) then PorEnhance_9248008bbb6d0ee7ce13f6ee45680051:Hide(); end if (PorEnhance_d0708241b607c9a9dd1953c812fadfb7 == "UNIT_MODEL_CHANGED") then self:RefreshUnit(); if (self.PorEnhance_05b3777052633c86152f82b6a8173b48 > -1) then self:SetCamera(self.PorEnhance_05b3777052633c86152f82b6a8173b48); else if (self.PorEnhance_05b3777052633c86152f82b6a8173b48 == -1) then self.PorEnhance_05b3777052633c86152f82b6a8173b48 = -2; end self:SetPosition(self.PorEnhance_cf5feba72d5f364f7e750582a7d2ca91, self.PorEnhance_76cfee50e498f9e004865465afb99330, self.PorEnhance_9f91d9ab083d59f5d21b6d3bfb30fb7f); self:SetRotation(self.PorEnhance_6b668e23872f7e4c02320422f13fa97f); self:RefreshUnit(); end end if (UnitName(self.PorEnhance_cb030d6066e082b4621e84233d5c29f5)) then self.PorEnhance_01e0e4b27cf75958621ea2c9a3c35018 = 0; self.PorEnhance_eb4f10cfdc91090e4dbea2dbff51789d = 0; self:SetUnit(self.PorEnhance_cb030d6066e082b4621e84233d5c29f5); self:GetParent():Show(); else self:GetParent():Hide() end else self:GetParent():Hide(); local PorEnhance_9248008bbb6d0ee7ce13f6ee45680051 = getglobal(self.PorEnhance_816a22c06f8a02a6936413a126809166); if (PorEnhance_9248008bbb6d0ee7ce13f6ee45680051) then PorEnhance_9248008bbb6d0ee7ce13f6ee45680051:Show(); end end end end function PorEnhance3DPortrait_OnUpdate(self, arg1) if (PorEnhance_3c9258edd605f408eb6fa2ab390ca894 and self.PorEnhance_681a79cec901942251b39d16e72f5638) then if (not self.PorEnhance_01e0e4b27cf75958621ea2c9a3c35018) then self.PorEnhance_01e0e4b27cf75958621ea2c9a3c35018 = 0; self.PorEnhance_eb4f10cfdc91090e4dbea2dbff51789d = 0; end if (not self.PorEnhance_eb4f10cfdc91090e4dbea2dbff51789d) then self.PorEnhance_eb4f10cfdc91090e4dbea2dbff51789d = 0; end if (self.PorEnhance_01e0e4b27cf75958621ea2c9a3c35018 > 0) then if (self.last_sequence ~= self.PorEnhance_01e0e4b27cf75958621ea2c9a3c35018) then self.last_sequence = self.PorEnhance_01e0e4b27cf75958621ea2c9a3c35018; self.PorEnhance_eb4f10cfdc91090e4dbea2dbff51789d = 0; end if ((not self.PorEnhance_5979f8e5d1cf1480af556caa9f073853) or (self.PorEnhance_5979f8e5d1cf1480af556caa9f073853 == 0)) then self.PorEnhance_5979f8e5d1cf1480af556caa9f073853 = 10000; end self.PorEnhance_eb4f10cfdc91090e4dbea2dbff51789d = self.PorEnhance_eb4f10cfdc91090e4dbea2dbff51789d + (arg1 * 1000); self:SetSequenceTime(self.PorEnhance_01e0e4b27cf75958621ea2c9a3c35018,self.PorEnhance_eb4f10cfdc91090e4dbea2dbff51789d); if (self.PorEnhance_eb4f10cfdc91090e4dbea2dbff51789d > self.PorEnhance_5979f8e5d1cf1480af556caa9f073853) then self.PorEnhance_eb4f10cfdc91090e4dbea2dbff51789d = 0; if (not self.PorEnhance_697bc166b48ff7dccf72580608b5fb01) then self.PorEnhance_01e0e4b27cf75958621ea2c9a3c35018 = 0; self.PorEnhance_5979f8e5d1cf1480af556caa9f073853 = 0; end end else if (not self.PorEnhance_08610c24afd0471bb34aa92ab39f1a34) then self.PorEnhance_08610c24afd0471bb34aa92ab39f1a34 = PorEnhance_16e4e3f845b4acba47626b6ea2c8e35c; end self.PorEnhance_08610c24afd0471bb34aa92ab39f1a34 = (self.PorEnhance_08610c24afd0471bb34aa92ab39f1a34 - arg1); if (not (self.PorEnhance_08610c24afd0471bb34aa92ab39f1a34 > 0)) then self.PorEnhance_08610c24afd0471bb34aa92ab39f1a34 = PorEnhance_16e4e3f845b4acba47626b6ea2c8e35c; if (self.PorEnhance_05b3777052633c86152f82b6a8173b48 > -1) then self:SetCamera(self.PorEnhance_05b3777052633c86152f82b6a8173b48); else if (self.PorEnhance_05b3777052633c86152f82b6a8173b48 == -1) then self:RefreshUnit(); self.PorEnhance_05b3777052633c86152f82b6a8173b48 = -2; end self:SetPosition(self.PorEnhance_cf5feba72d5f364f7e750582a7d2ca91, self.PorEnhance_76cfee50e498f9e004865465afb99330, self.PorEnhance_9f91d9ab083d59f5d21b6d3bfb30fb7f); self:SetRotation(self.PorEnhance_6b668e23872f7e4c02320422f13fa97f); end self:SetCamera(0); end end end end 
