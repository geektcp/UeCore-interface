 MobHealth_ShowHealth = nil MobHealth_ShowMana = nil MobHealth_UseFormatted = nil MobHealth_ShowHealthPercent = nil local MobHealth_d332bff5fbb0f02f149db973258268a4 , MobHealth_4d4b69cc3898198cee4d5247361413a2 ,MobHealth_103ded569601bd7e6a2759decff09861, MobHealth_796c384b69dc0ba95f687124fd2895df,MobHealth_a8771c34687591cce93f5d8281089204 local function MobHealth_5b19873b7ce9a2d67912c7f01dc194fc(number) local style if number > 1000000 then style = "%dW" return style:format(ceil(number/10000)) end return number end local MobHealth_Eventer = BLibrary("BEvent"); function MobHealth_Display() if (not UnitExists("target")) then return; end MobHealth_d332bff5fbb0f02f149db973258268a4 = _G["MobHealthText"] MobHealth_4d4b69cc3898198cee4d5247361413a2 = _G["MobManaText"] MobHealth_103ded569601bd7e6a2759decff09861 = _G["MobHealthPercFrameValue"] MobHealth_796c384b69dc0ba95f687124fd2895df = _G["MobHealthPercFrame"] MobHealth_a8771c34687591cce93f5d8281089204 = _G["MobHealthPercFrameBG"] local MobHealth_db2e34bc03f375a2abda68fc28730133 = UnitHealth("target"); local MobHealth_4df8bc8a99e8bc700bf31353aad21ba8 = UnitHealthMax("target"); local MobHealth_ea4eac480c6a6767e84c51b6864de476 = UnitMana("target"); local MobHealth_b00b0341adf15fef7dcc34d588146853 = UnitManaMax("target"); local MobHealth_100767d05d3f6aecb333e18c068c65a8 = ""; local MobHealth_af08683f09dac39ab8a566fa459a5168 = ""; local MobHealth_10a2c0c107e53e00658ec74e6d51c53b = "" if MobHealth_ShowHealth and MobHealth_4df8bc8a99e8bc700bf31353aad21ba8 > 0 then if MobHealth_db2e34bc03f375a2abda68fc28730133 >= 0 then if MobHealth_UseFormatted then MobHealth_100767d05d3f6aecb333e18c068c65a8 = MobHealth_5b19873b7ce9a2d67912c7f01dc194fc(MobHealth_db2e34bc03f375a2abda68fc28730133) .. "/" ..MobHealth_5b19873b7ce9a2d67912c7f01dc194fc(MobHealth_4df8bc8a99e8bc700bf31353aad21ba8) else MobHealth_100767d05d3f6aecb333e18c068c65a8 = MobHealth_db2e34bc03f375a2abda68fc28730133 .. "/" ..MobHealth_4df8bc8a99e8bc700bf31353aad21ba8 end end MobHealth_d332bff5fbb0f02f149db973258268a4:SetText(MobHealth_100767d05d3f6aecb333e18c068c65a8) MobHealth_d332bff5fbb0f02f149db973258268a4:Show() else MobHealth_d332bff5fbb0f02f149db973258268a4:Hide() end if MobHealth_ShowMana and MobHealth_b00b0341adf15fef7dcc34d588146853 > 0 then if MobHealth_ea4eac480c6a6767e84c51b6864de476 >= 0 then if MobHealth_UseFormatted then MobHealth_af08683f09dac39ab8a566fa459a5168 = MobHealth_5b19873b7ce9a2d67912c7f01dc194fc(MobHealth_ea4eac480c6a6767e84c51b6864de476) .. "/" ..MobHealth_5b19873b7ce9a2d67912c7f01dc194fc(MobHealth_b00b0341adf15fef7dcc34d588146853) else MobHealth_af08683f09dac39ab8a566fa459a5168 = MobHealth_ea4eac480c6a6767e84c51b6864de476 .. "/" ..MobHealth_b00b0341adf15fef7dcc34d588146853 end end MobHealth_4d4b69cc3898198cee4d5247361413a2:SetText(MobHealth_af08683f09dac39ab8a566fa459a5168) MobHealth_4d4b69cc3898198cee4d5247361413a2:Show() else MobHealth_4d4b69cc3898198cee4d5247361413a2:Hide() end local MobHealth_80b122b2b55d9fee0b4effccf185d249 = math.floor(MobHealth_db2e34bc03f375a2abda68fc28730133*100/MobHealth_4df8bc8a99e8bc700bf31353aad21ba8); MobHealth_100767d05d3f6aecb333e18c068c65a8 = MobHealth_80b122b2b55d9fee0b4effccf185d249 .. "%"; if (MobHealth_ShowHealthPercent and MobHealth_ShowHealth) then MobHealth_103ded569601bd7e6a2759decff09861:SetText(MobHealth_100767d05d3f6aecb333e18c068c65a8) MobHealth_796c384b69dc0ba95f687124fd2895df:Show() TargetFrameNumericalThreat:SetPoint("BOTTOM","TargetFrame","TOP",-30,-22) MobHealth_a8771c34687591cce93f5d8281089204:SetVertexColor(TargetFrameNameBackground:GetVertexColor()) else TargetFrameNumericalThreat:SetPoint("BOTTOM","TargetFrame","TOP",-50,-22) MobHealth_796c384b69dc0ba95f687124fd2895df:Hide() if MobHealth_ShowHealthPercent then MobHealth_d332bff5fbb0f02f149db973258268a4:SetText(MobHealth_100767d05d3f6aecb333e18c068c65a8) MobHealth_d332bff5fbb0f02f149db973258268a4:Show() end end end function MobHealth_Toggle(arg) if (arg == 1) then MobHealth_Eventer:RegisterEvent("UNIT_HEALTH"); MobHealth_Eventer:RegisterEvent("PLAYER_TARGET_CHANGED"); MobHealth_Eventer:RegisterEvent("UNIT_COMBAT"); MobHealth_Eventer:RegisterEvent("UNIT_MANA"); TargetFrameHealthBar.TextString:SetAlpha(0); TargetFrameManaBar.TextString:SetAlpha(0); if TargetDeadText then TargetDeadText:SetAlpha(0) end MobHealth_Display() else MobHealth_Eventer:UnregisterAllEvent(); TargetFrameHealthBar.TextString:SetAlpha(1); TargetFrameManaBar.TextString:SetAlpha(1); if TargetDeadText then TargetDeadText:SetAlpha(1) end if MobHealth_d332bff5fbb0f02f149db973258268a4 then MobHealth_d332bff5fbb0f02f149db973258268a4:Hide() end if MobHealth_4d4b69cc3898198cee4d5247361413a2 then MobHealth_4d4b69cc3898198cee4d5247361413a2:Hide() end if MobHealth_796c384b69dc0ba95f687124fd2895df then MobHealth_796c384b69dc0ba95f687124fd2895df:Hide() end end end function MobHealth_Eventer:UNIT_HEALTH(unit) MobHealth_Display(); end function MobHealth_Eventer:UNIT_MANA(unit) MobHealth_Display(); end function MobHealth_Eventer:PLAYER_TARGET_CHANGED() MobHealth_Display(); end 
