 local ItemInfo_27564b0f8fc08d6bd0345695785ce4b6 = BLocal("ItemInfo"); local ItemInfo_bec6b2696ec890fdca8ddd42fbd09040 = BLibrary("BEvent"); local ItemInfo_01df612d60ced2cfa8ff3c8d1a39e47d = BLibrary("BSecureHook"); ItemInfo_bec6b2696ec890fdca8ddd42fbd09040:RegisterEvent("ADDON_LOADED"); if (GetLocale() == "zhCN") then ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Item Info"] = "物品信息"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Unit Price"] = "单价"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Show unit price"] = "显示拍卖物品的单价"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff00ff00Add|r %s"] = "|cff00ff00添加|r %s"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffff0000Remove|r %s"] = "|cffff0000移除|r %s"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Warning: List is full."] = "警告:记录物品已满!"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff00ff00[%s]|r has been removed from query list."] = "|cff00ff00[%s]|r 已成功移除出查询列表!"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff00ff00[%s]|r has been removed from query list."] = "|cff00ff00[%s]|r 已成功添加入查询列表!"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff66ccff<Aunction Helper>: |r"] = "|cff66ccff<物品信息>: |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Confirmation"] = "确认竞拍该物品"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["The item has been bid"] = "该物品已有人竞拍"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Click to select item to query"] = "点击选择查询物品"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Unable to inquire about the whole auction infomation, this feature has the cooling time of 15 minutes"] = "无法查询整个物品信息, 该功能具有15分钟的冷却时间!"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Scan"] = "扫描"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Scan all"] = "扫描整个拍卖行的物品信息"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Scaning finished, total %d items, %d records."] = "扫描结束，总共扫描到%d件物品，%d条记录。"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Reagent"] = "施法材料"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEEach for sell: |r"] = "|cff7B68EE出售单价: |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EETotal for sell: |r"] = "|cff7B68EE出售总价: |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEStart bid: |r"] = "|cff7B68EE起拍单价: |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEStart group bid(%d): |r"] = "|cff7B68EE每组拍价(%d): |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEGroup bid(%d%%): |r"] = "|cff7B68EE竞标单价(%d%%): |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEBid out(%d%%): |r"] = "|cff7B68EE一口单价(%d%%): |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffFFFAFAStack: %d|r"] = "|cffFFFAFA每组堆叠: %d|r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff667A3FThere is no bid information for this item|r"] = "|cff667A3F没有该物品的拍卖行数据|r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffFFE4B5Item level: %d|r"] = "|cffFFE4B5物品等级: %d|r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffFFD700Use(%s):|r |cffFF00FF%s|r"] = "|cffFFD700用途(%s):|r |cffFF00FF%s|r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffFFD700Use:|r |cffFFD700%s|r"] = "|cffFFD700用途:|r |cffFFD700%s|r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Priest'] = "牧师"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Mage'] = "法师"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Paladin'] = "圣骑士"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Rogue'] = "潜行者"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Shaman'] = "萨满"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Warlock'] = "术士"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Druid'] = "德鲁伊"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Alchemy'] = "炼金"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Blacksmithing'] = "锻造"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Enchanting'] = "附魔"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Engineering'] = "工程学"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Leatherworking'] = "制皮"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Tailoring'] = "裁缝"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Gem'] = "宝石加工"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Cooking'] = "烹饪"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Inscription'] = "铭文"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Mining'] = "采矿"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['FirstAid'] = "急救"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["All information about auction items will be cleared, Are you sure?"] = "确认清除所有物品的拍卖信息?"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["All information about auction items were cleared!"] = "成功清除了所有物品的拍卖信息!" elseif (GetLocale() == "zhTW") then ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Item Info"] = "物品信息"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Unit Price"] = "單價"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Show unit price"] = "顯示拍賣物品的單價"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff00ff00Add|r %s"] = "|cff00ff00添加|r %s"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffff0000Remove|r %s"] = "|cffff0000移除|r %s"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Warning: List is full."] = "警告:記錄物品已滿!"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff00ff00[%s]|r has been removed from query list."] = "|cff00ff00[%s]|r 已成功移除出查詢列表!"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff00ff00[%s]|r has been removed from query list."] = "|cff00ff00[%s]|r 已成功添加入查詢列表!"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff66ccff<Aunction Helper>: |r"] = "|cff66ccff<物品信息>: |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Confirmation"] = "確認競拍該物品"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["The item has been bid"] = "該物品已有人競拍"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Click to select item to query"] = "點擊選擇查詢物品"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Unable to inquire about the whole auction infomation, this feature has the cooling time of 15 minutes"] = "無法查詢整個物品資訊, 該功能具有15分鐘的冷卻時間!"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Scan"] = "掃描"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Scan all"] = "掃描整個拍賣行的物品資訊"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Scaning finished, total %d items, %d records."] = "掃描結束，總共掃描到%d件物品，%d條記錄。"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Reagent"] = "施法材料"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEEach for sell: |r"] = "|cff7B68EE出售單價: |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EETotal for sell: |r"] = "|cff7B68EE出售總價: |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEStart bid: |r"] = "|cff7B68EE起拍單價: |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEStart group bid(%d): |r"] = "|cff7B68EE每組拍價(%d): |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEGroup bid(%d%%): |r"] = "|cff7B68EE競標單價(%d%%): |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEBid out(%d%%): |r"] = "|cff7B68EE直購單價(%d%%): |r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffFFFAFAStack: %d|r"] = "|cffFFFAFA每組堆疊: %d|r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff667A3FThere is no bid information for this item|r"] = "|cff667A3F沒有該物品的拍賣行資料|r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffFFE4B5Item level: %d|r"] = "|cffFFE4B5物品等級: %d|r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffFFD700Use(%s):|r |cffFF00FF%s|r"] = "|cffFFD700用途(%s):|r |cffFF00FF%s|r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffFFD700Use:|r |cffFFD700%s|r"] = "|cffFFD700用途:|r |cffFFD700%s|r"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Priest'] = "牧師"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Mage'] = "法師"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Paladin'] = "聖騎士"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Rogue'] = "盜賊"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Shaman'] = "薩滿"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Warlock'] = "術士"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Druid'] = "德魯伊"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Alchemy'] = "煉金"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Blacksmithing'] = "鍛造"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Enchanting'] = "附魔"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Engineering'] = "工程學"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Leatherworking'] = "制皮"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Tailoring'] = "裁縫"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Gem'] = "寶石加工"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Cooking'] = "烹飪"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Inscription'] = "銘文"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Mining'] = "採礦"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['FirstAid']="急救"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["All information about auction items will be cleared, Are you sure?"] = "確認清除所有物品的拍賣資訊?"; ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["All information about auction items were cleared!"] = "成功清除了所有物品的拍賣資訊!" end II_LAST_ITEM_DURATION = 1440; BUY_OUT_SCALE = 1.5; II_MIN_NEED_CHECK = 100000; II_Temp_NonValue = {}; ItemInfo_Config = { ["rname"] = {}, ["bidprice"] = {}, ["ShowUnitPrice"] = nil, }; local ItemInfo_430372cffccf1f7472976dd445422a1b = BLibrary("BInfo", "chat", ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Item Info"]); local ItemInfo_2140bb9f1f51de36bdf1e48056b92f6d = "Interface\\PvPRankBadges\\PvPRank09.blp"; local ItemInfo_70bef846d271f3927b06cf78ec8bb5b4 = nil; local ItemInfo_7d74c6a6be304992d3e391143d721868 = 30; local ItemInfo_5574f6638e43dc2f32b116b040328cfe = 100; local ItemInfo_c3eba7ecdad0c747cae12732334b4e0a; local ItemInfo_74d9d3d28567760954003f615182ce18; local ItemInfo_2107d35fd249bcc51b30c2de1274fd49; local ItemInfo_f13ab2b475c25572a620788ec44fbbf8 = {}; local ItemInfo_84dfffc1f538ee5e8fb625d8273066c7; local ItemInfo_Tooltip; local Iteminfo_Hooked; local II_Statusbar; local ItemInfo_f924ef2a8da54a3e2af4e2f83c870fe6; local ItemInfo_2c611746bef83a9b6dd9d98cc8b6e959 = {}; II_Config = { ["Enable"] = 1, ["AutoFill"] = 1, ["SellValue"] = 1, ["AuctionInfo"] = 1, ["ItemLevel"] = 1, ["StackCount"] = 1, ["UseInfo"] = 1, ["GemInfo"] = 1, ["ItemQulity"] = nil, }; local ItemInfo_fccc3608e23020113b0cee9a01e1919c = { ['1'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Priest']; ['2'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Mage']; ['3'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Paladin']; ['4'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Rogue']; ['5'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Shaman']; ['6'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Warlock']; ['7'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Druid']; ['8'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Alchemy']; ['9'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Blacksmithing']; ['10'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Enchanting']; ['11'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Engineering']; ['12'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Leatherworking']; ['13'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Tailoring']; ['14'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Gem']; ['15'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Cooking']; ['16'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Inscription']; ['17'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['Mining']; ['18'] = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6['FirstAid']; }; StaticPopupDialogs["BID_AUCTION"] = { text = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Confirmation"], button1 = ACCEPT, button2 = CANCEL, OnAccept = function(self) PlaceAuctionBid("list", GetSelectedAuctionItem("list"), MoneyInputFrame_GetCopper(BrowseBidPrice)); MoneyInputFrame_GetCopper(BrowseBidPrice); end, OnShow = function(self) MoneyFrame_Update(self:GetName().."MoneyFrame", MoneyInputFrame_GetCopper(BrowseBidPrice)); end, hasMoneyFrame = 1, showAlert = 1, timeout = 0, exclusive = 1, hideOnEscape = 1 }; StaticPopupDialogs["CLEAR_AUCTION_INFOMATION"] = { text = ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["All information about auction items will be cleared, Are you sure?"], button1 = ACCEPT, button2 = CANCEL, OnAccept = function(self) ItemInfo_2c611746bef83a9b6dd9d98cc8b6e959 = {}; for ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887, ItemInfo_536473f22dedf9f29b94b1004a62b8a0 in pairs(ItemInfoItemUserData) do if (type(ItemInfo_536473f22dedf9f29b94b1004a62b8a0) == "string") then ItemInfoItemUserData[ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887] = strmatch(ItemInfoItemUserData[ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887], "(.*:.*:).*"); end end ItemInfo_430372cffccf1f7472976dd445422a1b:Print(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["All information about auction items were cleared!"]); end, showAlert = 1, timeout = 0, exclusive = 1, hideOnEscape = 1 }; local function ItemInfo_0c52d557e2660c2afbb6a0ff84149692(...) SortButton_UpdateArrow(BrowseNameSort, "list", "name"); local ItemInfo_99f3cf2c6f1fdfadb0fd4ab6e0843bf5, ItemInfo_9248008bbb6d0ee7ce13f6ee45680051, ItemInfo_81b1f54fc01b0ac2d57753b4b077836c, ItemInfo_34694ab57c8a9444e5e6faf24cae8213, ItemInfo_410bf65e3d9dd0c6862d3e4426dce982, ItemInfo_4f0f0bd269d3aed0b523907026ae2a31; local ItemInfo_8983c60d66c8593ec7165ea9dbedb584, ItemInfo_9248008bbb6d0ee7ce13f6ee45680051, ItemInfo_3f50417fb16be9b1078eb68d24fa9c26, ItemInfo_5fb35c5c169c804bc82bd7f93ad8e32f, ItemInfo_8403f942a202fef1da4103030c05205a, ItemInfo_aa48e4d59c305916bb09e3d3ecaa76d0, ItemInfo_51682d3edbbf6aa3cd8a52190f1a9094, ItemInfo_8126704607de771b02f09d547c67706b, ItemInfo_876ae3817655938dba8b508a2da65e97, ItemInfo_7034464da73cfb8515c09445b0c4bc7f, ItemInfo_93f3ec5375c6c1f725e2468d6fd47204, ItemInfo_34d65f4a08814c0a25899aa8c09974f1; local ItemInfo_98b436aae97b9941de81152428c81208 = FauxScrollFrame_GetOffset(BrowseScrollFrame); for ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f=1, NUM_BROWSE_TO_DISPLAY do local ItemInfo_45739690061ee7945c14d8a8937f5395 = ItemInfo_98b436aae97b9941de81152428c81208 + ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f; ItemInfo_81b1f54fc01b0ac2d57753b4b077836c = "BrowseButton"..ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f; ItemInfo_8983c60d66c8593ec7165ea9dbedb584, ItemInfo_9248008bbb6d0ee7ce13f6ee45680051, ItemInfo_3f50417fb16be9b1078eb68d24fa9c26, ItemInfo_5fb35c5c169c804bc82bd7f93ad8e32f, ItemInfo_8403f942a202fef1da4103030c05205a, level, ItemInfo_aa48e4d59c305916bb09e3d3ecaa76d0, ItemInfo_51682d3edbbf6aa3cd8a52190f1a9094, ItemInfo_8126704607de771b02f09d547c67706b, ItemInfo_7034464da73cfb8515c09445b0c4bc7f, ItemInfo_93f3ec5375c6c1f725e2468d6fd47204, ItemInfo_34d65f4a08814c0a25899aa8c09974f1 = GetAuctionItemInfo("list", ItemInfo_45739690061ee7945c14d8a8937f5395); ItemInfo_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 = getglobal("BrowseButton" .. ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f); ItemInfo_9248008bbb6d0ee7ce13f6ee45680051 = getglobal(ItemInfo_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetName() .. "Texture"); if (ItemInfo_7034464da73cfb8515c09445b0c4bc7f == 0) then ItemInfo_9248008bbb6d0ee7ce13f6ee45680051:Hide(); ItemInfo_4f0f0bd269d3aed0b523907026ae2a31 = ItemInfo_aa48e4d59c305916bb09e3d3ecaa76d0; else ItemInfo_9248008bbb6d0ee7ce13f6ee45680051:Show(); ItemInfo_4f0f0bd269d3aed0b523907026ae2a31 = ItemInfo_7034464da73cfb8515c09445b0c4bc7f; end ItemInfo_34694ab57c8a9444e5e6faf24cae8213 = getglobal(ItemInfo_81b1f54fc01b0ac2d57753b4b077836c.."MoneyFrame"); ItemInfo_410bf65e3d9dd0c6862d3e4426dce982 = getglobal(ItemInfo_81b1f54fc01b0ac2d57753b4b077836c.."BuyoutFrameMoney"); if (ItemInfo_Config.ShowUnitPrice) then ItemInfo_4f0f0bd269d3aed0b523907026ae2a31 = math.floor(ItemInfo_4f0f0bd269d3aed0b523907026ae2a31/ItemInfo_3f50417fb16be9b1078eb68d24fa9c26 + 0.5); end MoneyFrame_Update(ItemInfo_34694ab57c8a9444e5e6faf24cae8213:GetName(), ItemInfo_4f0f0bd269d3aed0b523907026ae2a31); if ( ItemInfo_8126704607de771b02f09d547c67706b > 0 ) then if (ItemInfo_Config.ShowUnitPrice) then ItemInfo_8126704607de771b02f09d547c67706b = math.floor(ItemInfo_8126704607de771b02f09d547c67706b/ItemInfo_3f50417fb16be9b1078eb68d24fa9c26 + 0.5); end MoneyFrame_Update(ItemInfo_410bf65e3d9dd0c6862d3e4426dce982:GetName(), ItemInfo_8126704607de771b02f09d547c67706b); end end end local function ItemInfo_648afc4e523bce211ef4a10aead7bc38() for ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f = 1, NUM_BROWSE_TO_DISPLAY, 1 do local ItemInfo_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 = getglobal("BrowseButton" .. ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f); local ItemInfo_411b8aa6d5954c6020f0b9c9e80e847a = CreateFrame("Button", ItemInfo_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetName() .. "Texture", ItemInfo_99f3cf2c6f1fdfadb0fd4ab6e0843bf5); local ItemInfo_9248008bbb6d0ee7ce13f6ee45680051 = ItemInfo_411b8aa6d5954c6020f0b9c9e80e847a:CreateTexture('', "ARTWORK"); ItemInfo_411b8aa6d5954c6020f0b9c9e80e847a:SetWidth(20); ItemInfo_411b8aa6d5954c6020f0b9c9e80e847a:SetHeight(20); ItemInfo_411b8aa6d5954c6020f0b9c9e80e847a:SetFrameLevel(ItemInfo_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetFrameLevel() + 1); ItemInfo_9248008bbb6d0ee7ce13f6ee45680051:SetAllPoints(ItemInfo_411b8aa6d5954c6020f0b9c9e80e847a); ItemInfo_9248008bbb6d0ee7ce13f6ee45680051:SetTexture(ItemInfo_2140bb9f1f51de36bdf1e48056b92f6d); ItemInfo_411b8aa6d5954c6020f0b9c9e80e847a:SetPoint("TOPLEFT", ItemInfo_99f3cf2c6f1fdfadb0fd4ab6e0843bf5, "TOPLEFT", 185, -8); ItemInfo_411b8aa6d5954c6020f0b9c9e80e847a:SetScript("OnEnter", function(self) GameTooltip:SetOwner(ItemInfo_411b8aa6d5954c6020f0b9c9e80e847a, "ANCHOR_BOTTOMRIGHT", 20, 20); GameTooltip:AddLine(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["The item has been bid"]); GameTooltip:Show(); end); ItemInfo_411b8aa6d5954c6020f0b9c9e80e847a:SetScript("OnLeave", function(self) GameTooltip:Hide(); end); end AuctionSort["list_name"] = { { column = "bid", reverse = false }, { column = "quantity", reverse = true }, { column = "buyout", reverse = false }, { column = "name", reverse = false }, { column = "level", reverse = true }, { column = "quality", reverse = false }, }; local ItemInfo_a8644751c725025897986966350ca5bf = CreateFrame("Button", "BrowseNameSort", AuctionFrameBrowse, "AuctionSortButtonTemplate"); ItemInfo_a8644751c725025897986966350ca5bf:SetText(NAME); ItemInfo_a8644751c725025897986966350ca5bf:SetWidth(91); ItemInfo_a8644751c725025897986966350ca5bf:SetHeight(19); ItemInfo_a8644751c725025897986966350ca5bf:SetPoint("TOPLEFT", AuctionFrameBrowse, "TOPLEFT", 186, -82); ItemInfo_a8644751c725025897986966350ca5bf.order = false; ItemInfo_a8644751c725025897986966350ca5bf:SetScript("OnClick", function (self, ...) self.order = not self.order; AuctionFrame_SetSort("list", "name", self.order); AuctionFrameBrowse_Search(); SortButton_UpdateArrow(ItemInfo_a8644751c725025897986966350ca5bf, "list", "name"); end); hooksecurefunc("AuctionFrameBrowse_UpdateArrows", function(self, ...) if (ItemInfo_7a0f86110e37241bb46f51b3e0530b56) then SortButton_UpdateArrow(ItemInfo_a8644751c725025897986966350ca5bf, "list", "name"); end end); BrowseQualitySort:SetWidth(123); BrowseQualitySort:ClearAllPoints(); BrowseQualitySort:SetPoint("LEFT", ItemInfo_a8644751c725025897986966350ca5bf, "RIGHT", -2, 0); local ItemInfo_1dde068a1391636ae83e03bd798f5914 = CreateFrame("CheckButton", "ShowOnUnitPriceCheckButton", BrowseCurrentBidSort, "UICheckButtonTemplate"); ItemInfo_1dde068a1391636ae83e03bd798f5914:SetWidth(24); ItemInfo_1dde068a1391636ae83e03bd798f5914:SetHeight(24); getglobal(ItemInfo_1dde068a1391636ae83e03bd798f5914:GetName() .. "Text"):SetText(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Unit Price"], 1, 1, 1); ItemInfo_1dde068a1391636ae83e03bd798f5914:SetPoint("LEFT", BrowseCurrentBidSort, "LEFT", 110, -2); ItemInfo_1dde068a1391636ae83e03bd798f5914:SetScript("OnEnter", function (self) GameTooltip:SetOwner(self, "ANCHOR_RIGHT", -60, 0); GameTooltip:AddLine(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Show unit price"]); GameTooltip:Show(); end); ItemInfo_1dde068a1391636ae83e03bd798f5914:SetScript("OnLeave", function (self) GameTooltip:Hide(); end); ItemInfo_1dde068a1391636ae83e03bd798f5914:SetScript("OnClick", function (self) if (ItemInfo_1dde068a1391636ae83e03bd798f5914:GetChecked() == 1) then ItemInfo_Config.ShowUnitPrice = 1; else ItemInfo_Config.ShowUnitPrice = nil; end AuctionFrameBrowse_Update(); end); ItemInfo_1dde068a1391636ae83e03bd798f5914:SetScript("OnShow", function (self) if (ItemInfo_Config.ShowUnitPrice == 1) then ItemInfo_1dde068a1391636ae83e03bd798f5914:SetChecked(1); else ItemInfo_1dde068a1391636ae83e03bd798f5914:SetChecked(0); end end); local ItemInfo_8e74cec0f43558c7a448228e3cd6dc8b = CreateFrame("Frame", "SaveSearchName_DropDown", BrowseName, "BDropDownMenuTemplate"); local ItemInfo_1db96014cef6489dcf324f3ef7b365bd = getglobal(ItemInfo_8e74cec0f43558c7a448228e3cd6dc8b:GetName() .. "Button"); ItemInfo_8e74cec0f43558c7a448228e3cd6dc8b:SetID(1); ItemInfo_8e74cec0f43558c7a448228e3cd6dc8b:SetPoint("LEFT", BrowseName, "LEFT", 13, -3); ItemInfo_8e74cec0f43558c7a448228e3cd6dc8b:SetScript("OnShow", function () BDropDownMenu_Initialize(ItemInfo_8e74cec0f43558c7a448228e3cd6dc8b, ItemInfo_52de863f6e4805efe3608c438f3dde1b, "MENU"); getglobal(ItemInfo_8e74cec0f43558c7a448228e3cd6dc8b:GetName().."ButtonNormalTexture"):SetTexture("Interface\\ChatFrame\\UI-ChatIcon-ScrollDown-Up"); getglobal(ItemInfo_8e74cec0f43558c7a448228e3cd6dc8b:GetName().."ButtonDisabledTexture"):SetTexture("Interface\\ChatFrame\\UI-ChatIcon-ScrollDown-Disabled"); getglobal(ItemInfo_8e74cec0f43558c7a448228e3cd6dc8b:GetName().."ButtonPushedTexture"):SetTexture("Interface\\ChatFrame\\UI-ChatIcon-ScrollDown-Down"); getglobal(ItemInfo_8e74cec0f43558c7a448228e3cd6dc8b:GetName().."ButtonHighlightTexture"):SetTexture("Interface\\Buttons\\UI-Common-MouseHilight"); BDropDownMenu_SetSelectedValue(BrowseDropDown,-1); end); ItemInfo_1db96014cef6489dcf324f3ef7b365bd:SetScript("OnEnter", function(ItemInfo_c933410cf37b41b19e2f71899bab1b9b) GameTooltip:SetOwner(ItemInfo_1db96014cef6489dcf324f3ef7b365bd, "ANCHOR_RIGHT"); GameTooltip:AddLine(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Click to select item to query"]); GameTooltip:Show(); end); ItemInfo_1db96014cef6489dcf324f3ef7b365bd:SetScript("OnLeave", function(ItemInfo_c933410cf37b41b19e2f71899bab1b9b) GameTooltip:Hide(); end); local ItemInfo_57902cfaee33348e476f69e1e2776af7 = CreateFrame("Button", "ItemInfoScanButton", AuctionFrameBrowse, "UIPanelButtonTemplate"); ItemInfo_57902cfaee33348e476f69e1e2776af7.timer = 0; ItemInfo_57902cfaee33348e476f69e1e2776af7:SetWidth(80); ItemInfo_57902cfaee33348e476f69e1e2776af7:SetHeight(22); ItemInfo_57902cfaee33348e476f69e1e2776af7:ClearAllPoints(); ItemInfo_57902cfaee33348e476f69e1e2776af7:SetPoint("BOTTOM", AuctionFrameBrowse, "BOTTOM", -156 , 14); ItemInfo_57902cfaee33348e476f69e1e2776af7:SetText(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Scan"]); ItemInfo_57902cfaee33348e476f69e1e2776af7:SetScript("OnClick", ItemInfo_7afc1f1c45d20545199ee2a68b84ddd1); ItemInfo_57902cfaee33348e476f69e1e2776af7:SetScript("OnUpdate", function(self, elapsed) ItemInfo_57902cfaee33348e476f69e1e2776af7.timer = ItemInfo_57902cfaee33348e476f69e1e2776af7.timer + elapsed; if (ItemInfo_57902cfaee33348e476f69e1e2776af7.timer > 0.2) then ItemInfo_57902cfaee33348e476f69e1e2776af7.timer = 0; if (CanSendAuctionQuery() and not ItemInfo_74d9d3d28567760954003f615182ce18) then ItemInfo_57902cfaee33348e476f69e1e2776af7:Enable(); else ItemInfo_57902cfaee33348e476f69e1e2776af7:Disable(); end end end); ItemInfo_57902cfaee33348e476f69e1e2776af7:SetScript("OnEnter", function() GameTooltip:SetOwner(ItemInfo_57902cfaee33348e476f69e1e2776af7, "ANCHOR_RIGHT"); GameTooltip:AddLine(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Scan all"]); GameTooltip:Show(); end); ItemInfo_57902cfaee33348e476f69e1e2776af7:SetScript("OnLeave", function(ItemInfo_c933410cf37b41b19e2f71899bab1b9b) GameTooltip:Hide(); end); local ItemInfo_530b87828ad2e2a982654c43f8aac7d3 = CreateFrame("Button", "ItemInfoBidButton", AuctionFrameBrowse, "UIPanelButtonTemplate"); ItemInfo_530b87828ad2e2a982654c43f8aac7d3:SetWidth(80); ItemInfo_530b87828ad2e2a982654c43f8aac7d3:SetHeight(22); ItemInfo_530b87828ad2e2a982654c43f8aac7d3:SetText(BID); ItemInfo_530b87828ad2e2a982654c43f8aac7d3:SetPoint("CENTER", BrowseBidButton ,"CENTER", 0, 0); ItemInfo_530b87828ad2e2a982654c43f8aac7d3:SetScript("OnClick", function() if (MoneyInputFrame_GetCopper(BrowseBidPrice) > II_MIN_NEED_CHECK) then StaticPopup_Show("BID_AUCTION"); else PlaceAuctionBid("list", GetSelectedAuctionItem("list"), MoneyInputFrame_GetCopper(BrowseBidPrice)); end end); getglobal("BrowseBidButton"):Hide(); II_Statusbar = BLibrary("BFProgressBar", AuctionFrameBrowse, 0.0, 1.0, 0.0, 0.7); II_Statusbar:SetWidth(300); II_Statusbar:SetHeight(12); II_Statusbar:Hide(); II_Statusbar:SetPoint("TOP", "AuctionFrameBrowse", "TOP", 100, -240); II_Statusbar.text = ItemInfo_57902cfaee33348e476f69e1e2776af7:CreateFontString(nil, "ARTWORK", "GameFontHighlightSmall"); II_Statusbar.text:SetPoint("TOP", II_Statusbar:GetFrame(), "TOP", 0, 25); II_Statusbar.icon = ItemInfo_57902cfaee33348e476f69e1e2776af7:CreateTexture(nil, "ARTWORK"); II_Statusbar.icon:SetWidth(32); II_Statusbar.icon:SetHeight(32); II_Statusbar.icon:SetPoint("TOP", II_Statusbar:GetFrame(), "TOP", 0, 60); II_Statusbar.page = ItemInfo_57902cfaee33348e476f69e1e2776af7:CreateFontString(nil, "OVERLAY", "GameFontHighlightSmall"); II_Statusbar.page:SetPoint("TOP", II_Statusbar:GetFrame(), "TOP", 0, -15); II_Statusbar.text:Hide(); II_Statusbar.icon:Hide(); II_Statusbar.page:Hide(); end local function ItemInfo_00c082a9be8a1d8e162a78021c9506b5(self, ItemInfo_8983c60d66c8593ec7165ea9dbedb584) if(ItemInfo_8983c60d66c8593ec7165ea9dbedb584 and type(ItemInfo_8983c60d66c8593ec7165ea9dbedb584) == "string") then BrowseName:SetText(ItemInfo_8983c60d66c8593ec7165ea9dbedb584); BrowseName:HighlightText(0,-1); end end local function ItemInfo_2f54ba7e2e2035f7cae3d0a3d6ea3eb3() if (ItemInfo_c3eba7ecdad0c747cae12732334b4e0a) then ItemInfo_430372cffccf1f7472976dd445422a1b:Print(format(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff00ff00[%s]|r has been removed from query list."], ItemInfo_Config.rname[ItemInfo_c3eba7ecdad0c747cae12732334b4e0a])); tremove(ItemInfo_Config.rname, ItemInfo_c3eba7ecdad0c747cae12732334b4e0a); BrowseName:SetText(""); end end local function ItemInfo_64ac251a2fd0f26a37b32e9c8e3c7c66(self, ItemInfo_8983c60d66c8593ec7165ea9dbedb584) tinsert(ItemInfo_Config.rname, ItemInfo_8983c60d66c8593ec7165ea9dbedb584); ItemInfo_430372cffccf1f7472976dd445422a1b:Print(format(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff00ff00[%s]|r has been removed from query list."], ItemInfo_8983c60d66c8593ec7165ea9dbedb584)); end local function ItemInfo_ae5f860635f34632b40407a4193e0abd(ItemInfo_8983c60d66c8593ec7165ea9dbedb584) if (not ItemInfo_8983c60d66c8593ec7165ea9dbedb584) then return nil; end for ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887 ,ItemInfo_2361bab8b48b1041ad740bb561b21aee in ipairs(ItemInfo_Config.rname) do if (ItemInfo_2361bab8b48b1041ad740bb561b21aee == ItemInfo_8983c60d66c8593ec7165ea9dbedb584) then return ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887; end end return nil; end function ItemInfo_52de863f6e4805efe3608c438f3dde1b() local ItemInfo_a44ecbf575d7f2eca081a0592e8d84fa = {value = 0, notCheckable = 1}; local ItemInfo_8983c60d66c8593ec7165ea9dbedb584 = BrowseName:GetText(); local ItemInfo_6d6c07a1e02fdc49f88cbb276184ce42 = nil; if (ItemInfo_8983c60d66c8593ec7165ea9dbedb584 and ItemInfo_8983c60d66c8593ec7165ea9dbedb584 ~= "") then ItemInfo_c3eba7ecdad0c747cae12732334b4e0a = ItemInfo_ae5f860635f34632b40407a4193e0abd(ItemInfo_8983c60d66c8593ec7165ea9dbedb584); if (ItemInfo_c3eba7ecdad0c747cae12732334b4e0a) then ItemInfo_a44ecbf575d7f2eca081a0592e8d84fa.func = ItemInfo_2f54ba7e2e2035f7cae3d0a3d6ea3eb3; ItemInfo_a44ecbf575d7f2eca081a0592e8d84fa.text = format(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffff0000Remove|r %s"], ItemInfo_8983c60d66c8593ec7165ea9dbedb584); elseif (#(ItemInfo_Config["rname"]) < ItemInfo_7d74c6a6be304992d3e391143d721868 ) then ItemInfo_a44ecbf575d7f2eca081a0592e8d84fa.func = ItemInfo_64ac251a2fd0f26a37b32e9c8e3c7c66; ItemInfo_a44ecbf575d7f2eca081a0592e8d84fa.arg1 = ItemInfo_8983c60d66c8593ec7165ea9dbedb584; ItemInfo_a44ecbf575d7f2eca081a0592e8d84fa.text = format(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff00ff00Add|r %s"], ItemInfo_8983c60d66c8593ec7165ea9dbedb584); else ItemInfo_6d6c07a1e02fdc49f88cbb276184ce42 = 1; end if (not ItemInfo_6d6c07a1e02fdc49f88cbb276184ce42) then BDropDownMenu_AddButton(ItemInfo_a44ecbf575d7f2eca081a0592e8d84fa); end end for ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887, ItemInfo_8983c60d66c8593ec7165ea9dbedb584 in ipairs(ItemInfo_Config.rname) do ItemInfo_a44ecbf575d7f2eca081a0592e8d84fa = {text=ItemInfo_8983c60d66c8593ec7165ea9dbedb584, arg1 =ItemInfo_8983c60d66c8593ec7165ea9dbedb584, value=ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887, func = ItemInfo_00c082a9be8a1d8e162a78021c9506b5}; if (ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887 == ItemInfo_c3eba7ecdad0c747cae12732334b4e0a) then ItemInfo_a44ecbf575d7f2eca081a0592e8d84fa.checked = 1; end BDropDownMenu_AddButton(ItemInfo_a44ecbf575d7f2eca081a0592e8d84fa); end end local ItemInfo_f5ef2e343a089ab6db45900b3b6664e2; local function ItemInfo_d38674d7124558fa892d69c68668bd01(ItemInfo_e498578b78aa0db9c45f30f87d63debc) if (not ItemInfo_e498578b78aa0db9c45f30f87d63debc or type(ItemInfo_e498578b78aa0db9c45f30f87d63debc) ~= "string" or ItemInfo_e498578b78aa0db9c45f30f87d63debc == "") then return nil, nil; end ItemInfo_f5ef2e343a089ab6db45900b3b6664e2 = 0; local _, _, ItemInfo_82541cdf49ca614c4b9f2a16a07469a0 = strfind(ItemInfo_e498578b78aa0db9c45f30f87d63debc, "|c%x+|Hitem:(%d+):.+|h%[.-%]|h|r"); return tonumber(ItemInfo_82541cdf49ca614c4b9f2a16a07469a0), ItemInfo_82541cdf49ca614c4b9f2a16a07469a0; end function ItemInfo_164444afb6062d2f53d10d470ceb066c(...) if (CursorHasItem()) then local ItemInfo_2e00ffac12aadb3a1fd865993ec505b9, ItemInfo_82541cdf49ca614c4b9f2a16a07469a0, ItemInfo_e498578b78aa0db9c45f30f87d63debc = GetCursorInfo(); ItemInfo_f5ef2e343a089ab6db45900b3b6664e2 = ItemInfo_82541cdf49ca614c4b9f2a16a07469a0; end end local function ItemInfo_a445b92afd50dd0eb5fc856b59495961(...) if (event == "NEW_AUCTION_UPDATE") then ItemInfo_2c611746bef83a9b6dd9d98cc8b6e959 = {}; local ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887, ItemInfo_8e6c2aaeb6b11f026ff5cb0a29aebe68; local ItemInfo_8983c60d66c8593ec7165ea9dbedb584, ItemInfo_9248008bbb6d0ee7ce13f6ee45680051, ItemInfo_3f50417fb16be9b1078eb68d24fa9c26, ItemInfo_5fb35c5c169c804bc82bd7f93ad8e32f, ItemInfo_8403f942a202fef1da4103030c05205a, ItemInfo_153c09d58f6a5f5b4e49d6f46f5b1395 = GetAuctionSellItemInfo(); if not ItemInfo_8983c60d66c8593ec7165ea9dbedb584 then return end local _,ItemInfo_e498578b78aa0db9c45f30f87d63debc = GetItemInfo(ItemInfo_8983c60d66c8593ec7165ea9dbedb584); ItemInfo_f5ef2e343a089ab6db45900b3b6664e2 = ItemInfo_d38674d7124558fa892d69c68668bd01(ItemInfo_e498578b78aa0db9c45f30f87d63debc) local ItemInfo_72715f78e65bb2b7bd0a142e3e8051d5 = max(floor(ItemInfo_153c09d58f6a5f5b4e49d6f46f5b1395 * 1.5), 100); local ItemInfo_fafa209f325a6db4a33bfb03c1262213 = max(floor(ItemInfo_153c09d58f6a5f5b4e49d6f46f5b1395 * 1.5)*BUY_OUT_SCALE, 150); if (ItemInfoItemUserData[ItemInfo_f5ef2e343a089ab6db45900b3b6664e2]) then local ItemInfo_2d791ae4567d74b819675b5e43976b38, ItemInfo_69105424502e274cf23c01c94d137dcf, ItemInfo_cc2f52a0fb537fc52bad2a24c36555e4, ItemInfo_b2a1a92f8cfc1fd27c3c599aab508c48, ItemInfo_538b270f328689a8561d4072c6bf727d, ItemInfo_dc7ddedc9f56eaefcd9ed97e644fe28a = strmatch(ItemInfoItemUserData[ItemInfo_f5ef2e343a089ab6db45900b3b6664e2], ".*:.*:(%d+)`(%d+)`(%d+)`(%d+)`(%d+)`(%d+)"); if (ItemInfo_2d791ae4567d74b819675b5e43976b38 and ItemInfo_69105424502e274cf23c01c94d137dcf and ItemInfo_538b270f328689a8561d4072c6bf727d and ItemInfo_dc7ddedc9f56eaefcd9ed97e644fe28a) then ItemInfo_72715f78e65bb2b7bd0a142e3e8051d5 = max(floor(ItemInfo_2d791ae4567d74b819675b5e43976b38/ItemInfo_69105424502e274cf23c01c94d137dcf + 0.5) * ItemInfo_3f50417fb16be9b1078eb68d24fa9c26, 100); ItemInfo_fafa209f325a6db4a33bfb03c1262213 = max(floor(ItemInfo_538b270f328689a8561d4072c6bf727d/ItemInfo_dc7ddedc9f56eaefcd9ed97e644fe28a + 0.5)*ItemInfo_3f50417fb16be9b1078eb68d24fa9c26 , max(floor(ItemInfo_153c09d58f6a5f5b4e49d6f46f5b1395 * 1.5)*BUY_OUT_SCALE, 150)); end end AuctionsItemButton:SetNormalTexture(ItemInfo_9248008bbb6d0ee7ce13f6ee45680051); AuctionsItemButtonName:SetText(ItemInfo_8983c60d66c8593ec7165ea9dbedb584); if ( ItemInfo_3f50417fb16be9b1078eb68d24fa9c26 > 1 ) then AuctionsItemButtonCount:SetText(ItemInfo_3f50417fb16be9b1078eb68d24fa9c26); AuctionsItemButtonCount:Show(); else AuctionsItemButtonCount:Hide(); end if ( ItemInfo_8983c60d66c8593ec7165ea9dbedb584 == II_LAST_ITEM_AUCTIONED and ItemInfo_3f50417fb16be9b1078eb68d24fa9c26 == II_LAST_ITEM_COUNT) then MoneyInputFrame_SetCopper(StartPrice, II_LAST_ITEM_START_BID); MoneyInputFrame_SetCopper(BuyoutPrice, II_LAST_ITEM_BUYOUT); if (II_LAST_ITEM_DURATION == 720) then elseif (II_LAST_ITEM_DURATION == 1440) then else end else if (ItemInfo_8983c60d66c8593ec7165ea9dbedb584 and ItemInfo_Config.bidprice[ItemInfo_8983c60d66c8593ec7165ea9dbedb584]) then ItemInfo_8e6c2aaeb6b11f026ff5cb0a29aebe68 = ItemInfo_Config.bidprice[ItemInfo_8983c60d66c8593ec7165ea9dbedb584]; MoneyInputFrame_SetCopper(StartPrice, ItemInfo_8e6c2aaeb6b11f026ff5cb0a29aebe68[2]*ItemInfo_3f50417fb16be9b1078eb68d24fa9c26); MoneyInputFrame_SetCopper(BuyoutPrice, ItemInfo_8e6c2aaeb6b11f026ff5cb0a29aebe68[3]*ItemInfo_3f50417fb16be9b1078eb68d24fa9c26); if (ItemInfo_8e6c2aaeb6b11f026ff5cb0a29aebe68[4] == 720) then elseif (ItemInfo_8e6c2aaeb6b11f026ff5cb0a29aebe68[4] == 1440) then else end else MoneyInputFrame_SetCopper(StartPrice, ItemInfo_72715f78e65bb2b7bd0a142e3e8051d5); MoneyInputFrame_SetCopper(BuyoutPrice, ItemInfo_fafa209f325a6db4a33bfb03c1262213); if (AuctionFrameAuctions.duration == 720) then elseif (AuctionFrameAuctions.duration == 1440) then else end end if ( ItemInfo_8983c60d66c8593ec7165ea9dbedb584 ) then II_LAST_ITEM_AUCTIONED = ItemInfo_8983c60d66c8593ec7165ea9dbedb584; II_LAST_ITEM_COUNT = ItemInfo_3f50417fb16be9b1078eb68d24fa9c26; II_LAST_ITEM_START_BID = MoneyInputFrame_GetCopper(StartPrice); II_LAST_ITEM_BUYOUT = MoneyInputFrame_GetCopper(BuyoutPrice); end end UpdateDeposit(); end end function ItemInfo_816bad5b26d812a70e00dd16c033428d(self, ...) if (#(ItemInfo_Config.bidprice) >= ItemInfo_5574f6638e43dc2f32b116b040328cfe) then tremove(ItemInfo_Config.bidprice, 1); end II_LAST_ITEM_DURATION = AuctionFrameAuctions.duration; II_LAST_ITEM_START_BID = MoneyInputFrame_GetCopper(StartPrice); II_LAST_ITEM_BUYOUT = MoneyInputFrame_GetCopper(BuyoutPrice); if(II_LAST_ITEM_AUCTIONED) then ItemInfo_Config.bidprice[II_LAST_ITEM_AUCTIONED] = {II_LAST_ITEM_AUCTIONED, math.floor(II_LAST_ITEM_START_BID/II_LAST_ITEM_COUNT+0.5), math.floor(II_LAST_ITEM_BUYOUT/II_LAST_ITEM_COUNT+0.5), II_LAST_ITEM_DURATION}; end end local function getUseInfo(s) if (not s or type(s) ~= "string" or s=="") then return nil; else if (ItemInfo_fccc3608e23020113b0cee9a01e1919c[s]) then if (tonumber(s) < 8) then return ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Reagent"], ItemInfo_fccc3608e23020113b0cee9a01e1919c[s]; else return ItemInfo_fccc3608e23020113b0cee9a01e1919c[s], nil; end else return nil; end end end local useinfo, auctioninfo; local function getItemInfo(ID) if (not ItemInfoItemUserData[ID] or ItemInfoItemUserData[ID]=="::") then ItemInfoItemUserData[ID] = ItemInfoItemData[ID] or "::"; end local price, use, auction, ItemInfo_2d791ae4567d74b819675b5e43976b38, ItemInfo_69105424502e274cf23c01c94d137dcf, ItemInfo_cc2f52a0fb537fc52bad2a24c36555e4, ItemInfo_b2a1a92f8cfc1fd27c3c599aab508c48, ItemInfo_538b270f328689a8561d4072c6bf727d, ItemInfo_dc7ddedc9f56eaefcd9ed97e644fe28a; useinfo, auctioninfo = {}, {0,0,0,0,0,0}; local s = ItemInfoItemUserData[ID]; price, use, auction = strmatch(s, "(.*):(.*):(.*)"); price = (price and price~="") and (price + 0) or 0; local ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f = 1; while (use and use ~= "" and select(ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f, strsplit("`", use))) do local u = select(ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f, strsplit("`", use)); if (u and u ~= "") then tinsert(useinfo, u); end ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f = ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f + 1; end if (auction and auction ~= "") then ItemInfo_2d791ae4567d74b819675b5e43976b38, ItemInfo_69105424502e274cf23c01c94d137dcf, ItemInfo_cc2f52a0fb537fc52bad2a24c36555e4, ItemInfo_b2a1a92f8cfc1fd27c3c599aab508c48, ItemInfo_538b270f328689a8561d4072c6bf727d, ItemInfo_dc7ddedc9f56eaefcd9ed97e644fe28a = strmatch(auction, "(%d+)`(%d+)`(%d+)`(%d+)`(%d+)`(%d+)"); ItemInfo_2d791ae4567d74b819675b5e43976b38 = ItemInfo_2d791ae4567d74b819675b5e43976b38 or 0; ItemInfo_69105424502e274cf23c01c94d137dcf = ItemInfo_69105424502e274cf23c01c94d137dcf or 0; ItemInfo_cc2f52a0fb537fc52bad2a24c36555e4 = ItemInfo_cc2f52a0fb537fc52bad2a24c36555e4 or 0; ItemInfo_b2a1a92f8cfc1fd27c3c599aab508c48 = ItemInfo_b2a1a92f8cfc1fd27c3c599aab508c48 or 0; ItemInfo_538b270f328689a8561d4072c6bf727d = ItemInfo_538b270f328689a8561d4072c6bf727d or 0; ItemInfo_dc7ddedc9f56eaefcd9ed97e644fe28a = ItemInfo_dc7ddedc9f56eaefcd9ed97e644fe28a or 0; auctioninfo = {ItemInfo_2d791ae4567d74b819675b5e43976b38+0, ItemInfo_69105424502e274cf23c01c94d137dcf+0, ItemInfo_cc2f52a0fb537fc52bad2a24c36555e4+0, ItemInfo_b2a1a92f8cfc1fd27c3c599aab508c48+0, ItemInfo_538b270f328689a8561d4072c6bf727d+0, ItemInfo_dc7ddedc9f56eaefcd9ed97e644fe28a+0}; end return ID, s, price, useinfo, auctioninfo; end local ItemInfo_3eb8cb9289f5a18ed02739bbb6ccfcf4, ItemInfo_200c28f35ca91678a6a2ce6b27c518bf = 0, 0; function ItemInfo_7afc1f1c45d20545199ee2a68b84ddd1() ItemInfo_2c611746bef83a9b6dd9d98cc8b6e959 = {}; local ItemInfo_1d4759bfc72235fba8c07452ef2ddb5d, ItemInfo_661cc76c79125ff1e78ee866ab1a8926 = CanSendAuctionQuery(); ItemInfo_200c28f35ca91678a6a2ce6b27c518bf = 0; if (ItemInfo_1d4759bfc72235fba8c07452ef2ddb5d and (not ItemInfo_74d9d3d28567760954003f615182ce18)) then for i=1, NUM_BROWSE_TO_DISPLAY do getglobal("BrowseButton"..i):Hide(); end QueryAuctionItems(nil, nil, nil, nil, nil, nil, ItemInfo_200c28f35ca91678a6a2ce6b27c518bf, nil, nil); AuctionFrameBrowse:UnregisterEvent("AUCTION_ITEM_LIST_UPDATE"); ItemInfo_74d9d3d28567760954003f615182ce18 = 1; ItemInfo_f13ab2b475c25572a620788ec44fbbf8 = {}; ItemInfo_88eb02eca37ab375893902719f31254a = 0; ItemInfo_57e71a77fe496d3ae18297712315a02a = 0; end end local function ItemInfo_100fd79cf1900b10d8165767c3a542cb() local ItemInfo_1d4759bfc72235fba8c07452ef2ddb5d, ItemInfo_661cc76c79125ff1e78ee866ab1a8926 = CanSendAuctionQuery(); if (ItemInfo_200c28f35ca91678a6a2ce6b27c518bf >= ItemInfo_3eb8cb9289f5a18ed02739bbb6ccfcf4 or (not AuctionFrame:IsShown())) then AuctionFrameBrowse:RegisterEvent("AUCTION_ITEM_LIST_UPDATE"); II_Statusbar:Hide(); II_Statusbar.text:Hide(); II_Statusbar.icon:Hide(); II_Statusbar.page:Hide(); return; end if (ItemInfo_1d4759bfc72235fba8c07452ef2ddb5d) then ItemInfo_200c28f35ca91678a6a2ce6b27c518bf = ItemInfo_200c28f35ca91678a6a2ce6b27c518bf + 1; II_Statusbar:SetPos(ItemInfo_200c28f35ca91678a6a2ce6b27c518bf); II_Statusbar.page:SetText(format("%d / %d", ItemInfo_200c28f35ca91678a6a2ce6b27c518bf, ItemInfo_3eb8cb9289f5a18ed02739bbb6ccfcf4)); ItemInfo_74d9d3d28567760954003f615182ce18 = 1; QueryAuctionItems(nil, nil, nil, nil, nil, nil, ItemInfo_200c28f35ca91678a6a2ce6b27c518bf, nil, nil); else BigFoot_DelayCall(ItemInfo_100fd79cf1900b10d8165767c3a542cb, 1); end end function ItemInfo_bec6b2696ec890fdca8ddd42fbd09040.AUCTION_ITEM_LIST_UPDATE() if (ItemInfo_74d9d3d28567760954003f615182ce18) then local ItemInfo_726aa3de2ffb08e3499701719a2e12cb = {}; local ItemInfo_0f8c48d86563ffc763ecfc017391421a, ItemInfo_55ef42a3c90c937268a1117374e46132 = GetNumAuctionItems("list"); local _, ItemInfo_3f50417fb16be9b1078eb68d24fa9c26, ItemInfo_aa48e4d59c305916bb09e3d3ecaa76d0, ItemInfo_8126704607de771b02f09d547c67706b, ItemInfo_7034464da73cfb8515c09445b0c4bc7f, ItemInfo_e498578b78aa0db9c45f30f87d63debc, ItemInfo_de3cbe286618f666df102dd52371d2ef, ItemInfo_7193346511e6cfd5aa01fac54f2cd168; ItemInfo_3eb8cb9289f5a18ed02739bbb6ccfcf4 = floor(ItemInfo_55ef42a3c90c937268a1117374e46132/NUM_AUCTION_ITEMS_PER_PAGE + 0.5); II_Statusbar:SetRange(1, ItemInfo_3eb8cb9289f5a18ed02739bbb6ccfcf4); if (not II_Statusbar:IsShown()) then II_Statusbar:SetPos(1); II_Statusbar.page:SetText(format("%d / %d", 1, ItemInfo_3eb8cb9289f5a18ed02739bbb6ccfcf4)) II_Statusbar:Show(); II_Statusbar.page:Show(); II_Statusbar.icon:Show(); II_Statusbar.text:Show(); end for ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f=1, NUM_AUCTION_ITEMS_PER_PAGE do _, ItemInfo_9248008bbb6d0ee7ce13f6ee45680051, ItemInfo_3f50417fb16be9b1078eb68d24fa9c26, _, _, _, ItemInfo_aa48e4d59c305916bb09e3d3ecaa76d0, _, ItemInfo_8126704607de771b02f09d547c67706b, ItemInfo_7034464da73cfb8515c09445b0c4bc7f = GetAuctionItemInfo("list", ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f); ItemInfo_e498578b78aa0db9c45f30f87d63debc = GetAuctionItemLink("list", ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f); if (ItemInfo_e498578b78aa0db9c45f30f87d63debc and type(ItemInfo_e498578b78aa0db9c45f30f87d63debc) == "string" and (ItemInfo_200c28f35ca91678a6a2ce6b27c518bf*NUM_AUCTION_ITEMS_PER_PAGE+1) <= ItemInfo_55ef42a3c90c937268a1117374e46132) then local ItemInfo_de3cbe286618f666df102dd52371d2ef = ItemInfo_d38674d7124558fa892d69c68668bd01(tostring(ItemInfo_e498578b78aa0db9c45f30f87d63debc)); if (ItemInfo_de3cbe286618f666df102dd52371d2ef) then if (not ItemInfo_f13ab2b475c25572a620788ec44fbbf8[ItemInfo_de3cbe286618f666df102dd52371d2ef]) then ItemInfo_f13ab2b475c25572a620788ec44fbbf8[ItemInfo_de3cbe286618f666df102dd52371d2ef] = 1; ItemInfo_57e71a77fe496d3ae18297712315a02a = ItemInfo_57e71a77fe496d3ae18297712315a02a + 1; end ItemInfo_88eb02eca37ab375893902719f31254a = ItemInfo_88eb02eca37ab375893902719f31254a + 1; II_Statusbar.text:SetText(ItemInfo_e498578b78aa0db9c45f30f87d63debc); II_Statusbar.icon:SetTexture(ItemInfo_9248008bbb6d0ee7ce13f6ee45680051); if (not ItemInfoItemUserData[ItemInfo_de3cbe286618f666df102dd52371d2ef] or strsplit(":",ItemInfoItemUserData[ItemInfo_de3cbe286618f666df102dd52371d2ef]) == "") then II_Temp_NonValue[ItemInfo_de3cbe286618f666df102dd52371d2ef] = ItemInfo_e498578b78aa0db9c45f30f87d63debc; end ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef] = ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef] or {0,0,0,0,0,0}; ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef][1] = ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef][1] + ItemInfo_aa48e4d59c305916bb09e3d3ecaa76d0; ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef][2] = ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef][2] + ItemInfo_3f50417fb16be9b1078eb68d24fa9c26; if (ItemInfo_7034464da73cfb8515c09445b0c4bc7f > 0) then ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef][3] = ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef][3] + ItemInfo_7034464da73cfb8515c09445b0c4bc7f; ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef][4] = ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef][4] + ItemInfo_3f50417fb16be9b1078eb68d24fa9c26; end if (ItemInfo_8126704607de771b02f09d547c67706b > 0) then ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef][5] = ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef][5] + ItemInfo_8126704607de771b02f09d547c67706b; ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef][6] = ItemInfo_726aa3de2ffb08e3499701719a2e12cb[ItemInfo_de3cbe286618f666df102dd52371d2ef][6] + ItemInfo_3f50417fb16be9b1078eb68d24fa9c26; end end end end local ID, s, price, useinfo, auctioninfo for ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887, ItemInfo_2361bab8b48b1041ad740bb561b21aee in pairs(ItemInfo_726aa3de2ffb08e3499701719a2e12cb) do local ID, s, price, useinfo, auctioninfo = getItemInfo(ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887); if (not ItemInfoItemUserData[ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887]) then ItemInfoItemUserData[ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887] = format("::%d`%d`%d`%d`%d`%d", ItemInfo_2361bab8b48b1041ad740bb561b21aee[1], ItemInfo_2361bab8b48b1041ad740bb561b21aee[2], ItemInfo_2361bab8b48b1041ad740bb561b21aee[3], ItemInfo_2361bab8b48b1041ad740bb561b21aee[4], ItemInfo_2361bab8b48b1041ad740bb561b21aee[5], ItemInfo_2361bab8b48b1041ad740bb561b21aee[6]); else auctioninfo[1] = auctioninfo[1] + ItemInfo_2361bab8b48b1041ad740bb561b21aee[1]; auctioninfo[2] = auctioninfo[2] + ItemInfo_2361bab8b48b1041ad740bb561b21aee[2]; auctioninfo[3] = auctioninfo[3] + ItemInfo_2361bab8b48b1041ad740bb561b21aee[3]; auctioninfo[4] = auctioninfo[4] + ItemInfo_2361bab8b48b1041ad740bb561b21aee[4]; auctioninfo[5] = auctioninfo[5] + ItemInfo_2361bab8b48b1041ad740bb561b21aee[5]; auctioninfo[6] = auctioninfo[6] + ItemInfo_2361bab8b48b1041ad740bb561b21aee[6]; ItemInfoItemUserData[ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887] = string.gsub(ItemInfoItemUserData[ItemInfo_413bf9c15ce77baa8ebf1cda4cbf4887], "(.*:.*:).*", "%1" .. format("%d`%d`%d`%d`%d`%d", auctioninfo[1],auctioninfo[2],auctioninfo[3],auctioninfo[4],auctioninfo[5],auctioninfo[6])); end end if (ItemInfo_200c28f35ca91678a6a2ce6b27c518bf < ItemInfo_3eb8cb9289f5a18ed02739bbb6ccfcf4) then local ItemInfo_1d4759bfc72235fba8c07452ef2ddb5d, ItemInfo_661cc76c79125ff1e78ee866ab1a8926 = CanSendAuctionQuery(); if (ItemInfo_1d4759bfc72235fba8c07452ef2ddb5d) then ItemInfo_200c28f35ca91678a6a2ce6b27c518bf = ItemInfo_200c28f35ca91678a6a2ce6b27c518bf + 1; II_Statusbar:SetPos(ItemInfo_200c28f35ca91678a6a2ce6b27c518bf); II_Statusbar.page:SetText(format("%d / %d", ItemInfo_200c28f35ca91678a6a2ce6b27c518bf, ItemInfo_3eb8cb9289f5a18ed02739bbb6ccfcf4)); ItemInfo_74d9d3d28567760954003f615182ce18 = 1; QueryAuctionItems(nil, nil, nil, nil, nil, nil, ItemInfo_200c28f35ca91678a6a2ce6b27c518bf, nil, nil); else if (AuctionFrame:IsShown()) then BigFoot_DelayCall(ItemInfo_100fd79cf1900b10d8165767c3a542cb, 1); else AuctionFrameBrowse:RegisterEvent("AUCTION_ITEM_LIST_UPDATE"); II_Statusbar:Hide(); II_Statusbar.text:Hide(); II_Statusbar.icon:Hide(); II_Statusbar.page:Hide(); return; end end return; else ItemInfo_74d9d3d28567760954003f615182ce18 = nil; ItemInfo_430372cffccf1f7472976dd445422a1b:Print(string.format(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["Scaning finished, total %d items, %d records."], ItemInfo_57e71a77fe496d3ae18297712315a02a, ItemInfo_88eb02eca37ab375893902719f31254a)); end II_Statusbar:Hide(); II_Statusbar.text:Hide(); II_Statusbar.icon:Hide(); II_Statusbar.page:Hide(); AuctionFrameBrowse:RegisterEvent("AUCTION_ITEM_LIST_UPDATE"); end end local function ItemInfo_4ff31b8a539fa2cf7990edc09e693395(ItemInfo_411b8aa6d5954c6020f0b9c9e80e847a, ItemInfo_acaec9f163947cc37d561bc125c83a9f, ItemInfo_22757db962500df3e5f8bfed4be92671, ItemInfo_45739690061ee7945c14d8a8937f5395) if (not ItemInfo_411b8aa6d5954c6020f0b9c9e80e847a or not ItemInfo_acaec9f163947cc37d561bc125c83a9f or not ItemInfo_22757db962500df3e5f8bfed4be92671) then return; end local ItemInfo_dc0ed675b3e32a9dd9d4058182798c95 = ItemInfo_411b8aa6d5954c6020f0b9c9e80e847a or GameTooltip; local ItemInfo_8983c60d66c8593ec7165ea9dbedb584 = format(ItemInfo_dc0ed675b3e32a9dd9d4058182798c95:GetName() .. "IIMoneyFrame%d", tonumber(ItemInfo_45739690061ee7945c14d8a8937f5395)); local ItemInfo_34694ab57c8a9444e5e6faf24cae8213 = getglobal(ItemInfo_8983c60d66c8593ec7165ea9dbedb584); if (not ItemInfo_34694ab57c8a9444e5e6faf24cae8213) then ItemInfo_34694ab57c8a9444e5e6faf24cae8213 = CreateFrame("Frame", ItemInfo_8983c60d66c8593ec7165ea9dbedb584, ItemInfo_dc0ed675b3e32a9dd9d4058182798c95, "ItemInfoMoneyFrameTemplate"); ItemInfo_34694ab57c8a9444e5e6faf24cae8213:SetScript("OnLoad", function(self) ItemInfo_34694ab57c8a9444e5e6faf24cae8213.small = 1; MoneyFrame_SetType(self, "AUCTION"); end); ItemInfo_34694ab57c8a9444e5e6faf24cae8213.small = 1; MoneyFrame_SetType(ItemInfo_34694ab57c8a9444e5e6faf24cae8213, "AUCTION"); end if (ItemInfo_22757db962500df3e5f8bfed4be92671 and ItemInfo_22757db962500df3e5f8bfed4be92671 > 0) then MoneyFrame_Update(ItemInfo_8983c60d66c8593ec7165ea9dbedb584, ItemInfo_22757db962500df3e5f8bfed4be92671); local leftText = getglobal(format(ItemInfo_dc0ed675b3e32a9dd9d4058182798c95:GetName() .. "TextLeft%d", ItemInfo_acaec9f163947cc37d561bc125c83a9f)); ItemInfo_34694ab57c8a9444e5e6faf24cae8213:ClearAllPoints(); ItemInfo_34694ab57c8a9444e5e6faf24cae8213:SetPoint("RIGHT", ItemInfo_dc0ed675b3e32a9dd9d4058182798c95, "RIGHT", 0, 0); ItemInfo_34694ab57c8a9444e5e6faf24cae8213:SetPoint("TOP", leftText, "TOP", 0, 0); local tipWidth = ItemInfo_dc0ed675b3e32a9dd9d4058182798c95:GetWidth(); local leftwidth = leftText:GetWidth(); lastWidth = math.max(tipWidth, ItemInfo_34694ab57c8a9444e5e6faf24cae8213:GetWidth() + leftwidth + 4); ItemInfo_dc0ed675b3e32a9dd9d4058182798c95:SetMinimumWidth(lastWidth); ItemInfo_34694ab57c8a9444e5e6faf24cae8213:Show(); else ItemInfo_34694ab57c8a9444e5e6faf24cae8213:Hide(); end end local function ItemInfo_65407381b6a3a856c701a9dc4af83c36(self) for ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f = 1, 6 do local ItemInfo_8983c60d66c8593ec7165ea9dbedb584 = format(self:GetName() .. "IIMoneyFrame%d", ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f); if (getglobal(ItemInfo_8983c60d66c8593ec7165ea9dbedb584) and getglobal(ItemInfo_8983c60d66c8593ec7165ea9dbedb584):IsShown()) then getglobal(ItemInfo_8983c60d66c8593ec7165ea9dbedb584):Hide(); end end end function ItemInfo_0b8055e395e03920805ea166179f136c(self, ...) if (ItemInfo_74d9d3d28567760954003f615182ce18) then self:Disable(); end end local function ItemInfo_e82cbfba30c104197e9c9c6d43949874(self, ...) if (not ItemInfo_7a0f86110e37241bb46f51b3e0530b56) then return; end local ItemInfo_ca0de5e9ed087ac8d67ca8d417281946=self:GetOwner() ItemInfo_65407381b6a3a856c701a9dc4af83c36(self); local ItemInfo_f3855ba422be79d226acf0ca95a2b15c=0 if ItemInfo_ca0de5e9ed087ac8d67ca8d417281946 and ItemInfo_ca0de5e9ed087ac8d67ca8d417281946.count then ItemInfo_f3855ba422be79d226acf0ca95a2b15c=ItemInfo_ca0de5e9ed087ac8d67ca8d417281946.count end local ItemInfo_1f194f793e9150819d886c66d5bc23b5, ItemInfo_e498578b78aa0db9c45f30f87d63debc = self:GetItem(); if (not ItemInfo_1f194f793e9150819d886c66d5bc23b5 or type(ItemInfo_1f194f793e9150819d886c66d5bc23b5) ~= "string") then return; end local ItemInfo_a722f7ebe3a21e277257a47471105b36 = 0; local _, _, ItemInfo_0d0e9323a9500f0bec70aa7c547df8b3, ItemInfo_5b2b9385dc5869461473771f275680cd, _, itemType, itemSubType, ItemInfo_0397db9e44d4d2fb454377be99924ddb, _, _itemTexture,_itemPrice = GetItemInfo(ItemInfo_e498578b78aa0db9c45f30f87d63debc); local ItemInfo_de3cbe286618f666df102dd52371d2ef = ItemInfo_d38674d7124558fa892d69c68668bd01(ItemInfo_e498578b78aa0db9c45f30f87d63debc); local _, ItemInfo_6e4d0db7491d6883f86de390d20dbe5b, price, useinfo, acinfo if (not ItemInfo_2c611746bef83a9b6dd9d98cc8b6e959[ItemInfo_de3cbe286618f666df102dd52371d2ef]) then _, ItemInfo_6e4d0db7491d6883f86de390d20dbe5b, price, useinfo, acinfo = getItemInfo(ItemInfo_de3cbe286618f666df102dd52371d2ef); if price == 0 then price=_itemPrice or 0 end ItemInfo_2c611746bef83a9b6dd9d98cc8b6e959[ItemInfo_de3cbe286618f666df102dd52371d2ef] = {_, ItemInfo_6e4d0db7491d6883f86de390d20dbe5b, price , useinfo, acinfo}; else _, ItemInfo_6e4d0db7491d6883f86de390d20dbe5b, price, useinfo, acinfo = ItemInfo_2c611746bef83a9b6dd9d98cc8b6e959[ItemInfo_de3cbe286618f666df102dd52371d2ef][1], ItemInfo_2c611746bef83a9b6dd9d98cc8b6e959[ItemInfo_de3cbe286618f666df102dd52371d2ef][2], ItemInfo_2c611746bef83a9b6dd9d98cc8b6e959[ItemInfo_de3cbe286618f666df102dd52371d2ef][3], ItemInfo_2c611746bef83a9b6dd9d98cc8b6e959[ItemInfo_de3cbe286618f666df102dd52371d2ef][4], ItemInfo_2c611746bef83a9b6dd9d98cc8b6e959[ItemInfo_de3cbe286618f666df102dd52371d2ef][5]; end price = price or 0; if (II_Config.GemInfo) then local gemname, gemLink, gemTexture; for i =1, 3 do gemname, gemLink = GetItemGem(ItemInfo_e498578b78aa0db9c45f30f87d63debc, i); if (gemname and gemLink) then self:AddLine(gemLink); self:AddTexture(select(10, GetItemInfo(gemLink)) or "Interface\\Icons\\INV_Misc_QuestionMark"); end end end if (ItemInfo_5b2b9385dc5869461473771f275680cd and ItemInfo_5b2b9385dc5869461473771f275680cd > 0 and II_Config.ItemLevel) then self:AddLine(format(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffFFE4B5Item level: %d|r"], ItemInfo_5b2b9385dc5869461473771f275680cd)); end if (II_Config.ItemQulity and ItemInfo_0d0e9323a9500f0bec70aa7c547df8b3) then local quality = getglobal(format("ITEM_QUALITY%d_DESC", ItemInfo_0d0e9323a9500f0bec70aa7c547df8b3)); if (quality) then self:AppendText(" (" .. quality .. ")"); end end if (not MerchantFrame:IsVisible() and II_Config.SellValue) then if (ItemInfo_6e4d0db7491d6883f86de390d20dbe5b and type(price)=='number' and price > 0) then self:AddLine(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEEach for sell: |r"]); ItemInfo_a722f7ebe3a21e277257a47471105b36 =self:NumLines(); ItemInfo_4ff31b8a539fa2cf7990edc09e693395(self, ItemInfo_a722f7ebe3a21e277257a47471105b36, price, 1); else self:AddDoubleLine(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEEach for sell: |r"], "|cffFFFAFAN/A|r"); end end if (not MerchantFrame:IsVisible() and II_Config.TotalValue) then if(ItemInfo_f3855ba422be79d226acf0ca95a2b15c and type(ItemInfo_f3855ba422be79d226acf0ca95a2b15c)=='number' and ItemInfo_f3855ba422be79d226acf0ca95a2b15c>1)and (ItemInfo_6e4d0db7491d6883f86de390d20dbe5b and type(price)=='number' and price > 0) then self:AddLine(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EETotal for sell: |r"]); ItemInfo_a722f7ebe3a21e277257a47471105b36 =self:NumLines(); ItemInfo_4ff31b8a539fa2cf7990edc09e693395(self, ItemInfo_a722f7ebe3a21e277257a47471105b36, price*ItemInfo_f3855ba422be79d226acf0ca95a2b15c, 2); end end if (II_Config.AuctionInfo) then if (ItemInfo_6e4d0db7491d6883f86de390d20dbe5b and acinfo and acinfo ~= {}) then if (acinfo[1] and acinfo[1] > 0 and acinfo[2] and acinfo[2] > 0) then local ItemInfo_45240f1627e791c3b39d033574b82163 = floor(acinfo[1]/acinfo[2] + 0.5); self:AddLine(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEStart bid: |r"]); ItemInfo_a722f7ebe3a21e277257a47471105b36 = self:NumLines(); ItemInfo_4ff31b8a539fa2cf7990edc09e693395(self, ItemInfo_a722f7ebe3a21e277257a47471105b36, ItemInfo_45240f1627e791c3b39d033574b82163, 3); if (ItemInfo_0397db9e44d4d2fb454377be99924ddb and ItemInfo_0397db9e44d4d2fb454377be99924ddb > 1) then self:AddLine(format(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEStart group bid(%d): |r"], ItemInfo_0397db9e44d4d2fb454377be99924ddb)); ItemInfo_a722f7ebe3a21e277257a47471105b36 = self:NumLines(); ItemInfo_4ff31b8a539fa2cf7990edc09e693395(self, ItemInfo_a722f7ebe3a21e277257a47471105b36, ItemInfo_45240f1627e791c3b39d033574b82163*ItemInfo_0397db9e44d4d2fb454377be99924ddb, 4); end end if (acinfo[3] and acinfo[3] > 0 and acinfo[4] and acinfo[4] > 0) then self:AddLine(format(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEGroup bid(%d%%): |r"], floor(acinfo[4]/acinfo[2]+0.5)*100)); ItemInfo_a722f7ebe3a21e277257a47471105b36 = self:NumLines(); ItemInfo_4ff31b8a539fa2cf7990edc09e693395(self, ItemInfo_a722f7ebe3a21e277257a47471105b36, floor(acinfo[3]/acinfo[4]+0.5), 5); end if (acinfo[5] and acinfo[5] > 0 and acinfo[6] and acinfo[6] > 0) then self:AddLine(format(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff7B68EEBid out(%d%%): |r"], floor(acinfo[6]/acinfo[2]+0.5)*100)); ItemInfo_a722f7ebe3a21e277257a47471105b36 = self:NumLines(); ItemInfo_4ff31b8a539fa2cf7990edc09e693395(self, ItemInfo_a722f7ebe3a21e277257a47471105b36, floor(acinfo[5]/acinfo[6]+0.5), 6); end else self:AddLine(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cff667A3FThere is no bid information for this item|r"]); end end if (ItemInfo_0397db9e44d4d2fb454377be99924ddb and ItemInfo_0397db9e44d4d2fb454377be99924ddb > 1 and II_Config.StackCount) then self:AddDoubleLine(format(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffFFFAFAStack: %d|r"], ItemInfo_0397db9e44d4d2fb454377be99924ddb)); end if (ItemInfo_6e4d0db7491d6883f86de390d20dbe5b and useinfo and useinfo~={} and II_Config.UseInfo) then local uinfo1, uinfo2, text; for i, v in ipairs(useinfo) do uinfo1, uinfo2 = getUseInfo(v); if (not uinfo1) then break; end if (uinfo2) then text = text and format("%s,%s", text, uinfo2) or uinfo2; else text = text and format("%s,%s", text, uinfo1) or uinfo1; end end if (uinfo1) then if (uinfo2) then text = format(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffFFD700Use(%s):|r |cffFF00FF%s|r"], ItemInfo_f44255432ca9b1383906d6cab8c75eb5(text), uinfo1); else text = format(ItemInfo_27564b0f8fc08d6bd0345695785ce4b6["|cffFFD700Use:|r |cffFFD700%s|r"], text); end self:AddLine(text); end end self:Show(); end function ItemInfo_f44255432ca9b1383906d6cab8c75eb5(ItemInfo_e6955c64cf39bdb23dc86de1a9ec2117) local ItemInfo_b962f54280c77029bc350c2b321adc64 = UnitClass("player"); return string.gsub(ItemInfo_e6955c64cf39bdb23dc86de1a9ec2117, ItemInfo_b962f54280c77029bc350c2b321adc64, "|cff00ff00%1|r"); end function ItemInfo_bec6b2696ec890fdca8ddd42fbd09040.MERCHANT_SHOW() ItemInfo_2c611746bef83a9b6dd9d98cc8b6e959 = {}; for ItemInfo_a4e435952d7906b01358c3f8f9ff67e8=0, NUM_BAG_FRAMES do for ItemInfo_f5cb07751fccdf339be4192634943a73=1, GetContainerNumSlots(ItemInfo_a4e435952d7906b01358c3f8f9ff67e8) do local ItemInfo_e498578b78aa0db9c45f30f87d63debc = GetContainerItemLink(ItemInfo_a4e435952d7906b01358c3f8f9ff67e8, ItemInfo_f5cb07751fccdf339be4192634943a73); local _, ItemInfo_1aaed838fd7f1c9000a816ebc635d598 = GetContainerItemInfo(ItemInfo_a4e435952d7906b01358c3f8f9ff67e8, ItemInfo_f5cb07751fccdf339be4192634943a73); if (ItemInfo_e498578b78aa0db9c45f30f87d63debc and type(ItemInfo_e498578b78aa0db9c45f30f87d63debc) == "string" and ItemInfo_e498578b78aa0db9c45f30f87d63debc ~= "") then local ItemInfo_de3cbe286618f666df102dd52371d2ef = ItemInfo_d38674d7124558fa892d69c68668bd01(ItemInfo_e498578b78aa0db9c45f30f87d63debc); ItemInfo_2107d35fd249bcc51b30c2de1274fd49 = 0; ItemInfo_84dfffc1f538ee5e8fb625d8273066c7:SetBagItem(ItemInfo_a4e435952d7906b01358c3f8f9ff67e8, ItemInfo_f5cb07751fccdf339be4192634943a73); if (ItemInfo_2107d35fd249bcc51b30c2de1274fd49 > 0) then ItemInfoItemUserData[ItemInfo_de3cbe286618f666df102dd52371d2ef] = ItemInfoItemUserData[ItemInfo_de3cbe286618f666df102dd52371d2ef] or "::"; ItemInfoItemUserData[ItemInfo_de3cbe286618f666df102dd52371d2ef] = string.gsub(ItemInfoItemUserData[ItemInfo_de3cbe286618f666df102dd52371d2ef], "%d*(.+)", format("%d%s", ItemInfo_2107d35fd249bcc51b30c2de1274fd49/ItemInfo_1aaed838fd7f1c9000a816ebc635d598, "%1")); end end end end for ItemInfo_63a9ce6f1eeac72ef41293b7d0303335, ItemInfo_8d0644c92128c1ff68223fd74ba63b56 in pairs(II_Temp_NonValue) do local ItemInfo_de3cbe286618f666df102dd52371d2ef = ItemInfo_d38674d7124558fa892d69c68668bd01(ItemInfo_8d0644c92128c1ff68223fd74ba63b56); ItemInfo_2107d35fd249bcc51b30c2de1274fd49 = 0; ItemInfo_84dfffc1f538ee5e8fb625d8273066c7:SetHyperlink(ItemInfo_8d0644c92128c1ff68223fd74ba63b56); if (ItemInfo_2107d35fd249bcc51b30c2de1274fd49 > 0) then ItemInfoItemUserData[ItemInfo_de3cbe286618f666df102dd52371d2ef] = ItemInfoItemUserData[ItemInfo_de3cbe286618f666df102dd52371d2ef] or "::"; ItemInfoItemUserData[ItemInfo_de3cbe286618f666df102dd52371d2ef] = string.gsub(ItemInfoItemUserData[ItemInfo_de3cbe286618f666df102dd52371d2ef], "%d*(.+)", format("%d%s", ItemInfo_2107d35fd249bcc51b30c2de1274fd49, "%1")); end end ItemInfo_84dfffc1f538ee5e8fb625d8273066c7:Hide(); II_Temp_NonValue = {}; end function ItemInfo_6cab35024b87790a8a354e65a303109a(frame, scriptName, func) if( frame:GetScript(scriptName) ) then frame:HookScript(scriptName, func); else frame:SetScript(scriptName, func); end end function ItemInfo_ContainerItemPreClick(self, button) if(button=="RightButton" and not IsModifierKeyDown()) then if(AuctionFrame and AuctionFrame:IsVisible()) then AuctionFrameTab_OnClick(AuctionFrameTab3); if(AuctionsItemButton and AuctionsItemButton:IsVisible()) then PickupContainerItem(self:GetParent():GetID(), self:GetID()); ClickAuctionSellItemButton(); AuctionsFrameAuctions_ValidateAuction(); end end end end function ItemInfo_HookAuctionUI() ItemInfo_01df612d60ced2cfa8ff3c8d1a39e47d:HookScript(AuctionsItemButton, "OnEvent", ItemInfo_a445b92afd50dd0eb5fc856b59495961); ItemInfo_01df612d60ced2cfa8ff3c8d1a39e47d:Hook(BrowseSearchButton, "Enable", ItemInfo_0b8055e395e03920805ea166179f136c); ItemInfo_01df612d60ced2cfa8ff3c8d1a39e47d:Hook("AuctionFrameBrowse_Update", ItemInfo_0c52d557e2660c2afbb6a0ff84149692); ItemInfo_01df612d60ced2cfa8ff3c8d1a39e47d:Hook("AuctionFrame_Hide", function(...) ItemInfo_74d9d3d28567760954003f615182ce18 = nil end); ItemInfo_01df612d60ced2cfa8ff3c8d1a39e47d:HookScript(AuctionsItemButton, "OnEnter", ItemInfo_164444afb6062d2f53d10d470ceb066c); ItemInfo_01df612d60ced2cfa8ff3c8d1a39e47d:HookScript(AuctionsCreateAuctionButton, "PreClick", ItemInfo_816bad5b26d812a70e00dd16c033428d); hooksecurefunc("ChatEdit_InsertLink", function(text) if not text then return end if (ItemInfo_7a0f86110e37241bb46f51b3e0530b56) then if ( BrowseName and BrowseName:IsVisible() ) then local item; if ( strfind(text, "item:", 1, true) ) then item = GetItemInfo(text); end if ( item ) then BrowseName:SetText(item); QueryAuctionItems(BrowseName:GetText()); return true; end end end end); for i = 1, NUM_CONTAINER_FRAMES do for j = 1, MAX_CONTAINER_ITEMS do local f = getglobal("ContainerFrame"..i.."Item"..j); if(f) then ItemInfo_6cab35024b87790a8a354e65a303109a(f, "PreClick", ItemInfo_ContainerItemPreClick); end end end end function ItemInfo_OnAutionEnable(switch) if (IsAddOnLoaded("Blizzard_AuctionUI")) then if (switch) then getglobal("SaveSearchName_DropDown"):Show(); getglobal("ShowOnUnitPriceCheckButton"):Show(); getglobal("ItemInfoScanButton"):Show(); else getglobal("SaveSearchName_DropDown"):Hide(); getglobal("ShowOnUnitPriceCheckButton"):Hide(); getglobal("ItemInfoScanButton"):Hide(); for ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f = 1, NUM_BROWSE_TO_DISPLAY, 1 do local ItemInfo_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 = getglobal("BrowseButton" .. ItemInfo_e914904fab9d05d3f54d52bfc31a0f3f); local ItemInfo_9248008bbb6d0ee7ce13f6ee45680051 = getglobal(ItemInfo_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetName() .. "Texture"); ItemInfo_9248008bbb6d0ee7ce13f6ee45680051:Hide(); end end end end function ItemInfo_bec6b2696ec890fdca8ddd42fbd09040:ADDON_LOADED(addon) if (addon == "Blizzard_AuctionUI") then ItemInfo_648afc4e523bce211ef4a10aead7bc38(); ItemInfo_HookAuctionUI(); ItemInfo_OnAutionEnable(ItemInfo_f924ef2a8da54a3e2af4e2f83c870fe6); end end local hasHooked = false; function ItemInfo_AuctionToggle(switch) if (switch) then ItemInfo_f924ef2a8da54a3e2af4e2f83c870fe6 = true; ItemInfo_bec6b2696ec890fdca8ddd42fbd09040:RegisterEvent("AUCTION_ITEM_LIST_UPDATE"); ItemInfo_OnAutionEnable(true); ItemInfo_01df612d60ced2cfa8ff3c8d1a39e47d:Enable(); else ItemInfo_f924ef2a8da54a3e2af4e2f83c870fe6 = false; ItemInfo_bec6b2696ec890fdca8ddd42fbd09040:UnregisterEvent("AUCTION_ITEM_LIST_UPDATE"); ItemInfo_OnAutionEnable(false); ItemInfo_01df612d60ced2cfa8ff3c8d1a39e47d:Disable(); end end function ItemInfo_ClearAcutionInfomation() StaticPopup_Show("CLEAR_AUCTION_INFOMATION"); end local function Hook_Tooltip_Cleared(object) if (object:GetScript("OnTooltipCleared")) then object:HookScript("OnTooltipCleared", function() ItemInfo_65407381b6a3a856c701a9dc4af83c36(object) end); else object:SetScript("OnTooltipCleared", function() ItemInfo_65407381b6a3a856c701a9dc4af83c36(object) end); end end function ItemInfo_Toggle(switch) if (switch) then if (ItemInfo_7a0f86110e37241bb46f51b3e0530b56) then return end if (not hasHooked) then BigFoot_HookItemTip(GameTooltip, ItemInfo_e82cbfba30c104197e9c9c6d43949874); BigFoot_HookItemTip(ItemRefTooltip, ItemInfo_e82cbfba30c104197e9c9c6d43949874); BigFoot_HookItemTip(ShoppingTooltip1, ItemInfo_e82cbfba30c104197e9c9c6d43949874); BigFoot_HookItemTip(ShoppingTooltip2, ItemInfo_e82cbfba30c104197e9c9c6d43949874); Hook_Tooltip_Cleared(GameTooltip); Hook_Tooltip_Cleared(ItemRefTooltip); Hook_Tooltip_Cleared(ShoppingTooltip1); Hook_Tooltip_Cleared(ShoppingTooltip2); hasHooked = true; end ItemInfo_bec6b2696ec890fdca8ddd42fbd09040:RegisterEvent("MERCHANT_SHOW"); ItemInfo_7a0f86110e37241bb46f51b3e0530b56 = true; else if (not ItemInfo_7a0f86110e37241bb46f51b3e0530b56) then return end ItemInfo_bec6b2696ec890fdca8ddd42fbd09040:UnregisterEvent("MERCHANT_SHOW"); ItemInfo_7a0f86110e37241bb46f51b3e0530b56 = nil; end end local function fixTypeBug() if not ItemInfoItemUserData then return end for k, v in pairs(ItemInfoItemUserData) do if (type(v) ~= "string") then v = "::"; end end end ItemInfo_bec6b2696ec890fdca8ddd42fbd09040:Init{ name = "ItemInfo", func = function () ItemInfoItemUserData = ItemInfoItemUserData or {} ItemInfo_84dfffc1f538ee5e8fb625d8273066c7 = CreateFrame("GameTooltip", "ItemInfoScanItemTooltip", UIParent, "GameTooltipTemplate"); ItemInfo_84dfffc1f538ee5e8fb625d8273066c7:SetOwner(UIParent, "ANCHOR_BOTTOMRIGHT"); ItemInfo_84dfffc1f538ee5e8fb625d8273066c7:SetScript("OnTooltipAddMoney", function(self, cost) ItemInfo_2107d35fd249bcc51b30c2de1274fd49 = cost; end); fixTypeBug(); end };
