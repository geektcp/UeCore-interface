 local PackupInventory_8ac3cb0f745a234a88d825ba3154f785 = BLibrary("BEvent"); local PackupInventory_13a2d8782580eb47563f2730a45bcecc = BLibrary("BHook"); PackupInventory_8ac3cb0f745a234a88d825ba3154f785:RegisterEvent("PLAYER_LOGIN"); PackupInventory_8ac3cb0f745a234a88d825ba3154f785:RegisterEvent("ADDON_LOADED"); PackupInventory_fb152b275766a8d4f5204bfff40ca0e1 ={ ["reversal"] = true, }; if (GetLocale() == "zhCN") then PackupInventory_0147a9026a65e358a4aaf31e03a4bed6 = "整理"; PackupInventory_b5bf6d418ccc3bfef01cff6f6fba7b79 ="银行整理"; PackupInventory_f7c744b6ef550c6eb0541b4995186242 = "将背包或银行里的物品按顺序整理好\n勿将背包整理与银行整理同时使用"; PackupInventory_fad32cb18e3f2b69fe92c4d3c7c60f34 = "钥匙:钥匙"; PackupInventory_6ae934387f146ed410cf13c0ee896c06 = "容器"; PackupInventory_698d38167be138e82e3d9467cf94cc11 = "护甲"; PackupInventory_de31ba86509f86ef08ff1b6fa817e90a = "其它:宠物"; PackupInventory_698b9f2c3defbc44bbe8bebd57979d8c = "其它:材料"; PackupInventory_8ae1d94066e494657aad7a8c102d1fc8 = "消耗品"; elseif (GetLocale() == "zhTW") then PackupInventory_0147a9026a65e358a4aaf31e03a4bed6 = "整理"; PackupInventory_b5bf6d418ccc3bfef01cff6f6fba7b79 ="銀行整理"; PackupInventory_f7c744b6ef550c6eb0541b4995186242 = "將背包或銀行裏的物品按順序整理好\n勿將背包整理與銀行整理同時使用!"; PackupInventory_fad32cb18e3f2b69fe92c4d3c7c60f34 = "鑰匙:鑰匙"; PackupInventory_6ae934387f146ed410cf13c0ee896c06 = "容器"; PackupInventory_698d38167be138e82e3d9467cf94cc11 = "護甲"; PackupInventory_de31ba86509f86ef08ff1b6fa817e90a = "其它:寵物"; PackupInventory_698b9f2c3defbc44bbe8bebd57979d8c = "其它:材料"; PackupInventory_8ae1d94066e494657aad7a8c102d1fc8 = "消耗品"; else PackupInventory_0147a9026a65e358a4aaf31e03a4bed6 = "Sort"; PackupInventory_b5bf6d418ccc3bfef01cff6f6fba7b79 = "Sort"; PackupInventory_7b70d6959765084d98a2739ef6f97939 = "Pack up items in your bags or bank automatically."; PackupInventory_fad32cb18e3f2b69fe92c4d3c7c60f34 = "Key:Key"; PackupInventory_6ae934387f146ed410cf13c0ee896c06 = "Bag"; PackupInventory_698d38167be138e82e3d9467cf94cc11 = "Armor"; PackupInventory_de31ba86509f86ef08ff1b6fa817e90a = "Miscellaneous:Pet"; PackupInventory_698b9f2c3defbc44bbe8bebd57979d8c = "Miscellaneous:Reagent"; PackupInventory_8ae1d94066e494657aad7a8c102d1fc8 = "Consumable"; end local PackupInventory_2ee11321c0989caf8fb2dbf360a61d47 = false; local PackupInventory_91454b4c58feb69ce8a194146f3d6967 = 0; local PackupInventory_5d443d8871444ba11a7e0fef7a27becd; local PackupInventory_4762d5be712ac4c15f7de6d7990f561d = {0,1,2,3,4}; local PackupInventory_21857e401c81a3bf8ccf55e96d8416cf = {-1,5,6,7,8,9,10,11}; local PackupInventory_8da01a0a96cda2410b49c622f3e69356 = PackupInventory_4762d5be712ac4c15f7de6d7990f561d; local PackupInventory_ab8c16e46c38ced3defa7d6a74622c61 = nil; local PackupInventory_0340ebf741254e1e245be7880991df27 = {}; local PackupInventory_1cd0c7f03e834fdb667c2a6ce7631161 = {}; local PackupInventory_e2a3b93175a8987b993b899d1961c540 = {}; local PackupInventory_6483b68f9eb696f0983d60caa6fc6c5b = false; local PackupInventory_49e58d62173e7d975259b951e626b889 = false; local PackupInventory_b744cf0cc914352dfc568ae23b7e983f = false; local PackupInventory_b2d35e6511869a6b5b50bce8f0a73101 = false; local PackupInventory_f96db0f6395bfda88e1fca2d47d3018f = false; local PackupInventory_ecf756777c02ba827176a83711637c23 = false; local progressBars = {}; local DrinkAndFood; local PackupInventory_68618d8463d3a6373f13ae08eae0a7a9 = { ["HEARTHSTON"] = 1, ["LIMOUSINE"] = 2, [PackupInventory_de31ba86509f86ef08ff1b6fa817e90a] = 3, ["SPECIALTOOL"] = 4, [PackupInventory_fad32cb18e3f2b69fe92c4d3c7c60f34] = 5; }; local PackupInventory_feb6937024a04eb2774b1290ff8a35c7 = {}; PackupInventory_feb6937024a04eb2774b1290ff8a35c7["HEARTHSTON"] = "6948"; PackupInventory_feb6937024a04eb2774b1290ff8a35c7["LIMOUSINE"] = {}; PackupInventory_feb6937024a04eb2774b1290ff8a35c7["SPECIALTOOL"]= { ["5956"] = true, ["7005"] = true, ["19727"] = true, ["9149"] = true, ["2901"] = true, ["19970"] = true, ["19022"] = true, ["12225"] = true, ["6367"] = true, ["6365"] = true, ["6256"] = true, ["6219"] = true, ["6217"] = true, ["6338"] = true, ["11128"] = true, ["11144"] = true, ["16206"] = true, ["5060"] = true, ["6218"] = true, ["6339"] = true, ["11130"] = true, ["11145"] = true, ["16207"] = true, ["22461"] = true, ["22462"] = true, ["22463"] = true, ["10498"] = true, ["4471"] = true, ["40772"] = true, }; PackupInventory_feb6937024a04eb2774b1290ff8a35c7["POISON"] = { ["5237"] = true, ["6951"] = true, ["9186"] = true, ["6947"] = true, ["6949"] = true, ["6950"] = true, ["8926"] = true, ["8927"] = true, ["8928"] = true, ["3775"] = true, ["3776"] = true, ["2892"] = true, ["2893"] = true, ["8984"] = true, ["8985"] = true, ["20844"] = true, ["10918"] = true, ["10920"] = true, ["10921"] = true, ["10922"] = true, ["22054"] = true, ["21927"] = true, ["22055"] = true, ["5140"] = true, ["2928"] = true, ["8924"] = true, ["2930"] = true, ["8923"] = true, ["5173"] = true, ["5530"] = true, ["2931"] = true, }; local function debug(msg) if (not PackupInventory_2ee11321c0989caf8fb2dbf360a61d47) then return end local msg = msg and tostring(msg) or ""; msg = "|cffcccc00<PUI> |r" .. msg; ChatFrame1:AddMessage(msg, 0.8, 0.8, 0.8); end do local index = 5; local function addItem(name, force) if (not PackupInventory_68618d8463d3a6373f13ae08eae0a7a9[name] or force) then index = index + 1; PackupInventory_68618d8463d3a6373f13ae08eae0a7a9[name] = index; end end function PackupInventory_0bcbf5c717c64e34825710192e8a4f98(...) if (PackupInventory_ab8c16e46c38ced3defa7d6a74622c61) then return end for i=1, select("#", ...) do local prefix = select(i, ...); local msg, to; if (prefix == PackupInventory_698d38167be138e82e3d9467cf94cc11) then for k=1, select("#", GetAuctionInvTypes(2, 1)), 2 do msg = format("%s:%s", prefix, select(k, GetAuctionInvTypes(2, 1))); debug(msg) if (k == 4) then addItem(format("%s:%s", prefix, "INVTYPE_ROBE")); end addItem(msg); end for j=6, select("#", GetAuctionItemSubClasses(2)) do msg = format("%s:%s", prefix, select(j, GetAuctionItemSubClasses(2))); debug(msg) addItem(msg); end addItem(PackupInventory_698b9f2c3defbc44bbe8bebd57979d8c); addItem("POISON"); else to = select("#", GetAuctionItemSubClasses(i)); if (prefix == PackupInventory_8ae1d94066e494657aad7a8c102d1fc8) then DrinkAndFood = format("%s:%s", prefix, GetAuctionItemSubClasses(i)); end if (to > 0) then for j=1, to do msg = format("%s:%s", prefix, select(j, GetAuctionItemSubClasses(i))); debug(msg) addItem(msg); end else msg = format("%s:%s", prefix, prefix); debug(msg) addItem(msg); end addItem(format("%s:%s", prefix, prefix)); end end addItem(DrinkAndFood, 1); addItem("RUBBISH"); addItem("NONE"); PackupInventory_ab8c16e46c38ced3defa7d6a74622c61 = true; end end function PackupInventory_18f977996beac717bc60a004ae00c517(PackupInventory_15ad1e501e228eb80be1cc7800ab967d) if (PackupInventory_15ad1e501e228eb80be1cc7800ab967d) then local PackupInventory_de3cbe286618f666df102dd52371d2ef = strmatch(PackupInventory_15ad1e501e228eb80be1cc7800ab967d, "^|c%x+|Hitem:(%d+):.+|h%[.-%]|h|r"); return PackupInventory_de3cbe286618f666df102dd52371d2ef or ""; else return ""; end end function PackupInventory_9cb4a0679c452fc8f5df40f9cc8bf2b3(PackupInventory_a4e435952d7906b01358c3f8f9ff67e8,PackupInventory_f5cb07751fccdf339be4192634943a73) local Type; local PackupInventory_3b5524917223ead45e475decf7a2fdbe, PackupInventory_632d2e75d8e985aa41d30f20d1d4c0fe = GetContainerItemInfo(PackupInventory_a4e435952d7906b01358c3f8f9ff67e8,PackupInventory_f5cb07751fccdf339be4192634943a73); local PackupInventory_de3cbe286618f666df102dd52371d2ef = PackupInventory_18f977996beac717bc60a004ae00c517(GetContainerItemLink(PackupInventory_a4e435952d7906b01358c3f8f9ff67e8,PackupInventory_f5cb07751fccdf339be4192634943a73)); local PackupInventory_f1447e688195f0e731e0cc761f52cceb, PackupInventory_15ad1e501e228eb80be1cc7800ab967d, PackupInventory_8647b3fb4d9d77a3efee6bad11606d59, PackupInventory_5b2b9385dc5869461473771f275680cd, PackupInventory_c5034b8a201cb568bb02c8afd81bcff4, PackupInventory_93d846d0f1d4a30fd23de1c033b0a0ab, PackupInventory_101530567acd38edafbca0b9a62d647b, PackupInventory_e14d7ecee1f10907ed507e9543f81a0b, PackupInventory_6f575451b718aa8c8d9e261248b4479c, PackupInventory_3b5524917223ead45e475decf7a2fdbe = GetItemInfo(PackupInventory_de3cbe286618f666df102dd52371d2ef); if (PackupInventory_6f575451b718aa8c8d9e261248b4479c and PackupInventory_93d846d0f1d4a30fd23de1c033b0a0ab == PackupInventory_698d38167be138e82e3d9467cf94cc11) then Type = format("%s:%s", PackupInventory_93d846d0f1d4a30fd23de1c033b0a0ab, PackupInventory_6f575451b718aa8c8d9e261248b4479c); else Type = format("%s:%s", PackupInventory_93d846d0f1d4a30fd23de1c033b0a0ab or "", PackupInventory_101530567acd38edafbca0b9a62d647b or ""); end if (not PackupInventory_f1447e688195f0e731e0cc761f52cceb) then Type = "NONE"; elseif ( PackupInventory_8647b3fb4d9d77a3efee6bad11606d59 == 0) then debug(PackupInventory_f1447e688195f0e731e0cc761f52cceb) Type = "RUBBISH"; elseif (PackupInventory_de3cbe286618f666df102dd52371d2ef and PackupInventory_de3cbe286618f666df102dd52371d2ef == PackupInventory_feb6937024a04eb2774b1290ff8a35c7["HEARTHSTON"]) then Type = "HEARTHSTON"; else for k, v in pairs(PackupInventory_feb6937024a04eb2774b1290ff8a35c7) do if (type(v) == "table" and v[PackupInventory_de3cbe286618f666df102dd52371d2ef]) then Type = k; end end end if (PackupInventory_f1447e688195f0e731e0cc761f52cceb) then debug(format("%s-=>%s", PackupInventory_f1447e688195f0e731e0cc761f52cceb, Type)) end PackupInventory_632d2e75d8e985aa41d30f20d1d4c0fe = PackupInventory_632d2e75d8e985aa41d30f20d1d4c0fe or 0; local PackupInventory_7b62580c0eb0e44c7494cd705416577f = PackupInventory_e14d7ecee1f10907ed507e9543f81a0b and (PackupInventory_e14d7ecee1f10907ed507e9543f81a0b - PackupInventory_632d2e75d8e985aa41d30f20d1d4c0fe) or 0; return PackupInventory_de3cbe286618f666df102dd52371d2ef, Type, PackupInventory_8647b3fb4d9d77a3efee6bad11606d59 or -1, PackupInventory_632d2e75d8e985aa41d30f20d1d4c0fe, PackupInventory_e14d7ecee1f10907ed507e9543f81a0b or 0, PackupInventory_7b62580c0eb0e44c7494cd705416577f, PackupInventory_3b5524917223ead45e475decf7a2fdbe or ""; end function PackupInventory_2e904964dc7200742b9ca9ef6482123a(arg1) PackupInventory_1cd0c7f03e834fdb667c2a6ce7631161 = {}; PackupInventory_0340ebf741254e1e245be7880991df27 = {}; PackupInventory_e2a3b93175a8987b993b899d1961c540 = {}; local PackupInventory_433f2a63fbedbfd9db3f025631d6d999 = 0; local PackupInventory_de3cbe286618f666df102dd52371d2ef, PackupInventory_c30d703cca761fcf322d56c191bd168c, PackupInventory_8647b3fb4d9d77a3efee6bad11606d59, PackupInventory_632d2e75d8e985aa41d30f20d1d4c0fe, PackupInventory_e14d7ecee1f10907ed507e9543f81a0b, PackupInventory_a5fc3f0326f73576be1e59f256611ca2, PackupInventory_9151a28d8783df15f40220b2afb8ef0b; for PackupInventory_63a9ce6f1eeac72ef41293b7d0303335, PackupInventory_a4e435952d7906b01358c3f8f9ff67e8 in ipairs(PackupInventory_8da01a0a96cda2410b49c622f3e69356) do if (GetBagName(PackupInventory_a4e435952d7906b01358c3f8f9ff67e8) or PackupInventory_a4e435952d7906b01358c3f8f9ff67e8 == -1) then if (PackupInventory_a4e435952d7906b01358c3f8f9ff67e8 == 0 or PackupInventory_a4e435952d7906b01358c3f8f9ff67e8 == -1) then debug(GetBagName(PackupInventory_a4e435952d7906b01358c3f8f9ff67e8)); PackupInventory_9151a28d8783df15f40220b2afb8ef0b = PackupInventory_6ae934387f146ed410cf13c0ee896c06; else PackupInventory_9151a28d8783df15f40220b2afb8ef0b = select(7, GetItemInfo(GetBagName(PackupInventory_a4e435952d7906b01358c3f8f9ff67e8))); end PackupInventory_1cd0c7f03e834fdb667c2a6ce7631161[PackupInventory_9151a28d8783df15f40220b2afb8ef0b] = PackupInventory_1cd0c7f03e834fdb667c2a6ce7631161[PackupInventory_9151a28d8783df15f40220b2afb8ef0b] or {}; PackupInventory_0340ebf741254e1e245be7880991df27[PackupInventory_9151a28d8783df15f40220b2afb8ef0b] = PackupInventory_0340ebf741254e1e245be7880991df27[PackupInventory_9151a28d8783df15f40220b2afb8ef0b] or {}; for PackupInventory_f5cb07751fccdf339be4192634943a73 = 1, GetContainerNumSlots(PackupInventory_a4e435952d7906b01358c3f8f9ff67e8) do PackupInventory_de3cbe286618f666df102dd52371d2ef, PackupInventory_c30d703cca761fcf322d56c191bd168c, PackupInventory_8647b3fb4d9d77a3efee6bad11606d59, PackupInventory_632d2e75d8e985aa41d30f20d1d4c0fe, PackupInventory_e14d7ecee1f10907ed507e9543f81a0b, PackupInventory_a5fc3f0326f73576be1e59f256611ca2, PackupInventory_3b5524917223ead45e475decf7a2fdbe = PackupInventory_9cb4a0679c452fc8f5df40f9cc8bf2b3(PackupInventory_a4e435952d7906b01358c3f8f9ff67e8,PackupInventory_f5cb07751fccdf339be4192634943a73); PackupInventory_433f2a63fbedbfd9db3f025631d6d999 = PackupInventory_433f2a63fbedbfd9db3f025631d6d999 + 1; if (arg1) then PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_433f2a63fbedbfd9db3f025631d6d999] = {["Bag"] = PackupInventory_a4e435952d7906b01358c3f8f9ff67e8, ["Slot"] = PackupInventory_f5cb07751fccdf339be4192634943a73, ["ID"] = PackupInventory_de3cbe286618f666df102dd52371d2ef, ["Count"] = PackupInventory_632d2e75d8e985aa41d30f20d1d4c0fe,["Stack"] = PackupInventory_e14d7ecee1f10907ed507e9543f81a0b,["Need"] = PackupInventory_a5fc3f0326f73576be1e59f256611ca2, }; else tinsert(PackupInventory_0340ebf741254e1e245be7880991df27[PackupInventory_9151a28d8783df15f40220b2afb8ef0b], {["Bag"] = PackupInventory_a4e435952d7906b01358c3f8f9ff67e8, ["Slot"] = PackupInventory_f5cb07751fccdf339be4192634943a73, ["ID"] = PackupInventory_de3cbe286618f666df102dd52371d2ef, ["Count"] = PackupInventory_632d2e75d8e985aa41d30f20d1d4c0fe,}); tinsert(PackupInventory_1cd0c7f03e834fdb667c2a6ce7631161[PackupInventory_9151a28d8783df15f40220b2afb8ef0b], {["ID"] = PackupInventory_de3cbe286618f666df102dd52371d2ef, ["Type"] = PackupInventory_c30d703cca761fcf322d56c191bd168c, ["Quality"] = PackupInventory_8647b3fb4d9d77a3efee6bad11606d59, ["Texture"] = PackupInventory_3b5524917223ead45e475decf7a2fdbe, ["Count"] = PackupInventory_632d2e75d8e985aa41d30f20d1d4c0fe,}); end end end end end local function PackupInventory_16c1d5f25c87079c969c28c4b558cf20(ob, os, nb, ns) PickupContainerItem(ob, os); PickupContainerItem(nb, ns); end local function isLocked(bag, slot) return select(3, GetContainerItemInfo(bag, slot)); end local function getstirng(t) if t.sortedString then return t.sortedString end local textureType, textureIndex = strmatch(t.Texture,"\\.*\\([^_]+_?[^_]*_?[^_]*)_?(%d*)$"); t.sortedString= format("%3d %3d %10s %5s %3s %3d", PackupInventory_68618d8463d3a6373f13ae08eae0a7a9[t.Type] or (#(PackupInventory_68618d8463d3a6373f13ae08eae0a7a9) - 1), t.Quality or -1, textureType or "", t.ID, textureIndex or "", t.Count); return t.sortedString end local function sortf(a, b) if (PackupInventory_fb152b275766a8d4f5204bfff40ca0e1.reversal) then return getstirng(a) > getstirng(b); else return getstirng(a) < getstirng(b); end end function PackupInventory_9ebfb9291156811f33d776781dbe30ae() for k, v in pairs(PackupInventory_1cd0c7f03e834fdb667c2a6ce7631161) do if (type(v) == "table") then table.sort(v, sortf); end end end local function delaycal() PackupInventory_2e904964dc7200742b9ca9ef6482123a(); PackupInventory_9ebfb9291156811f33d776781dbe30ae(); PackupInventory_b2d35e6511869a6b5b50bce8f0a73101 = true; end function PackupInventory_3349677a692aefac5ee0cf03602bc0f8() local PackupInventory_73d71ee0565ae1de4750b51973f25661; PackupInventory_2e904964dc7200742b9ca9ef6482123a(1); PackupInventory_6483b68f9eb696f0983d60caa6fc6c5b = false; PackupInventory_91454b4c58feb69ce8a194146f3d6967 = 10; for PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f=#(PackupInventory_e2a3b93175a8987b993b899d1961c540), 2, -1 do for PackupInventory_5e57ab95c762a48d9a126b104db1056f=1, PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f-1, 1 do if (PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].ID ~= "" and PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].ID == PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].ID and PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Count ~= 0 and PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].Need ~= 0) then PackupInventory_73d71ee0565ae1de4750b51973f25661 = nil; PackupInventory_6483b68f9eb696f0983d60caa6fc6c5b = true; if (not (isLocked(PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].Bag, PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].Slot) and isLocked(PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Bag, PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Slot))) then if (PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Count < PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].Need) then PickupContainerItem(PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f]. Bag,PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Slot); PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].Need = PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].Need - PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Count; PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Count = 0; PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].ID = ""; PackupInventory_73d71ee0565ae1de4750b51973f25661 = 1; elseif (PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Count == PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].Need) then PickupContainerItem(PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Bag, PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Slot); PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].Need = 0; PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Count = 0; PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].ID = ""; PackupInventory_73d71ee0565ae1de4750b51973f25661 = 1; elseif (PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Count > PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].Need) then SplitContainerItem(PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Bag,PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Slot,PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].Need); PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Count = PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Count - PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].Need; PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Need = PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Stack-PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_5e57ab95c762a48d9a126b104db1056f].Count; PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].Need = 0; PackupInventory_73d71ee0565ae1de4750b51973f25661 = 1; end if (PackupInventory_73d71ee0565ae1de4750b51973f25661) then PickupContainerItem(PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f]. Bag,PackupInventory_e2a3b93175a8987b993b899d1961c540[PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f].Slot); end else BigFoot_DelayCall(PackupInventory_3349677a692aefac5ee0cf03602bc0f8, 0.7); return; end end end end if (PackupInventory_6483b68f9eb696f0983d60caa6fc6c5b or CursorHasItem()) then ClearCursor(); BigFoot_DelayCall(PackupInventory_3349677a692aefac5ee0cf03602bc0f8, 0.7); PackupInventory_b744cf0cc914352dfc568ae23b7e983f = true; else PackupInventory_b744cf0cc914352dfc568ae23b7e983f = false; BigFoot_DelayCall(delaycal, 0.7); end end local function FindSlot(t, id, count) for k, v in ipairs(PackupInventory_0340ebf741254e1e245be7880991df27[t]) do if (not isLocked(v.Bag, v.Slot) and (id == v.ID and v.Count == count) and (PackupInventory_1cd0c7f03e834fdb667c2a6ce7631161[t][k].ID ~= id or PackupInventory_1cd0c7f03e834fdb667c2a6ce7631161[t][k].Count ~= count)) then return v.Bag, v.Slot, k; end end return nil, nil, nil; end function PackupInventory_06d7b5c53387cd22bbc74fe3c70aba58() PackupInventory_49e58d62173e7d975259b951e626b889 = false; PackupInventory_f96db0f6395bfda88e1fca2d47d3018f = true; local bag, slot, index, from, to, step; for k, v in pairs(PackupInventory_1cd0c7f03e834fdb667c2a6ce7631161) do if (PackupInventory_fb152b275766a8d4f5204bfff40ca0e1["reversal"]) then from, to, step = #(v), 1, -1; else from, to, step = 1, #(v), 1; end for i=from, to, step do if (v[i].ID ~= "" and (PackupInventory_0340ebf741254e1e245be7880991df27[k][i].ID ~= v[i].ID or (PackupInventory_0340ebf741254e1e245be7880991df27[k][i].ID == v[i].ID and PackupInventory_0340ebf741254e1e245be7880991df27[k][i].Count ~= v[i].Count))) then PackupInventory_49e58d62173e7d975259b951e626b889 = true; PackupInventory_91454b4c58feb69ce8a194146f3d6967 = PackupInventory_91454b4c58feb69ce8a194146f3d6967 + 1; if (not isLocked(PackupInventory_0340ebf741254e1e245be7880991df27[k][i].Bag, PackupInventory_0340ebf741254e1e245be7880991df27[k][i].Slot)) then bag, slot, index = FindSlot(k, v[i].ID, v[i].Count); if (bag and slot and index) then PackupInventory_16c1d5f25c87079c969c28c4b558cf20(bag, slot, PackupInventory_0340ebf741254e1e245be7880991df27[k][i].Bag, PackupInventory_0340ebf741254e1e245be7880991df27[k][i].Slot); PackupInventory_0340ebf741254e1e245be7880991df27[k][i].ID, PackupInventory_0340ebf741254e1e245be7880991df27[k][index].ID = PackupInventory_0340ebf741254e1e245be7880991df27[k][index].ID,PackupInventory_0340ebf741254e1e245be7880991df27[k][i].ID; PackupInventory_0340ebf741254e1e245be7880991df27[k][i].Count, PackupInventory_0340ebf741254e1e245be7880991df27[k][index].Count = PackupInventory_0340ebf741254e1e245be7880991df27[k][index].Count,PackupInventory_0340ebf741254e1e245be7880991df27[k][i].Count; end end end end end PackupInventory_f96db0f6395bfda88e1fca2d47d3018f = false; if (not PackupInventory_49e58d62173e7d975259b951e626b889) then PackupInventory_b2d35e6511869a6b5b50bce8f0a73101 = false; end end local function GetPackButton(name, parent, type, title) local name = format("%s%s", name, "Pack"); local button = getglobal(name); if (not button) then if (not parent) then return false; end button = CreateFrame("Button", name, parent, "UIPanelButtonTemplate"); button:SetText(title); button:SetHeight(22); button:SetWidth(90); button:SetToplevel(true); button:SetScript("OnEnter", function(self) GameTooltip:SetOwner(self, "ANCHOR_TOPRIGHT"); GameTooltip:SetText(title); GameTooltip:AddLine(PackupInventory_f7c744b6ef550c6eb0541b4995186242); GameTooltip:Show(); end); button:SetScript("OnLeave", function() GameTooltip:Hide(); end); button:SetScript("OnClick", function() PackupInventory_afea0aa1ac466e8dbf4782cd08e2cff2(type); end) end return button; end local function GetPackProgress(name, parent) progressBars[name] = progressBars[name] or BLibrary("BFProgressBar", parent, 0.0, 1.0, 0.0); return progressBars[name]; end local function BuildButton(parent, width, height, point1, point2, point3,PackupInventory_6d5e7d83d8358745ae4dcf61d16bd1f3) local f = CreateFrame('Button', parent:GetName().."Sort", parent, 'UIPanelButtonTemplate') f:SetWidth(width) f:SetHeight(height) f:SetPoint(point1, point2, point3) f:SetText(PackupInventory_0147a9026a65e358a4aaf31e03a4bed6) f:SetScript('OnMouseUP', function() PackupInventory_afea0aa1ac466e8dbf4782cd08e2cff2(PackupInventory_6d5e7d83d8358745ae4dcf61d16bd1f3); end) f:SetScript('OnEnter', function(self) GameTooltip:SetOwner(self, "ANCHOR_TOPRIGHT"); GameTooltip:SetText(PackupInventory_0147a9026a65e358a4aaf31e03a4bed6); GameTooltip:AddLine(PackupInventory_f7c744b6ef550c6eb0541b4995186242); GameTooltip:Show(); end) f:SetScript('OnLeave', function() GameTooltip:Hide(); end) return f end local function createButtons() if not CombuctorFrame1Search then return end CombuctorFrame1Search:SetPoint('TOPRIGHT',-166,-44) CombuctorFrame2Search:SetPoint('TOPRIGHT',-166,-44) BuildButton(CombuctorFrame1, 45, 25, 'TOPRIGHT', -50, -40,false) BuildButton(CombuctorFrame2, 45, 20, 'TOPRIGHT', -50, -40,true) end --[[function PackupInventory_8ac3cb0f745a234a88d825ba3154f785.PLAYER_LOGIN(PackupInventory_1652701c940a7445a6e43b954d36ec9b) PackupInventory_8ac3cb0f745a234a88d825ba3154f785:UnregisterEvent('PLAYER_LOGIN') end function PackupInventory_8ac3cb0f745a234a88d825ba3154f785.ADDON_LOADED(PackupInventory_1652701c940a7445a6e43b954d36ec9b) if PackupInventory_1652701c940a7445a6e43b954d36ec9b=="PackUpInventory" then if IsAddOnLoaded('Combuctor') then createButtons() end PackupInventory_8ac3cb0f745a234a88d825ba3154f785:UnregisterEvent('ADDON_LOADED') end end]] function PackupInventory_7684d522b0fee73af69edb88c5257b91(self) local progress, button; if (self:GetName() == "ContainerFrame1" and self:GetID() == 0) then button = GetPackButton(self:GetName(), self, nil, PackupInventory_0147a9026a65e358a4aaf31e03a4bed6) if (PackupInventory_5d443d8871444ba11a7e0fef7a27becd) then button:ClearAllPoints(); button:SetPoint("TOPRIGHT", self:GetName(), "TOPRIGHT", -15, -27); button:Show(); else button:Hide(); end end end function PackupInventory_8569474f3b0f823f50ad2c9539b600fe(self) local progress, button; if (self:GetName() == "ContainerFrame1" and self:GetID() == 0) then button = GetPackButton(self:GetName(), self, nil, PackupInventory_0147a9026a65e358a4aaf31e03a4bed6) button:Hide(); end end hooksecurefunc("ContainerFrame_OnShow", PackupInventory_7684d522b0fee73af69edb88c5257b91); hooksecurefunc("ContainerFrame_OnHide", PackupInventory_8569474f3b0f823f50ad2c9539b600fe); local function PackupInventory_4df698a8121ee88d72f62cccfc06e665(self) local progress, button; button = GetPackButton(self:GetName(), self, 1, PackupInventory_b5bf6d418ccc3bfef01cff6f6fba7b79); if (PackupInventory_5d443d8871444ba11a7e0fef7a27becd) then button:ClearAllPoints(); button:SetPoint("TOPRIGHT", self:GetName(), "TOPRIGHT", -20, -26); button:Show(); else button:Hide(); end end function PackupInventory_a99cbbd92052b6244f5b8ee1e8a9d987() BankCloseButton:SetScript("OnShow", PackupInventory_4df698a8121ee88d72f62cccfc06e665); end function PackupInventory_fc5ad6ebfb54f962125ddc2f3083eca2() BankCloseButton:SetScript("OnShow", function() end); end function PackupInventory_afea0aa1ac466e8dbf4782cd08e2cff2(type) if (not PackupInventory_5d443d8871444ba11a7e0fef7a27becd or PackupInventory_b744cf0cc914352dfc568ae23b7e983f or PackupInventory_b2d35e6511869a6b5b50bce8f0a73101 or UnitIsDeadOrGhost("player")) then return; end local PackupInventory_69072c73fde2ed407f863929fd1e7483; PackupInventory_317eec16e41a4e0947237b87292aa6ce:Show(); if (type) then PackupInventory_8da01a0a96cda2410b49c622f3e69356 = PackupInventory_21857e401c81a3bf8ccf55e96d8416cf; else PackupInventory_8da01a0a96cda2410b49c622f3e69356 = PackupInventory_4762d5be712ac4c15f7de6d7990f561d; end PackupInventory_b744cf0cc914352dfc568ae23b7e983f = true; PackupInventory_3349677a692aefac5ee0cf03602bc0f8(); end function PackupInventory_bd3d0b94442ec73c09e0cf0cfc55a7b4() if (PackupInventory_b2d35e6511869a6b5b50bce8f0a73101 and not PackupInventory_f96db0f6395bfda88e1fca2d47d3018f) then PackupInventory_06d7b5c53387cd22bbc74fe3c70aba58(); end PackupInventory_ba342bf71343b42ca797c5f4e96788ef =PackupInventory_12adec513e43d18b9c485dddcb6c5fcc if PackupInventory_b744cf0cc914352dfc568ae23b7e983f or PackupInventory_b2d35e6511869a6b5b50bce8f0a73101 then PackupInventory_12adec513e43d18b9c485dddcb6c5fcc = true else PackupInventory_12adec513e43d18b9c485dddcb6c5fcc = false end if PackupInventory_ba342bf71343b42ca797c5f4e96788ef ~= PackupInventory_12adec513e43d18b9c485dddcb6c5fcc then if PackupInventory_12adec513e43d18b9c485dddcb6c5fcc then for PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f =1, 13,1 do _G["ContainerFrame"..PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f]:UnregisterEvent("BAG_UPDATE") end else for PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f =1, 13,1 do _G["ContainerFrame"..PackupInventory_e914904fab9d05d3f54d52bfc31a0f3f]:RegisterEvent("BAG_UPDATE") end end end local PackupInventory_69072c73fde2ed407f863929fd1e7483, PackupInventory_bf61cd56adaeb71abb1cdca2566cb62f; if (not (PackupInventory_b2d35e6511869a6b5b50bce8f0a73101 or PackupInventory_b744cf0cc914352dfc568ae23b7e983f) and PackupInventory_69072c73fde2ed407f863929fd1e7483 and PackupInventory_5d443d8871444ba11a7e0fef7a27becd) then PackupInventory_bf61cd56adaeb71abb1cdca2566cb62f = PackupInventory_69072c73fde2ed407f863929fd1e7483:GetAlpha(); if (PackupInventory_bf61cd56adaeb71abb1cdca2566cb62f <= 0) then return; else PackupInventory_bf61cd56adaeb71abb1cdca2566cb62f = PackupInventory_bf61cd56adaeb71abb1cdca2566cb62f - 0.04; PackupInventory_69072c73fde2ed407f863929fd1e7483:SetAlpha(PackupInventory_bf61cd56adaeb71abb1cdca2566cb62f); if (PackupInventory_bf61cd56adaeb71abb1cdca2566cb62f <= 0) then PackupInventory_69072c73fde2ed407f863929fd1e7483:Hide(); collectgarbage("collect"); end end return; end if (PackupInventory_69072c73fde2ed407f863929fd1e7483 and PackupInventory_69072c73fde2ed407f863929fd1e7483:IsShown()) then PackupInventory_69072c73fde2ed407f863929fd1e7483:SetPos(PackupInventory_91454b4c58feb69ce8a194146f3d6967); end end local frame = CreateFrame("Frame", "PackupInventory_317eec16e41a4e0947237b87292aa6ce", UIParent); frame:SetScript("OnUpdate", PackupInventory_bd3d0b94442ec73c09e0cf0cfc55a7b4); function PUI_Toggle(PackupInventory_43975aa4b29e368c1d658b08e332e857) if IsAddOnLoaded("Combuctor") then if not CombuctorFrame1Sort then createButtons() end if (PackupInventory_43975aa4b29e368c1d658b08e332e857) then PackupInventory_5d443d8871444ba11a7e0fef7a27becd = 1; PackupInventory_0bcbf5c717c64e34825710192e8a4f98(GetAuctionItemClasses()); CombuctorFrame1Sort:Show() CombuctorFrame2Sort:Show() else PackupInventory_5d443d8871444ba11a7e0fef7a27becd = nil; PackupInventory_8ac3cb0f745a234a88d825ba3154f785:UnregisterAllEvent(); CombuctorFrame1Sort:Hide() CombuctorFrame2Sort:Hide() end else if (PackupInventory_43975aa4b29e368c1d658b08e332e857) then PackupInventory_5d443d8871444ba11a7e0fef7a27becd = 1; PackupInventory_0bcbf5c717c64e34825710192e8a4f98(GetAuctionItemClasses()); PackupInventory_a99cbbd92052b6244f5b8ee1e8a9d987(); else PackupInventory_5d443d8871444ba11a7e0fef7a27becd = nil; PackupInventory_8ac3cb0f745a234a88d825ba3154f785:UnregisterAllEvent(); PackupInventory_fc5ad6ebfb54f962125ddc2f3083eca2(); PackupInventory_13a2d8782580eb47563f2730a45bcecc:Unhook("MyInventoryFrame_OnShow"); end end end function PUI_SetOrder(PackupInventory_08754d490a4e4c79d6c4971ab35cb5fa) if (PackupInventory_08754d490a4e4c79d6c4971ab35cb5fa == "desc") then PackupInventory_fb152b275766a8d4f5204bfff40ca0e1["reversal"] = true; else PackupInventory_fb152b275766a8d4f5204bfff40ca0e1["reversal"] = nil; end end
