 local SpellTimer_b525c4a0b57aa95cc2a717a778a67567 = {}; local SpellTimer_ab9429fbd7c39497e05cf721dc4e88d9 = 0; local SpellTimer_7738f91d1b70890f8eff4260c7ff696e = 0; local SpellTimer_598b9ca2c8b72d0180cc7d033d281276 = 0.3; SPELL_TIMER_LOADED = nil; SpellTimer_Config = { Enabled = nil, EnabledTest = nil, ShowProgressBar = 1, ShowName = 1, WarningTime = 5, HideAllWhenLeaveCombat = 1; Scale = 0.8; isLocked = nil; }; local SpellTimer_6a4bb07351a7794261347f512a1c6321,SpellTimer_1982505ec42f9793a1e76e1b8032e1e2,SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c,_TotemFrameToggle; local natureTrapTimer; function SpellTimer_TrapSearchFunc(SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117, SpellTimer_a8858383576d7634cceceaf04a2ddb29) local SpellTimer_7055060047c4e75028a795318cd9176e = {}; SpellTimer_7055060047c4e75028a795318cd9176e[1] = SpellTimer_e33ea68190a7f8d34c7c63ed543e7221(SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117, SpellTimer_a8858383576d7634cceceaf04a2ddb29[1]); SpellTimer_7055060047c4e75028a795318cd9176e[2] = SpellTimer_e33ea68190a7f8d34c7c63ed543e7221(SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117, SpellTimer_a8858383576d7634cceceaf04a2ddb29[2]); if (SpellTimer_7055060047c4e75028a795318cd9176e[1] and SpellTimer_7055060047c4e75028a795318cd9176e[2]) then return SpellTimer_7055060047c4e75028a795318cd9176e; end end function SpellTimer_TrapActiveFunc() return 2; end local ST_Eventer = BLibrary("BEvent"); ST_Eventer:Init{ name = "SpellTimer", func = function () SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c = UnitClass("player"); SpellTimer_1982505ec42f9793a1e76e1b8032e1e2 = UnitGUID("player"); SPELL_TIMER_LOADED = true; end }; local SpellTimer_041cb32040a0ba9fccd2527486f1ef65,SpellTimer_07a248a8d6d46d6a6563ad77a7426629 function SpellTimer_935847f5abe87940ebd5b00f11813b4c() if (SpellTimer_6a4bb07351a7794261347f512a1c6321 and UnitExists("target")) then SpellTimer_041cb32040a0ba9fccd2527486f1ef65 = UnitName("target"); SpellTimer_07a248a8d6d46d6a6563ad77a7426629 = UnitGUID("target"); end end function SpellTimer_3efb965a65bae2d5f02b605c63fc0607(SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c) if (SpellTimer_6a4bb07351a7794261347f512a1c6321 and SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c) then SpellTimer_041cb32040a0ba9fccd2527486f1ef65 = UnitName(SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c); SpellTimer_07a248a8d6d46d6a6563ad77a7426629 = UnitGUID(SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c); end end function SpellTimer_1fab9cbd5d0d1f0b74ae278965b34955(SpellTimer_07b125142a704be2dcdaf4d5409539b2) if (SpellTimer_07b125142a704be2dcdaf4d5409539b2 and not SpellTimer_6a4bb07351a7794261347f512a1c6321) then SpellTimerMainFrame:Show(); SpellTimer_6a4bb07351a7794261347f512a1c6321 = 1; SpellTimer_Config.EnabledTest = 1; if SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c == BF_CLASS_HUNTER then ST_Eventer:RegisterEvent("COMBAT_LOG_EVENT_UNFILTERED", "SPELL_AURA_APPLIED"); ST_Eventer:RegisterEvent("COMBAT_LOG_EVENT_UNFILTERED", "SWING_DAMAGE"); end ST_Eventer:RegisterEvent("COMBAT_LOG_EVENT_UNFILTERED", "SPELL_AURA_REMOVED"); ST_Eventer:RegisterEvent("COMBAT_LOG_EVENT_UNFILTERED", "UNIT_DIED"); ST_Eventer:RegisterEvent("COMBAT_LOG_EVENT_UNFILTERED", "PARTY_KILL"); ST_Eventer:RegisterEvent("COMBAT_LOG_EVENT_UNFILTERED", "UNIT_DESTROYED"); ST_Eventer:RegisterEvent("PLAYER_REGEN_ENABLED"); ST_Eventer:RegisterEvent("UNIT_SPELLCAST_SUCCEEDED"); ST_Eventer:RegisterEvent("UNIT_SPELLCAST_INTERRUPTED"); ST_Eventer:RegisterEvent("PLAYER_TARGET_CHANGED"); ST_Eventer:RegisterEvent("UPDATE_MOUSEOVER_UNIT"); ST_Eventer:RegisterEvent("UNIT_AURA"); if _TotemFrameToggle then ST_Eventer:RegisterEvent("PLAYER_TOTEM_UPDATE"); end hooksecurefunc("CastSpell", SpellTimer_935847f5abe87940ebd5b00f11813b4c); hooksecurefunc("CastSpellByName", SpellTimer_935847f5abe87940ebd5b00f11813b4c); hooksecurefunc("UseAction", SpellTimer_935847f5abe87940ebd5b00f11813b4c); hooksecurefunc("SpellTargetUnit", SpellTimer_3efb965a65bae2d5f02b605c63fc0607); elseif (not SpellTimer_07b125142a704be2dcdaf4d5409539b2 and SpellTimer_6a4bb07351a7794261347f512a1c6321) then for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, SpellTimer_7738f91d1b70890f8eff4260c7ff696e do local SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("SpellTimerSpellFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a) then SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:Hide(); end end for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, SpellTimer_ab9429fbd7c39497e05cf721dc4e88d9 do local SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("SpellTimerUnitFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a) then SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:Hide(); end end SpellTimerMainFrame:Hide(); SpellTimer_6a4bb07351a7794261347f512a1c6321 = nil; SpellTimer_Config.EnabledTest = nil; ST_Eventer:UnregisterAllEvent(); end end function TotemFrameToggle() if TotemTimers_switch == 1 and SpellTimer_Config.EnabledTest then _TotemFrameToggle =true; SpellTimer_1fab9cbd5d0d1f0b74ae278965b34955(1); ST_Eventer:RegisterEvent("PLAYER_TOTEM_UPDATE"); end end function ST_Eventer:PLAYER_TARGET_CHANGED(...) local SpellTimer_18143855ca473518291feae87d7a01c1 = UnitGUID("target"); local SpellTimer_51c7d67f6d39c862ee597acad8871f60 = UnitGUID("player"); for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, SpellTimer_ab9429fbd7c39497e05cf721dc4e88d9 do local SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f = getglobal("SpellTimerUnitFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); if (SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f and SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f:IsVisible()) then if (SpellTimer_51c7d67f6d39c862ee597acad8871f60 and SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.target_guid == SpellTimer_51c7d67f6d39c862ee597acad8871f60) then SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f:SetBackdropColor(0.0, 0.0, 1.0, SpellTimer_598b9ca2c8b72d0180cc7d033d281276); elseif (SpellTimer_18143855ca473518291feae87d7a01c1 and SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.target_guid == SpellTimer_18143855ca473518291feae87d7a01c1) then SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f:SetBackdropColor(1.0, 1.0, 0.0, SpellTimer_598b9ca2c8b72d0180cc7d033d281276); else SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f:SetBackdropColor(0.0, 0.0, 0.0, SpellTimer_598b9ca2c8b72d0180cc7d033d281276); end end end self:UNIT_AURA("target") end function ST_Eventer:UPDATE_MOUSEOVER_UNIT(...) if (SpellIsTargeting()) then SpellTimer_041cb32040a0ba9fccd2527486f1ef65 = UnitName("mouseover"); SpellTimer_07a248a8d6d46d6a6563ad77a7426629 = UnitGUID("mouseover"); end end function ST_Eventer:UNIT_AURA(SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c) if (SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c and not UnitIsDead(SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c)) then local SpellTimer_bd7a3740cafa571a7545ad1eb0635ecd = UnitGUID(SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c); local SpellTimer_1dcf4c8e795f99396f13dd178efb12ba = UnitName(SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c); if (UnitIsFriend("player", SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c)) then for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, BUFF_MAX_DISPLAY do local SpellTimer_8983c60d66c8593ec7165ea9dbedb584, _, SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, SpellTimer_3f50417fb16be9b1078eb68d24fa9c26, _, SpellTimer_876ae3817655938dba8b508a2da65e97, SpellTimer_deadf5b4ff14a89508941e3b53b70068, SpellTimer_ec7881e4a38f03655f30e61ea7b5915f,_,_,_spellId = UnitAura(SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c, SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f, "HELPFUL|PLAYER"); if ((SpellTimer_ec7881e4a38f03655f30e61ea7b5915f=="player" or SpellTimer_ec7881e4a38f03655f30e61ea7b5915f=="pet") and SpellTimer_deadf5b4ff14a89508941e3b53b70068) then local SpellTimer_5e57c2750895232501d674704d8ef219 = SpellTimer_deadf5b4ff14a89508941e3b53b70068 - GetTime(); if (SpellTimer_5e57c2750895232501d674704d8ef219 and SpellTimer_5e57c2750895232501d674704d8ef219 > 0) then if (SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584] and SpellTimer_a4eea13ec784b4a22e3e6c63fece18c0(SpellTimer_8983c60d66c8593ec7165ea9dbedb584) and SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][1] == "buff") then if (SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3] and SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3]["needMana"]) then local _,_,_,mana = GetSpellInfo(_spellId); if mana ~= 0 then SpellTimer_3e83a2f08d713237071bf63303042603(SpellTimer_bd7a3740cafa571a7545ad1eb0635ecd, SpellTimer_1dcf4c8e795f99396f13dd178efb12ba, SpellTimer_8983c60d66c8593ec7165ea9dbedb584, SpellTimer_5e57c2750895232501d674704d8ef219, SpellTimer_5e57c2750895232501d674704d8ef219, 0, SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, SpellTimer_3f50417fb16be9b1078eb68d24fa9c26, SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f, "buff", SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584] and SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3]); end else if(SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c == BF_CLASS_ROGUE and (SpellTimer_8983c60d66c8593ec7165ea9dbedb584 == "嫁祸诀窍" or SpellTimer_8983c60d66c8593ec7165ea9dbedb584 == "偷天換日") and SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c~="player") then else SpellTimer_3e83a2f08d713237071bf63303042603(SpellTimer_bd7a3740cafa571a7545ad1eb0635ecd, SpellTimer_1dcf4c8e795f99396f13dd178efb12ba, SpellTimer_8983c60d66c8593ec7165ea9dbedb584, SpellTimer_5e57c2750895232501d674704d8ef219, SpellTimer_5e57c2750895232501d674704d8ef219, 0, SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, SpellTimer_3f50417fb16be9b1078eb68d24fa9c26, SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f, "buff", SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584] and SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3]); end end if (SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584] and SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3] and SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3]["spell"]) then SpellTimer_3e83a2f08d713237071bf63303042603(SpellTimer_bd7a3740cafa571a7545ad1eb0635ecd, SpellTimer_1dcf4c8e795f99396f13dd178efb12ba, SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3]["spell"][1], SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3]["spell"][2], SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3]["spell"][2], 0, SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, SpellTimer_3f50417fb16be9b1078eb68d24fa9c26, SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f, "trigger", SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584] and SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3]); end end end end end else for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, MAX_TARGET_DEBUFFS do local SpellTimer_8983c60d66c8593ec7165ea9dbedb584, _, SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, SpellTimer_3f50417fb16be9b1078eb68d24fa9c26, _, SpellTimer_876ae3817655938dba8b508a2da65e97, expirationTime, SpellTimer_ec7881e4a38f03655f30e61ea7b5915f = UnitAura(SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c, SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f, "HARMFUL|PLAYER"); if ((SpellTimer_ec7881e4a38f03655f30e61ea7b5915f=="player" or SpellTimer_ec7881e4a38f03655f30e61ea7b5915f=="pet") and expirationTime) then local SpellTimer_5e57c2750895232501d674704d8ef219 = expirationTime - GetTime(); if (SpellTimer_5e57c2750895232501d674704d8ef219 and SpellTimer_5e57c2750895232501d674704d8ef219 > 0) then if ( (SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584] and SpellTimer_a4eea13ec784b4a22e3e6c63fece18c0(SpellTimer_8983c60d66c8593ec7165ea9dbedb584) and SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][1] == "debuff") or (SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c == BF_CLASS_ROGUE and SpellTimer_a4eea13ec784b4a22e3e6c63fece18c0(SPELL_TIMER_POISON) and string.find(SpellTimer_8983c60d66c8593ec7165ea9dbedb584, SPELL_TIMER_POISON)) ) then SpellTimer_3e83a2f08d713237071bf63303042603(SpellTimer_bd7a3740cafa571a7545ad1eb0635ecd, SpellTimer_1dcf4c8e795f99396f13dd178efb12ba, SpellTimer_8983c60d66c8593ec7165ea9dbedb584, SpellTimer_5e57c2750895232501d674704d8ef219, SpellTimer_5e57c2750895232501d674704d8ef219, 0, SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, SpellTimer_3f50417fb16be9b1078eb68d24fa9c26, SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f, "debuff", SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584] and SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3]); end end end end end end end function ST_Eventer:PLAYER_TOTEM_UPDATE(SpellTimer_f5cb07751fccdf339be4192634943a73) local SpellTimer_08932bc7e7c6a3945293137b22fe3fae, SpellTimer_8983c60d66c8593ec7165ea9dbedb584, SpellTimer_84b858c262498d7b2211041076e7a8fe, SpellTimer_5e57c2750895232501d674704d8ef219, SpellTimer_51bbc6646cac6748cc62569220600b52 = GetTotemInfo(SpellTimer_f5cb07751fccdf339be4192634943a73); if (SpellTimer_08932bc7e7c6a3945293137b22fe3fae and SpellTimer_5e57c2750895232501d674704d8ef219 > 0 and SpellTimer_84b858c262498d7b2211041076e7a8fe > 0) then local SpellTimer_876ae3817655938dba8b508a2da65e97 = GetTime() - SpellTimer_84b858c262498d7b2211041076e7a8fe + SpellTimer_5e57c2750895232501d674704d8ef219; SpellTimer_3e83a2f08d713237071bf63303042603(SpellTimer_1982505ec42f9793a1e76e1b8032e1e2, UnitName("player"), SpellTimer_8983c60d66c8593ec7165ea9dbedb584, SpellTimer_876ae3817655938dba8b508a2da65e97, SpellTimer_5e57c2750895232501d674704d8ef219, 0, SpellTimer_51bbc6646cac6748cc62569220600b52, 0, nil, nil, {["live"] = 1}, nil, SpellTimer_f5cb07751fccdf339be4192634943a73); else SpellTimer_d4f8602a3c67bbaf0c0e0d2cdf0936c8(nil, nil, SpellTimer_f5cb07751fccdf339be4192634943a73); end end function ST_Eventer:PARTY_KILL(timestamp, event, srcGUID, srcName, srcFlags, dstGUID, dstName, dstFlags, ...) if (dstGUID) then SpellTimer_d4f8602a3c67bbaf0c0e0d2cdf0936c8(dstGUID, nil); end end function ST_Eventer:UNIT_DIED(timestamp, event, srcGUID, srcName, srcFlags, dstGUID, dstName, dstFlags, ...) if (dstGUID) then SpellTimer_d4f8602a3c67bbaf0c0e0d2cdf0936c8(dstGUID, nil); end end function ST_Eventer:UNIT_DESTROYED(timestamp, event, srcGUID, srcName, srcFlags, dstGUID, dstName, dstFlags, ...) if (dstGUID) then SpellTimer_d4f8602a3c67bbaf0c0e0d2cdf0936c8(dstGUID, nil); end end function ST_Eventer:SWING_DAMAGE(timestamp, event, srcGUID, srcName, srcFlags, dstGUID, dstName, dstFlags, ...) if (srcName == SPELL_TIMER_VENOMOUS and natureTrapTimer) then local SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = SpellTimer_7842a4ab741f0e167956142da78eae6a("毒蛇陷阱"); if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a) then SpellTimer_6bfc0ec6c2226ffeac123d7f01a20036(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a); SpellTimer_3e83a2f08d713237071bf63303042603(SpellTimer_1982505ec42f9793a1e76e1b8032e1e2,UnitName("player"),"毒蛇陷阱效果",15,15,0,SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_9248008bbb6d0ee7ce13f6ee45680051,0,0,"trigger",{["live"] = 1}); end end end function ST_Eventer:SPELL_AURA_APPLIED(timestamp, event, srcGUID, srcName, srcFlags, dstGUID, dstName, dstFlags, ...) if srcGUID == UnitGUID("player") then local auraId, auraName = select(1, ...); if (auraId and auraName) then local SpellTimer_2e98bd619518076f0acca5abdf39f3f2, SpellTimer_5ffc694575208469c26b201d0b6341d0, SpellTimer_9efa572e2a56206051c943a3525fb167 = string.find(auraName, SPELL_TIMER_TRAP_PATTERN1); if (not SpellTimer_2e98bd619518076f0acca5abdf39f3f2) then SpellTimer_2e98bd619518076f0acca5abdf39f3f2, SpellTimer_5ffc694575208469c26b201d0b6341d0, SpellTimer_9efa572e2a56206051c943a3525fb167 = string.find(auraName, SPELL_TIMER_TRAP_PATTERN2); end if auraName == "献祭陷阱" then SpellTimer_2e98bd619518076f0acca5abdf39f3f2, SpellTimer_5ffc694575208469c26b201d0b6341d0,SpellTimer_9efa572e2a56206051c943a3525fb167 =0,0,auraName; end if (SpellTimer_2e98bd619518076f0acca5abdf39f3f2 and SpellTimer_5ffc694575208469c26b201d0b6341d0 and SpellTimer_9efa572e2a56206051c943a3525fb167) then local SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = SpellTimer_7842a4ab741f0e167956142da78eae6a(SpellTimer_9efa572e2a56206051c943a3525fb167); if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a) then local SpellTimer_9248008bbb6d0ee7ce13f6ee45680051 = SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_9248008bbb6d0ee7ce13f6ee45680051; local SpellTimer_8d0febf2348ea712b2b375ae95601d5f = SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_8d0febf2348ea712b2b375ae95601d5f; local SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3 = SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3; local SpellTimer_8b227d0350467199526e8c4b146b1dfe = SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_8b227d0350467199526e8c4b146b1dfe; local SpellTimer_f5cb07751fccdf339be4192634943a73 = SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_f5cb07751fccdf339be4192634943a73; SpellTimer_6bfc0ec6c2226ffeac123d7f01a20036(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a); SpellTimer_3e83a2f08d713237071bf63303042603(dstGUID, dstName, auraName, SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_3ae8eb6ec90242df1e30110fba73067d[1], nil, 0, SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, 0, SpellTimer_8d0febf2348ea712b2b375ae95601d5f, SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3, SpellTimer_8b227d0350467199526e8c4b146b1dfe, nil, SpellTimer_f5cb07751fccdf339be4192634943a73); end end end end end function ST_Eventer:SPELL_AURA_REMOVED(timestamp, event, srcGUID, srcName, srcFlags, dstGUID, dstName, dstFlags, ...) local extraSpellId, extraSpellName = select(1, ...); local _,_,_,mana,_,powerType = GetSpellInfo(extraSpellId); if ((mana ~= 0 or powerType == 5 or SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c == BF_CLASS_HUNTER ) and SpellTimer_1982505ec42f9793a1e76e1b8032e1e2 == srcGUID and extraSpellName) then SpellTimer_d4f8602a3c67bbaf0c0e0d2cdf0936c8(dstGUID, extraSpellName); end end function ST_Eventer:UNIT_SPELLCAST_INTERRUPTED() SpellTimer_041cb32040a0ba9fccd2527486f1ef65 = nil; SpellTimer_07a248a8d6d46d6a6563ad77a7426629 = nil; end function ST_Eventer:UNIT_SPELLCAST_SUCCEEDED(SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c, SpellTimer_8983c60d66c8593ec7165ea9dbedb584) if (SpellTimer_fd724fd3c5e25aaf3b4226e1dae5257c ~= "player") then return; end if (SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584] and SpellTimer_a4eea13ec784b4a22e3e6c63fece18c0(SpellTimer_8983c60d66c8593ec7165ea9dbedb584)) then if (not SpellTimer_b525c4a0b57aa95cc2a717a778a67567[SpellTimer_8983c60d66c8593ec7165ea9dbedb584]) then if (not SpellTimer_2794bceb7278e2e41b1f5aacbb43f1f2(SpellTimer_8983c60d66c8593ec7165ea9dbedb584)) then return; end end local SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68 = {}; if (SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3]) then SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_8b227d0350467199526e8c4b146b1dfe = SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3]; end if (SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_8b227d0350467199526e8c4b146b1dfe and SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_8b227d0350467199526e8c4b146b1dfe["notarget"]) then SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_a989a1829848b98a3554eaa01b0cc5b8 = UnitName("player"); SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_18143855ca473518291feae87d7a01c1 = UnitGUID("player"); else SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_a989a1829848b98a3554eaa01b0cc5b8 = SpellTimer_041cb32040a0ba9fccd2527486f1ef65; SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_18143855ca473518291feae87d7a01c1 = SpellTimer_07a248a8d6d46d6a6563ad77a7426629; end SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2 = SpellTimer_8983c60d66c8593ec7165ea9dbedb584; SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b = SpellTimer_b525c4a0b57aa95cc2a717a778a67567[SpellTimer_8983c60d66c8593ec7165ea9dbedb584][1] or 0; SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_fa0e20b884d24b5fee3e57d9608679e2 = SpellTimer_f845ab0dcf04d13a5604b67f77d44085(SpellTimer_8983c60d66c8593ec7165ea9dbedb584); SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_9248008bbb6d0ee7ce13f6ee45680051 = SpellTimer_b525c4a0b57aa95cc2a717a778a67567[SpellTimer_8983c60d66c8593ec7165ea9dbedb584][2]; SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_8d0febf2348ea712b2b375ae95601d5f = SpellTimer_b525c4a0b57aa95cc2a717a778a67567[SpellTimer_8983c60d66c8593ec7165ea9dbedb584][3]; SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3 = SpellTimer_b525c4a0b57aa95cc2a717a778a67567[SpellTimer_8983c60d66c8593ec7165ea9dbedb584][4]; SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.instant = SpellTimer_b525c4a0b57aa95cc2a717a778a67567[SpellTimer_8983c60d66c8593ec7165ea9dbedb584][5]; if SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c == BF_CLASS_HUNTER and SpellTimer_8983c60d66c8593ec7165ea9dbedb584 == "毒蛇陷阱" then natureTrapTimer = true; end SpellTimer_f107f1ca03e07500ec5443d06808c71c(SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68); end SpellTimer_041cb32040a0ba9fccd2527486f1ef65 = nil; SpellTimer_07a248a8d6d46d6a6563ad77a7426629 = nil; end function ST_Eventer:PLAYER_REGEN_ENABLED() SpellTimer_5a9292fe1e3832fee78f3dec103f5b67(); end function SpellTimer_f107f1ca03e07500ec5443d06808c71c(SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68) if (SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68) then if (type(SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b) == "string") then if (SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_fa0e20b884d24b5fee3e57d9608679e2) then SpellTimer_3e83a2f08d713237071bf63303042603(SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_18143855ca473518291feae87d7a01c1, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_a989a1829848b98a3554eaa01b0cc5b8, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b - SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_fa0e20b884d24b5fee3e57d9608679e2, nil, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_fa0e20b884d24b5fee3e57d9608679e2, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, 0, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_8d0febf2348ea712b2b375ae95601d5f, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_8b227d0350467199526e8c4b146b1dfe); else SpellTimer_3e83a2f08d713237071bf63303042603(SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_18143855ca473518291feae87d7a01c1, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_a989a1829848b98a3554eaa01b0cc5b8, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b, nil, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_fa0e20b884d24b5fee3e57d9608679e2, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, 0, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_8d0febf2348ea712b2b375ae95601d5f, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_8b227d0350467199526e8c4b146b1dfe); end elseif (type(SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b) == "table") then local SpellTimer_7055060047c4e75028a795318cd9176e = SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b["detect"](); local SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b; if (SpellTimer_7055060047c4e75028a795318cd9176e) then SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b = SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b[SpellTimer_7055060047c4e75028a795318cd9176e]; end if (SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b) then if (SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_fa0e20b884d24b5fee3e57d9608679e2) then SpellTimer_3e83a2f08d713237071bf63303042603(SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_18143855ca473518291feae87d7a01c1, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_a989a1829848b98a3554eaa01b0cc5b8, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2, SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b - SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_fa0e20b884d24b5fee3e57d9608679e2, nil, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_fa0e20b884d24b5fee3e57d9608679e2, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, 0, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_8d0febf2348ea712b2b375ae95601d5f, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_8b227d0350467199526e8c4b146b1dfe, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b); else SpellTimer_3e83a2f08d713237071bf63303042603(SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_18143855ca473518291feae87d7a01c1, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_a989a1829848b98a3554eaa01b0cc5b8, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2, SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b, nil, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_fa0e20b884d24b5fee3e57d9608679e2, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, 0, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_8d0febf2348ea712b2b375ae95601d5f, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_8b227d0350467199526e8c4b146b1dfe, SpellTimer_8e6c2aaeb6b11f026ff5cb0a29aebe68.SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b); end end end end end function SpellTimerFrame_OnEnter(self) if (self:GetParent().SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3 == "buff") then GameTooltip:SetOwner(self, "ANCHOR_LEFT"); GameTooltip:SetUnitAura(self:GetParent().SpellTimer_8d0febf2348ea712b2b375ae95601d5f, "HELPFUL|PLAYER"); elseif (self:GetParent().SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3 == "debuff") then if (UnitGUID("target") == self:GetParent().SpellTimer_18143855ca473518291feae87d7a01c1 and self:GetParent().SpellTimer_8d0febf2348ea712b2b375ae95601d5f) then GameTooltip:SetOwner(self, "ANCHOR_LEFT"); GameTooltip:SetUnitAura("target", self:GetParent().SpellTimer_8d0febf2348ea712b2b375ae95601d5f, "HARMFUL|PLAYER"); else GameTooltip:SetOwner(self, "ANCHOR_LEFT"); GameTooltip:SetText(self:GetParent().SpellTimer_eaf867d86bb744dc021e9ab416a3efc1); GameTooltip:Show(); end else local SpellTimer_8d0febf2348ea712b2b375ae95601d5f, SpellTimer_8983c60d66c8593ec7165ea9dbedb584, _, SpellTimer_e78d229014c7a07be65fde4797b92c86, SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3 = BigFootSpell_GetSpellInfo(self:GetParent().SpellTimer_eaf867d86bb744dc021e9ab416a3efc1); if (SpellTimer_8d0febf2348ea712b2b375ae95601d5f) then GameTooltip:SetOwner(self, "ANCHOR_LEFT"); if (GetLocale() =="zhCN") then GameTooltip:SetSpell(SpellTimer_8d0febf2348ea712b2b375ae95601d5f, SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3) else GameTooltip:SetSpellBookItem(SpellTimer_8d0febf2348ea712b2b375ae95601d5f, SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3) end local SpellTimer_6e4d0db7491d6883f86de390d20dbe5b, SpellTimer_a2f3972c23a0aa3bd7fb0e9823d918f2 = string.find(self:GetParent().SpellTimer_eaf867d86bb744dc021e9ab416a3efc1, SPELL_TIMER_TOTEM_PATTERN); if (SpellTimer_6e4d0db7491d6883f86de390d20dbe5b) then GameTooltip:AddLine(SPELL_TIMER_TOTEM_TIP, 0.5, 0.5, 0.5); GameTooltip:SetHeight(GameTooltip:GetHeight() + 14); end end end end function SpellTimerUnitFrame_OnUpdate(self, elapsed) if (self.spell_count < 1) then self.spell_count = 0; self.spell_frames = {}; self.target_guid = nil; self.target_name = nil; self:Hide(); SpellTimer_0d140cdb13c7de18a709981051a6ad45(); end end function SpellTimerFrame_OnUpdate(self, SpellTimer_9a2474218860c0816af6c2bfe48d200a) if (self.casting) then if (not self.SpellTimer_b96d1a3c0528632466e59adade6f6c20) then self.SpellTimer_b96d1a3c0528632466e59adade6f6c20 = 0; end if (self.SpellTimer_b96d1a3c0528632466e59adade6f6c20 > 0.02) then self.SpellTimer_b96d1a3c0528632466e59adade6f6c20 = 0; else self.SpellTimer_b96d1a3c0528632466e59adade6f6c20 = self.SpellTimer_b96d1a3c0528632466e59adade6f6c20 + SpellTimer_9a2474218860c0816af6c2bfe48d200a; return; end local SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c = getglobal(self:GetName().."Text"); local SpellTimer_238276267475ef8eca9456dbbcea0221 = GetTime(); if ( SpellTimer_238276267475ef8eca9456dbbcea0221 > self.SpellTimer_99c618f1f8da580476cdd11d08a7bb6e ) then SpellTimer_238276267475ef8eca9456dbbcea0221 = self.SpellTimer_99c618f1f8da580476cdd11d08a7bb6e; end local SpellTimer_92fc56267c7e14d288fbcf74f912203d = self.SpellTimer_99c618f1f8da580476cdd11d08a7bb6e - SpellTimer_238276267475ef8eca9456dbbcea0221; if (SpellTimer_Config.ShowProgressBar) then local SpellTimer_69072c73fde2ed407f863929fd1e7483 = getglobal(self:GetName().."Bar"); local SpellTimer_cdf3187d5b7f812233daa27cd820c14d = getglobal(SpellTimer_69072c73fde2ed407f863929fd1e7483:GetName().."Spark"); local SpellTimer_4df1eb7ad5239e252fc1275e00a63f95 = getglobal(SpellTimer_69072c73fde2ed407f863929fd1e7483:GetName().."Flash"); SpellTimer_69072c73fde2ed407f863929fd1e7483:SetValue(SpellTimer_238276267475ef8eca9456dbbcea0221); SpellTimer_4df1eb7ad5239e252fc1275e00a63f95:Hide(); local SpellTimer_4928c153be20ea6f51bc556ece98d72d; SpellTimer_4928c153be20ea6f51bc556ece98d72d = ((SpellTimer_238276267475ef8eca9456dbbcea0221 - self.SpellTimer_84b858c262498d7b2211041076e7a8fe) / (self.SpellTimer_99c618f1f8da580476cdd11d08a7bb6e - self.SpellTimer_84b858c262498d7b2211041076e7a8fe)) * 128; if ( SpellTimer_4928c153be20ea6f51bc556ece98d72d < 0 ) then SpellTimer_4928c153be20ea6f51bc556ece98d72d = 0; end SpellTimer_cdf3187d5b7f812233daa27cd820c14d:SetPoint("CENTER", SpellTimer_69072c73fde2ed407f863929fd1e7483, "LEFT", SpellTimer_4928c153be20ea6f51bc556ece98d72d, 0); end if (SpellTimer_Config.ShowName) then if (self.SpellTimer_eaf867d86bb744dc021e9ab416a3efc1 and strlen(self.SpellTimer_eaf867d86bb744dc021e9ab416a3efc1) > 0) then SpellTimer_b6486728e6581197d8cb50d022ee112e(SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c, SpellTimer_21a0b81cdd9be58e9a4cbdbbb061e132(SpellTimer_92fc56267c7e14d288fbcf74f912203d).." - "..self.SpellTimer_eaf867d86bb744dc021e9ab416a3efc1, SpellTimer_92fc56267c7e14d288fbcf74f912203d); end else SpellTimer_b6486728e6581197d8cb50d022ee112e(SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c, SpellTimer_21a0b81cdd9be58e9a4cbdbbb061e132(SpellTimer_92fc56267c7e14d288fbcf74f912203d), SpellTimer_92fc56267c7e14d288fbcf74f912203d); end if (SpellTimer_92fc56267c7e14d288fbcf74f912203d <= 0) or (self.SpellTimer_18143855ca473518291feae87d7a01c1 ~= self:GetParent().target_guid) then SpellTimer_6bfc0ec6c2226ffeac123d7f01a20036(self); end elseif (self.SpellTimer_4df1eb7ad5239e252fc1275e00a63f95) then if (SpellTimer_Config.ShowProgressBar) then local SpellTimer_69072c73fde2ed407f863929fd1e7483 = getglobal(self:GetName().."Bar"); local SpellTimer_4df1eb7ad5239e252fc1275e00a63f95 = getglobal(SpellTimer_69072c73fde2ed407f863929fd1e7483:GetName().."Flash"); local SpellTimer_bf61cd56adaeb71abb1cdca2566cb62f = SpellTimer_4df1eb7ad5239e252fc1275e00a63f95:GetAlpha() + 0.2; if ( SpellTimer_bf61cd56adaeb71abb1cdca2566cb62f < 1 ) then SpellTimer_4df1eb7ad5239e252fc1275e00a63f95:SetAlpha(SpellTimer_bf61cd56adaeb71abb1cdca2566cb62f); else SpellTimer_4df1eb7ad5239e252fc1275e00a63f95:SetAlpha(1.0); self.SpellTimer_4df1eb7ad5239e252fc1275e00a63f95 = nil; end end self.SpellTimer_99c618f1f8da580476cdd11d08a7bb6e = nil; self.SpellTimer_84b858c262498d7b2211041076e7a8fe = nil; elseif (self.fadeOut) then local SpellTimer_bf61cd56adaeb71abb1cdca2566cb62f = self:GetAlpha() - 0.05; local SpellTimer_69072c73fde2ed407f863929fd1e7483 = getglobal(self:GetName().."Bar"); local SpellTimer_c8de692a8a07ed0c7ce7b0e94030abc3, SpellTimer_99c618f1f8da580476cdd11d08a7bb6e = SpellTimer_69072c73fde2ed407f863929fd1e7483:GetMinMaxValues(); if (SpellTimer_Config.ShowProgressBar and SpellTimer_69072c73fde2ed407f863929fd1e7483:GetValue() ~= SpellTimer_99c618f1f8da580476cdd11d08a7bb6e) then self:SetAlpha(1.0); self.fadeOut = nil; end if ( SpellTimer_bf61cd56adaeb71abb1cdca2566cb62f > 0 ) then self:SetAlpha(SpellTimer_bf61cd56adaeb71abb1cdca2566cb62f); else self.fadeOut = nil; self:Hide(); local SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f = self:GetParent(); SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.spell_count = SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.spell_count - 1; if (SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.spell_count > 0) then for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f, SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a in ipairs(SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.spell_frames) do if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a == self) then table.remove(SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.spell_frames, SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); end end end SpellTimer_0d140cdb13c7de18a709981051a6ad45(); end end end function SpellTimerMainFrame_OnLoad(self) RegisterForSaveFrame(self); end function SpellTimer_b6486728e6581197d8cb50d022ee112e(SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c, SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117, SpellTimer_92fc56267c7e14d288fbcf74f912203d) if (SpellTimer_Config.WarningTime) then SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c:SetText(SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117); if (tonumber(SpellTimer_92fc56267c7e14d288fbcf74f912203d) < SpellTimer_Config.WarningTime and SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_861df9c7f8a09d8b5ddbdf61a42d7e75) then SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c:SetTextColor(0.9, 0, 0); if (not SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_3f50417fb16be9b1078eb68d24fa9c26) then SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_3f50417fb16be9b1078eb68d24fa9c26 = 0; end SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_3f50417fb16be9b1078eb68d24fa9c26 = SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_3f50417fb16be9b1078eb68d24fa9c26 + 1; if (SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_3f50417fb16be9b1078eb68d24fa9c26 > 5) then SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_861df9c7f8a09d8b5ddbdf61a42d7e75 = nil; SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_3f50417fb16be9b1078eb68d24fa9c26 = 0; end else SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c:SetTextColor(0.9, 0.9, 0.9); if (not SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_3f50417fb16be9b1078eb68d24fa9c26) then SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_3f50417fb16be9b1078eb68d24fa9c26 = 0; end SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_3f50417fb16be9b1078eb68d24fa9c26 = SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_3f50417fb16be9b1078eb68d24fa9c26 + 1; if (SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_3f50417fb16be9b1078eb68d24fa9c26 > 5) then SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_861df9c7f8a09d8b5ddbdf61a42d7e75 = 1; SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c.SpellTimer_3f50417fb16be9b1078eb68d24fa9c26 = 0; end end else SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c:SetText(SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117); SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c:SetTextColor(0.9, 0.9, 0.9); end end function SpellTimer_21a0b81cdd9be58e9a4cbdbbb061e132(SpellTimer_ac970a92b1bae84f591d2098084a233d) SpellTimer_ac970a92b1bae84f591d2098084a233d = math.floor(SpellTimer_ac970a92b1bae84f591d2098084a233d); local SpellTimer_377682ab4d11f1b730b680e0c65e174c = math.floor(SpellTimer_ac970a92b1bae84f591d2098084a233d/60); local SpellTimer_c7b591b2c752c8cb9c847770ee2d8f9d = SpellTimer_ac970a92b1bae84f591d2098084a233d - SpellTimer_377682ab4d11f1b730b680e0c65e174c*60; return string.format("%02d:%02d", SpellTimer_377682ab4d11f1b730b680e0c65e174c, SpellTimer_c7b591b2c752c8cb9c847770ee2d8f9d); end function SpellTimer_7842a4ab741f0e167956142da78eae6a(SpellTimer_eaf867d86bb744dc021e9ab416a3efc1) for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, SpellTimer_7738f91d1b70890f8eff4260c7ff696e do local SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("SpellTimerSpellFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a and SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:IsVisible() and (not SpellTimer_eaf867d86bb744dc021e9ab416a3efc1 or SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_eaf867d86bb744dc021e9ab416a3efc1 == SpellTimer_eaf867d86bb744dc021e9ab416a3efc1)) then return SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a; end end end function SpellTimer_d20651c362d7866084ba9e86aae74c77(SpellTimer_18143855ca473518291feae87d7a01c1, SpellTimer_a989a1829848b98a3554eaa01b0cc5b8, SpellTimer_7a5e4c98e2ca051cb101e11cd9333b8a) for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, SpellTimer_7738f91d1b70890f8eff4260c7ff696e do local SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("SpellTimerSpellFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a and SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:IsVisible() and (not SpellTimer_18143855ca473518291feae87d7a01c1 or SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_18143855ca473518291feae87d7a01c1 == SpellTimer_18143855ca473518291feae87d7a01c1) and (not SpellTimer_a989a1829848b98a3554eaa01b0cc5b8 or SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_a989a1829848b98a3554eaa01b0cc5b8 == SpellTimer_a989a1829848b98a3554eaa01b0cc5b8)) then for SpellTimer_413bf9c15ce77baa8ebf1cda4cbf4887, SpellTimer_eaf867d86bb744dc021e9ab416a3efc1 in pairs(SpellTimer_7a5e4c98e2ca051cb101e11cd9333b8a) do if (SpellTimer_eaf867d86bb744dc021e9ab416a3efc1 == SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_eaf867d86bb744dc021e9ab416a3efc1) then SpellTimer_6bfc0ec6c2226ffeac123d7f01a20036(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a); end end end end end function SpellTimer_cac283cc5156506adec918699e9eb52d(SpellTimer_18143855ca473518291feae87d7a01c1, SpellTimer_8983c60d66c8593ec7165ea9dbedb584) if not SpellTimer_8983c60d66c8593ec7165ea9dbedb584 then return; end local SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a; for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, SpellTimer_ab9429fbd7c39497e05cf721dc4e88d9 do SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("SpellTimerUnitFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a and not SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:IsVisible()) then SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.target_guid = SpellTimer_18143855ca473518291feae87d7a01c1; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.target_name = SpellTimer_8983c60d66c8593ec7165ea9dbedb584; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.spell_count = 0; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.spell_frames = {}; _G["SpellTimer_LockButton"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f]:Hide(); return SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a; end end SpellTimer_ab9429fbd7c39497e05cf721dc4e88d9 = SpellTimer_ab9429fbd7c39497e05cf721dc4e88d9 + 1; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = CreateFrame("Button", "SpellTimerUnitFrame"..SpellTimer_ab9429fbd7c39497e05cf721dc4e88d9, UIParent, "SpellTimerUnitFrameTemplate"); SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.target_guid = SpellTimer_18143855ca473518291feae87d7a01c1; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.target_name = SpellTimer_8983c60d66c8593ec7165ea9dbedb584; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.spell_count = 0; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.spell_frames = {}; _G["SpellTimer_LockButton"..SpellTimer_ab9429fbd7c39497e05cf721dc4e88d9] = BLibrary("BFLock",SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a,SpellTimerMainFrame,SpellTimer_Config,SPELL_TIMER_TITLE, SPELL_TIMER_UNITFRAME_TOOLTIP) if (not SpellTimer_Config["Scale"]) then SpellTimer_Config["Scale"] = 0.8; end SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:SetScale(SpellTimer_Config["Scale"]); return SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a; end function SpellTimer_e27271c80ae91489761b46c450b115d7(SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f) local SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a; for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, SpellTimer_7738f91d1b70890f8eff4260c7ff696e do SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("SpellTimerSpellFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a and not SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:IsVisible()) then table.insert(SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.spell_frames, SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a); SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.spell_count = SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.spell_count + 1; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:SetParent(SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f); return SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a; end end SpellTimer_7738f91d1b70890f8eff4260c7ff696e = SpellTimer_7738f91d1b70890f8eff4260c7ff696e + 1; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = CreateFrame("Frame", "SpellTimerSpellFrame"..SpellTimer_7738f91d1b70890f8eff4260c7ff696e, SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f, "SpellTimerSpellFrameTemplate"); table.insert(SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.spell_frames, SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a); SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.spell_count = SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.spell_count + 1; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:SetParent(SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f); return SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a; end function SpellTimer_0d140cdb13c7de18a709981051a6ad45() local SpellTimer_848e68b92222fd8e58ad80a273399577; for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, SpellTimer_ab9429fbd7c39497e05cf721dc4e88d9 do local SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("SpellTimerUnitFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); local lockButton = _G["SpellTimer_LockButton"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f]; if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a and SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:IsVisible()) then SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:SetWidth(190); SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:SetHeight(math.abs(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_c5aa6e9f7b4bf106fad0156e34fcf4ab) + SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.spell_count * 40); if (not SpellTimer_848e68b92222fd8e58ad80a273399577) then SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:ClearAllPoints(); SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:SetPoint("TOPLEFT", SpellTimerMainFrame, "TOPLEFT", -5, 0); lockButton:Show(); else SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:ClearAllPoints(); SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:SetPoint("TOP", SpellTimer_848e68b92222fd8e58ad80a273399577, "BOTTOM", 0, -5); lockButton:Hide(); end local SpellTimer_dd8762c92b25fbb55e8425cf43a68713; for SpellTimer_5e57ab95c762a48d9a126b104db1056f, SpellTimer_ff970298b59db3c08408d6e8e8f9afb1 in ipairs(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.spell_frames) do if (not SpellTimer_dd8762c92b25fbb55e8425cf43a68713) then SpellTimer_ff970298b59db3c08408d6e8e8f9afb1:ClearAllPoints(); SpellTimer_ff970298b59db3c08408d6e8e8f9afb1:SetPoint("TOP", SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a, "TOP", 7, SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_c5aa6e9f7b4bf106fad0156e34fcf4ab); else SpellTimer_ff970298b59db3c08408d6e8e8f9afb1:ClearAllPoints(); SpellTimer_ff970298b59db3c08408d6e8e8f9afb1:SetPoint("TOP", SpellTimer_dd8762c92b25fbb55e8425cf43a68713, "BOTTOM", 0, -5); end SpellTimer_dd8762c92b25fbb55e8425cf43a68713 = SpellTimer_ff970298b59db3c08408d6e8e8f9afb1; end SpellTimer_848e68b92222fd8e58ad80a273399577 = SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a; end end end function SpellTimer_13ad584190406ab62660ba5443de5be3(SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2, SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b) local SpellTimer_5c387ba3afaf9146175764ba9c988bd4, SpellTimer_f7865900074e23318f1a7d3131a3d027, SpellTimer_ac970a92b1bae84f591d2098084a233d; local SpellTimer_eed0be1c2d5f65980b06b5094460c3c5 = ""; local SpellTimer_7055060047c4e75028a795318cd9176e; if (SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b <= 0) then return ""; end SpellTimer_5c387ba3afaf9146175764ba9c988bd4 = math.floor(SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b / 3600); SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b = SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b - SpellTimer_5c387ba3afaf9146175764ba9c988bd4 * 3600; SpellTimer_f7865900074e23318f1a7d3131a3d027 = math.floor(SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b / 60); SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b = SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b - SpellTimer_f7865900074e23318f1a7d3131a3d027 * 60; SpellTimer_ac970a92b1bae84f591d2098084a233d = math.floor(SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b); if (SpellTimer_5c387ba3afaf9146175764ba9c988bd4 > 0) then SpellTimer_eed0be1c2d5f65980b06b5094460c3c5 = SpellTimer_eed0be1c2d5f65980b06b5094460c3c5 .. SpellTimer_5c387ba3afaf9146175764ba9c988bd4 .. SPELLTIMER_HOUR_WORD; end if (SpellTimer_f7865900074e23318f1a7d3131a3d027 > 0) then SpellTimer_eed0be1c2d5f65980b06b5094460c3c5 = SpellTimer_eed0be1c2d5f65980b06b5094460c3c5 .. SpellTimer_f7865900074e23318f1a7d3131a3d027 .. SPELLTIMER_MINUTE_WORD; end if (SpellTimer_ac970a92b1bae84f591d2098084a233d > 0) then SpellTimer_eed0be1c2d5f65980b06b5094460c3c5 = SpellTimer_eed0be1c2d5f65980b06b5094460c3c5 .. SpellTimer_ac970a92b1bae84f591d2098084a233d .. SPELLTIMER_SECOND_WORD; end SpellTimer_7055060047c4e75028a795318cd9176e = string.format(SPELLTIMER_COOLDOWN_INFO, SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2, SpellTimer_eed0be1c2d5f65980b06b5094460c3c5); return SpellTimer_7055060047c4e75028a795318cd9176e; end function SpellTimer_3e83a2f08d713237071bf63303042603(SpellTimer_18143855ca473518291feae87d7a01c1, SpellTimer_a989a1829848b98a3554eaa01b0cc5b8, SpellTimer_eaf867d86bb744dc021e9ab416a3efc1, SpellTimer_876ae3817655938dba8b508a2da65e97, SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b, SpellTimer_fa0e20b884d24b5fee3e57d9608679e2, SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, SpellTimer_3f50417fb16be9b1078eb68d24fa9c26, SpellTimer_8d0febf2348ea712b2b375ae95601d5f, SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3, SpellTimer_8b227d0350467199526e8c4b146b1dfe, SpellTimer_3ae8eb6ec90242df1e30110fba73067d, SpellTimer_f5cb07751fccdf339be4192634943a73) if (not SpellTimer_18143855ca473518291feae87d7a01c1) then return; end if (not SpellTimer_fa0e20b884d24b5fee3e57d9608679e2) then SpellTimer_fa0e20b884d24b5fee3e57d9608679e2 = 0; end local SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f; for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, SpellTimer_ab9429fbd7c39497e05cf721dc4e88d9 do local SpellTimer_14cd5c796738d8962ea1f935abcebfc5 = getglobal("SpellTimerUnitFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); if (SpellTimer_14cd5c796738d8962ea1f935abcebfc5) then if (SpellTimer_14cd5c796738d8962ea1f935abcebfc5:IsVisible() and SpellTimer_14cd5c796738d8962ea1f935abcebfc5.target_guid == SpellTimer_18143855ca473518291feae87d7a01c1) then SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f = SpellTimer_14cd5c796738d8962ea1f935abcebfc5; end end end if (not SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f) then SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f = SpellTimer_cac283cc5156506adec918699e9eb52d(SpellTimer_18143855ca473518291feae87d7a01c1, SpellTimer_a989a1829848b98a3554eaa01b0cc5b8); if not SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f then return; end SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.target_name = SpellTimer_a989a1829848b98a3554eaa01b0cc5b8; SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.SpellTimer_c5aa6e9f7b4bf106fad0156e34fcf4ab = -30; if (SpellTimer_18143855ca473518291feae87d7a01c1 ~= UnitGUID("player")) then getglobal(SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f:GetName().."Header"):SetText(SpellTimer_a989a1829848b98a3554eaa01b0cc5b8); if (UnitGUID("target") == SpellTimer_18143855ca473518291feae87d7a01c1) then SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f:SetBackdropColor(1.0, 1.0, 0.0, SpellTimer_598b9ca2c8b72d0180cc7d033d281276); else SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f:SetBackdropColor(0.0, 0.0, 0.0, SpellTimer_598b9ca2c8b72d0180cc7d033d281276); end else getglobal(SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f:GetName().."Header"):SetText(""); SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f:SetBackdropColor(0.0, 0.0, 1.0, SpellTimer_598b9ca2c8b72d0180cc7d033d281276); SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f.SpellTimer_c5aa6e9f7b4bf106fad0156e34fcf4ab = -10; end end local SpellTimer_b2ae246a805418e466efc2d2087dcf5f; for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, SpellTimer_7738f91d1b70890f8eff4260c7ff696e do local SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("SpellTimerSpellFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a and SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:IsVisible() and SpellTimer_8b227d0350467199526e8c4b146b1dfe and SpellTimer_8b227d0350467199526e8c4b146b1dfe["unique"] and SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_18143855ca473518291feae87d7a01c1 ~= SpellTimer_18143855ca473518291feae87d7a01c1 and SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_eaf867d86bb744dc021e9ab416a3efc1 == SpellTimer_eaf867d86bb744dc021e9ab416a3efc1) then SpellTimer_6bfc0ec6c2226ffeac123d7f01a20036(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a); elseif (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a and SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:IsVisible() and SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_18143855ca473518291feae87d7a01c1 == SpellTimer_18143855ca473518291feae87d7a01c1 and SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_eaf867d86bb744dc021e9ab416a3efc1 == SpellTimer_eaf867d86bb744dc021e9ab416a3efc1 or (SpellTimer_f5cb07751fccdf339be4192634943a73 and SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_f5cb07751fccdf339be4192634943a73 == SpellTimer_f5cb07751fccdf339be4192634943a73)) then SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_9248008bbb6d0ee7ce13f6ee45680051 = SpellTimer_9248008bbb6d0ee7ce13f6ee45680051; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_a989a1829848b98a3554eaa01b0cc5b8 = SpellTimer_a989a1829848b98a3554eaa01b0cc5b8; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_8d0febf2348ea712b2b375ae95601d5f = SpellTimer_8d0febf2348ea712b2b375ae95601d5f; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_8b227d0350467199526e8c4b146b1dfe = SpellTimer_8b227d0350467199526e8c4b146b1dfe; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3 = SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_3ae8eb6ec90242df1e30110fba73067d = SpellTimer_3ae8eb6ec90242df1e30110fba73067d; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_f5cb07751fccdf339be4192634943a73 = SpellTimer_f5cb07751fccdf339be4192634943a73; local textureOb = getglobal("SpellTimerSpellFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f.."IconTexture"); local countOb = getglobal("SpellTimerSpellFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f.."IconCount"); if (SpellTimer_9248008bbb6d0ee7ce13f6ee45680051 and strlen(SpellTimer_9248008bbb6d0ee7ce13f6ee45680051) > 0) then textureOb:SetTexture(SpellTimer_9248008bbb6d0ee7ce13f6ee45680051); end if (SpellTimer_3f50417fb16be9b1078eb68d24fa9c26 > 1) then countOb:SetText(SpellTimer_3f50417fb16be9b1078eb68d24fa9c26); else countOb:SetText(""); end if (SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_eaf867d86bb744dc021e9ab416a3efc1] and SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_eaf867d86bb744dc021e9ab416a3efc1][2]) then SpellTimer_d20651c362d7866084ba9e86aae74c77(SpellTimer_18143855ca473518291feae87d7a01c1, SpellTimer_a989a1829848b98a3554eaa01b0cc5b8, SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_eaf867d86bb744dc021e9ab416a3efc1][2]); end if (SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3 ~= "trigger") then SpellTimer_057993c4c465323b6794b8aee775e093(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a, SpellTimer_eaf867d86bb744dc021e9ab416a3efc1, SpellTimer_876ae3817655938dba8b508a2da65e97 and SpellTimer_876ae3817655938dba8b508a2da65e97 + SpellTimer_fa0e20b884d24b5fee3e57d9608679e2, SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b); end SpellTimer_b2ae246a805418e466efc2d2087dcf5f = SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a; end end if not SpellTimer_b2ae246a805418e466efc2d2087dcf5f then SpellTimer_b2ae246a805418e466efc2d2087dcf5f = SpellTimer_e27271c80ae91489761b46c450b115d7(SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f); SpellTimer_b2ae246a805418e466efc2d2087dcf5f.SpellTimer_9248008bbb6d0ee7ce13f6ee45680051 = SpellTimer_9248008bbb6d0ee7ce13f6ee45680051; SpellTimer_b2ae246a805418e466efc2d2087dcf5f.SpellTimer_eaf867d86bb744dc021e9ab416a3efc1 = SpellTimer_eaf867d86bb744dc021e9ab416a3efc1; SpellTimer_b2ae246a805418e466efc2d2087dcf5f.SpellTimer_a989a1829848b98a3554eaa01b0cc5b8 = SpellTimer_a989a1829848b98a3554eaa01b0cc5b8; SpellTimer_b2ae246a805418e466efc2d2087dcf5f.SpellTimer_18143855ca473518291feae87d7a01c1 = SpellTimer_18143855ca473518291feae87d7a01c1; SpellTimer_b2ae246a805418e466efc2d2087dcf5f.SpellTimer_8d0febf2348ea712b2b375ae95601d5f = SpellTimer_8d0febf2348ea712b2b375ae95601d5f; SpellTimer_b2ae246a805418e466efc2d2087dcf5f.SpellTimer_8b227d0350467199526e8c4b146b1dfe = SpellTimer_8b227d0350467199526e8c4b146b1dfe; SpellTimer_b2ae246a805418e466efc2d2087dcf5f.SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3 = SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3; SpellTimer_b2ae246a805418e466efc2d2087dcf5f.SpellTimer_3ae8eb6ec90242df1e30110fba73067d = SpellTimer_3ae8eb6ec90242df1e30110fba73067d; SpellTimer_b2ae246a805418e466efc2d2087dcf5f.SpellTimer_f5cb07751fccdf339be4192634943a73 = SpellTimer_f5cb07751fccdf339be4192634943a73; local textureOb = getglobal(SpellTimer_b2ae246a805418e466efc2d2087dcf5f:GetName().."IconTexture"); local countOb = getglobal(SpellTimer_b2ae246a805418e466efc2d2087dcf5f:GetName().."IconCount"); if (SpellTimer_9248008bbb6d0ee7ce13f6ee45680051 and strlen(SpellTimer_9248008bbb6d0ee7ce13f6ee45680051) > 0) then textureOb:SetTexture(SpellTimer_9248008bbb6d0ee7ce13f6ee45680051); end if (SpellTimer_3f50417fb16be9b1078eb68d24fa9c26 > 1) then countOb:SetText(SpellTimer_3f50417fb16be9b1078eb68d24fa9c26); else countOb:SetText(""); end local SpellTimer_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 = getglobal(SpellTimer_b2ae246a805418e466efc2d2087dcf5f:GetName().."Icon"); SpellTimer_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:SetScript("OnClick", function(self, button) local SpellTimer_dc0ed675b3e32a9dd9d4058182798c95 = self:GetParent(); if (SpellTimer_dc0ed675b3e32a9dd9d4058182798c95.SpellTimer_f5cb07751fccdf339be4192634943a73 and button == "RightButton") then DestroyTotem(SpellTimer_dc0ed675b3e32a9dd9d4058182798c95.SpellTimer_f5cb07751fccdf339be4192634943a73); end end); if (SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_eaf867d86bb744dc021e9ab416a3efc1] and SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_eaf867d86bb744dc021e9ab416a3efc1][2]) then SpellTimer_d20651c362d7866084ba9e86aae74c77(SpellTimer_18143855ca473518291feae87d7a01c1, SpellTimer_a989a1829848b98a3554eaa01b0cc5b8, SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_eaf867d86bb744dc021e9ab416a3efc1][2]); end SpellTimer_057993c4c465323b6794b8aee775e093(SpellTimer_b2ae246a805418e466efc2d2087dcf5f, SpellTimer_eaf867d86bb744dc021e9ab416a3efc1, SpellTimer_876ae3817655938dba8b508a2da65e97 and SpellTimer_876ae3817655938dba8b508a2da65e97 + SpellTimer_fa0e20b884d24b5fee3e57d9608679e2, SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b); end SpellTimer_976d7ef91740e6c826eb81ef9e1cf88f:Show(); SpellTimer_b2ae246a805418e466efc2d2087dcf5f:Show(); SpellTimer_0d140cdb13c7de18a709981051a6ad45(); end function SpellTimer_d4f8602a3c67bbaf0c0e0d2cdf0936c8(SpellTimer_18143855ca473518291feae87d7a01c1, SpellTimer_eaf867d86bb744dc021e9ab416a3efc1, SpellTimer_f5cb07751fccdf339be4192634943a73) for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, SpellTimer_7738f91d1b70890f8eff4260c7ff696e do local SpellTimer_69072c73fde2ed407f863929fd1e7483 = getglobal("SpellTimerSpellFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); if (SpellTimer_69072c73fde2ed407f863929fd1e7483 and SpellTimer_69072c73fde2ed407f863929fd1e7483:IsVisible() ) and (not SpellTimer_18143855ca473518291feae87d7a01c1 or SpellTimer_69072c73fde2ed407f863929fd1e7483.SpellTimer_18143855ca473518291feae87d7a01c1 == SpellTimer_18143855ca473518291feae87d7a01c1) and (not SpellTimer_eaf867d86bb744dc021e9ab416a3efc1 or SpellTimer_69072c73fde2ed407f863929fd1e7483.SpellTimer_eaf867d86bb744dc021e9ab416a3efc1 == SpellTimer_eaf867d86bb744dc021e9ab416a3efc1) and (not SpellTimer_f5cb07751fccdf339be4192634943a73 or SpellTimer_69072c73fde2ed407f863929fd1e7483.SpellTimer_f5cb07751fccdf339be4192634943a73 == SpellTimer_f5cb07751fccdf339be4192634943a73) then SpellTimer_6bfc0ec6c2226ffeac123d7f01a20036(SpellTimer_69072c73fde2ed407f863929fd1e7483); end end end function SpellTimer_057993c4c465323b6794b8aee775e093(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a, SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117, SpellTimer_876ae3817655938dba8b508a2da65e97, SpellTimer_5e57c2750895232501d674704d8ef219) local SpellTimer_69072c73fde2ed407f863929fd1e7483 = getglobal(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:GetName().."Bar"); local SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c = getglobal(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:GetName().."Text"); local SpellTimer_5f383072a061a86d8cc9832ff484baa2 = GetTime(); if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_99c618f1f8da580476cdd11d08a7bb6e and SpellTimer_5e57c2750895232501d674704d8ef219 and math.abs(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_99c618f1f8da580476cdd11d08a7bb6e - SpellTimer_5f383072a061a86d8cc9832ff484baa2 - SpellTimer_5e57c2750895232501d674704d8ef219) < 0.2) then return; end if (SpellTimer_876ae3817655938dba8b508a2da65e97 and SpellTimer_876ae3817655938dba8b508a2da65e97 >= 0) then if (not SpellTimer_5e57c2750895232501d674704d8ef219) then SpellTimer_5e57c2750895232501d674704d8ef219 = SpellTimer_876ae3817655938dba8b508a2da65e97; end if (not SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_84b858c262498d7b2211041076e7a8fe) then SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_84b858c262498d7b2211041076e7a8fe = SpellTimer_5f383072a061a86d8cc9832ff484baa2; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_99c618f1f8da580476cdd11d08a7bb6e = SpellTimer_5f383072a061a86d8cc9832ff484baa2 + SpellTimer_876ae3817655938dba8b508a2da65e97; else SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_84b858c262498d7b2211041076e7a8fe = SpellTimer_5f383072a061a86d8cc9832ff484baa2 + SpellTimer_5e57c2750895232501d674704d8ef219 - SpellTimer_876ae3817655938dba8b508a2da65e97; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_99c618f1f8da580476cdd11d08a7bb6e = SpellTimer_5f383072a061a86d8cc9832ff484baa2 + SpellTimer_5e57c2750895232501d674704d8ef219; end elseif (SpellTimer_5e57c2750895232501d674704d8ef219 and SpellTimer_5e57c2750895232501d674704d8ef219 >= 0) then if (not SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_84b858c262498d7b2211041076e7a8fe) then SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_84b858c262498d7b2211041076e7a8fe = SpellTimer_5f383072a061a86d8cc9832ff484baa2; end SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_99c618f1f8da580476cdd11d08a7bb6e = SpellTimer_5f383072a061a86d8cc9832ff484baa2 + SpellTimer_5e57c2750895232501d674704d8ef219; else return; end if (SpellTimer_Config.ShowProgressBar) then local SpellTimer_cdf3187d5b7f812233daa27cd820c14d = getglobal(SpellTimer_69072c73fde2ed407f863929fd1e7483:GetName().."Spark"); local SpellTimer_4df1eb7ad5239e252fc1275e00a63f95 = getglobal(SpellTimer_69072c73fde2ed407f863929fd1e7483:GetName().."Flash"); SpellTimer_69072c73fde2ed407f863929fd1e7483:SetStatusBarColor(1.0, 0.7, 0.0); SpellTimer_69072c73fde2ed407f863929fd1e7483:SetMinMaxValues(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_84b858c262498d7b2211041076e7a8fe, SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_99c618f1f8da580476cdd11d08a7bb6e); SpellTimer_69072c73fde2ed407f863929fd1e7483:SetValue(SpellTimer_5f383072a061a86d8cc9832ff484baa2); SpellTimer_4df1eb7ad5239e252fc1275e00a63f95:Hide(); SpellTimer_69072c73fde2ed407f863929fd1e7483:Show(); SpellTimer_cdf3187d5b7f812233daa27cd820c14d:SetPoint("CENTER", SpellTimer_69072c73fde2ed407f863929fd1e7483, "LEFT", 0, 0); SpellTimer_cdf3187d5b7f812233daa27cd820c14d:Show(); SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c:ClearAllPoints(); SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c:SetPoint("TOPLEFT", SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a, "TOPLEFT", 35, 0); else SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c:ClearAllPoints(); SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c:SetPoint("LEFT", SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a, "LEFT", 35, 0); SpellTimer_69072c73fde2ed407f863929fd1e7483:Hide(); end if (SpellTimer_Config.ShowName) then if (SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117 and strlen(SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117) > 0) then SpellTimer_b6486728e6581197d8cb50d022ee112e(SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c, SpellTimer_21a0b81cdd9be58e9a4cbdbbb061e132(SpellTimer_5e57c2750895232501d674704d8ef219).." - "..SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117, SpellTimer_5e57c2750895232501d674704d8ef219 or SpellTimer_876ae3817655938dba8b508a2da65e97); end else SpellTimer_b6486728e6581197d8cb50d022ee112e(SpellTimer_636f3fe8b37a2b0789998eac52c7bb4c, SpellTimer_21a0b81cdd9be58e9a4cbdbbb061e132(SpellTimer_5e57c2750895232501d674704d8ef219), SpellTimer_5e57c2750895232501d674704d8ef219 or SpellTimer_876ae3817655938dba8b508a2da65e97); end SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:SetAlpha(1.0); SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.casting = 1; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.stopping = nil; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.fadeOut = nil; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:Show(); end function SpellTimer_5a9292fe1e3832fee78f3dec103f5b67() for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, SpellTimer_7738f91d1b70890f8eff4260c7ff696e do local SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("SpellTimerSpellFrame"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a and SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:IsVisible() and (not SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_8b227d0350467199526e8c4b146b1dfe or not SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_8b227d0350467199526e8c4b146b1dfe["live"])) then SpellTimer_6bfc0ec6c2226ffeac123d7f01a20036(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a); end end end function SpellTimer_6bfc0ec6c2226ffeac123d7f01a20036(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a) if (not SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a) then return; end if (not SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.casting) then return; end if (SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a and SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:IsShown() and not SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.stopping) then if (SpellTimer_Config.ShowProgressBar) then local SpellTimer_69072c73fde2ed407f863929fd1e7483 = getglobal(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:GetName().."Bar"); local SpellTimer_cdf3187d5b7f812233daa27cd820c14d = getglobal(SpellTimer_69072c73fde2ed407f863929fd1e7483:GetName().."Spark"); local SpellTimer_4df1eb7ad5239e252fc1275e00a63f95 = getglobal(SpellTimer_69072c73fde2ed407f863929fd1e7483:GetName().."Flash"); SpellTimer_69072c73fde2ed407f863929fd1e7483:SetValue(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_99c618f1f8da580476cdd11d08a7bb6e); SpellTimer_69072c73fde2ed407f863929fd1e7483:SetStatusBarColor(0.0, 1.0, 0.0); SpellTimer_cdf3187d5b7f812233daa27cd820c14d:Hide(); SpellTimer_4df1eb7ad5239e252fc1275e00a63f95:SetAlpha(0.0); SpellTimer_4df1eb7ad5239e252fc1275e00a63f95:Show(); SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_4df1eb7ad5239e252fc1275e00a63f95 = 1; end SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_f5cb07751fccdf339be4192634943a73 = nil; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.casting = nil; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.fadeOut = 1; SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.stopping = 1; if SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a.SpellTimer_eaf867d86bb744dc021e9ab416a3efc1 == "毒蛇陷阱效果" then natureTrapTimer = nil; end end end function SpellTimer_e33ea68190a7f8d34c7c63ed543e7221(SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117, SpellTimer_a8858383576d7634cceceaf04a2ddb29) SpellTimer_a8858383576d7634cceceaf04a2ddb29 = string.gsub(SpellTimer_a8858383576d7634cceceaf04a2ddb29, "(%%t)", "([%%d%%.]+)(h*)([%%d%%.]*)(m*)([%%d%%.]*)(s*)"); return SpellTimer_16b348e9e748ecb3ce10316caeb536ae(SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117, SpellTimer_a8858383576d7634cceceaf04a2ddb29); end function SpellTimer_16b348e9e748ecb3ce10316caeb536ae(SpellTimer_6247f3928022ad57ae82dffc535581c1, SpellTimer_a8858383576d7634cceceaf04a2ddb29) SpellTimer_6247f3928022ad57ae82dffc535581c1 = string.gsub(SpellTimer_6247f3928022ad57ae82dffc535581c1, SPELLTIMER_HOUR_WORD, "h"); SpellTimer_6247f3928022ad57ae82dffc535581c1 = string.gsub(SpellTimer_6247f3928022ad57ae82dffc535581c1, SPELLTIMER_MINUTE_WORD, "m"); SpellTimer_6247f3928022ad57ae82dffc535581c1 = string.gsub(SpellTimer_6247f3928022ad57ae82dffc535581c1, SPELLTIMER_SECOND_WORD, "s"); local SpellTimer_6e4d0db7491d6883f86de390d20dbe5b, SpellTimer_a2f3972c23a0aa3bd7fb0e9823d918f2, SpellTimer_63e8ff291adc8d38336a43137f10fb51, SpellTimer_59897944f061764c83614dd61b947cf1, SpellTimer_aff1c240bd4892425ce41a97e249e121, SpellTimer_476e4e6d615566b374a12b737083550e, SpellTimer_22de223457e2b20807d37c619bdbb92b, SpellTimer_f40fe078ddd73cb3e7cc2600b489b79e = string.find(SpellTimer_6247f3928022ad57ae82dffc535581c1, SpellTimer_a8858383576d7634cceceaf04a2ddb29); local SpellTimer_5c387ba3afaf9146175764ba9c988bd4, SpellTimer_f7865900074e23318f1a7d3131a3d027, SpellTimer_ac970a92b1bae84f591d2098084a233d; local SpellTimer_7055060047c4e75028a795318cd9176e; if (SpellTimer_59897944f061764c83614dd61b947cf1 and SpellTimer_59897944f061764c83614dd61b947cf1 ~= "") then SpellTimer_5c387ba3afaf9146175764ba9c988bd4 = tonumber(SpellTimer_63e8ff291adc8d38336a43137f10fb51); if (SpellTimer_476e4e6d615566b374a12b737083550e and SpellTimer_476e4e6d615566b374a12b737083550e ~= "") then SpellTimer_f7865900074e23318f1a7d3131a3d027 = tonumber(SpellTimer_aff1c240bd4892425ce41a97e249e121); if (SpellTimer_f40fe078ddd73cb3e7cc2600b489b79e and SpellTimer_f40fe078ddd73cb3e7cc2600b489b79e ~= "") then SpellTimer_ac970a92b1bae84f591d2098084a233d = tonumber(SpellTimer_22de223457e2b20807d37c619bdbb92b); else SpellTimer_ac970a92b1bae84f591d2098084a233d = 0; end else SpellTimer_f7865900074e23318f1a7d3131a3d027 = 0; if (SpellTimer_f40fe078ddd73cb3e7cc2600b489b79e and SpellTimer_f40fe078ddd73cb3e7cc2600b489b79e ~= "") then SpellTimer_ac970a92b1bae84f591d2098084a233d = tonumber(SpellTimer_aff1c240bd4892425ce41a97e249e121); else SpellTimer_ac970a92b1bae84f591d2098084a233d = 0; end end else SpellTimer_5c387ba3afaf9146175764ba9c988bd4 = 0; if (SpellTimer_476e4e6d615566b374a12b737083550e and SpellTimer_476e4e6d615566b374a12b737083550e ~= "") then SpellTimer_f7865900074e23318f1a7d3131a3d027 = tonumber(SpellTimer_63e8ff291adc8d38336a43137f10fb51); if (SpellTimer_f40fe078ddd73cb3e7cc2600b489b79e and SpellTimer_f40fe078ddd73cb3e7cc2600b489b79e ~= "") then SpellTimer_ac970a92b1bae84f591d2098084a233d = tonumber(SpellTimer_22de223457e2b20807d37c619bdbb92b); else SpellTimer_ac970a92b1bae84f591d2098084a233d = 0; end else SpellTimer_f7865900074e23318f1a7d3131a3d027 = 0; if (SpellTimer_f40fe078ddd73cb3e7cc2600b489b79e and SpellTimer_f40fe078ddd73cb3e7cc2600b489b79e ~= "") then SpellTimer_ac970a92b1bae84f591d2098084a233d = tonumber(SpellTimer_63e8ff291adc8d38336a43137f10fb51); else SpellTimer_ac970a92b1bae84f591d2098084a233d = 0; end end end SpellTimer_7055060047c4e75028a795318cd9176e = SpellTimer_5c387ba3afaf9146175764ba9c988bd4 * 60 * 60 + SpellTimer_f7865900074e23318f1a7d3131a3d027 * 60 + SpellTimer_ac970a92b1bae84f591d2098084a233d; if (SpellTimer_7055060047c4e75028a795318cd9176e ~= 0) then return SpellTimer_7055060047c4e75028a795318cd9176e..""; end end function SpellTimer_2794bceb7278e2e41b1f5aacbb43f1f2(SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2) if (SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2 and SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2]) then local SpellTimer_a8858383576d7634cceceaf04a2ddb29 = SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c][SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2]; local SpellTimer_8d0febf2348ea712b2b375ae95601d5f, SpellTimer_8983c60d66c8593ec7165ea9dbedb584, _, SpellTimer_e78d229014c7a07be65fde4797b92c86, SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3, SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, SpellTimer_58bf64b2530594f4163e4cd743249693, SpellTimer_c24b715949f3cd17a839cd64ac2bce7f, SpellTimer_61136d0fcb72bd11d172044127e2fdbc = BigFootSpell_GetSpellInfo(SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2); if (not SpellTimer_8d0febf2348ea712b2b375ae95601d5f) then return false; end local SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b; if (type(SpellTimer_a8858383576d7634cceceaf04a2ddb29[1]) == "table") then local func = getglobal(SpellTimer_a8858383576d7634cceceaf04a2ddb29[1][1]); SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b = func(SpellTimer_58bf64b2530594f4163e4cd743249693, SpellTimer_a8858383576d7634cceceaf04a2ddb29[1][2]); if (SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b) then SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b["detect"] = getglobal(SpellTimer_a8858383576d7634cceceaf04a2ddb29[1][3]); end elseif (type(SpellTimer_a8858383576d7634cceceaf04a2ddb29[1]) == "number") then SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b = tonumber(SpellTimer_a8858383576d7634cceceaf04a2ddb29[1]); elseif (string.find(SpellTimer_a8858383576d7634cceceaf04a2ddb29[1], "%%t")) then SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b = SpellTimer_e33ea68190a7f8d34c7c63ed543e7221(SpellTimer_58bf64b2530594f4163e4cd743249693, SpellTimer_a8858383576d7634cceceaf04a2ddb29[1]); else return false; end if (SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b) then if (not SpellTimer_b525c4a0b57aa95cc2a717a778a67567[SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2]) then SpellTimer_b525c4a0b57aa95cc2a717a778a67567[SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2] = {}; end SpellTimer_b525c4a0b57aa95cc2a717a778a67567[SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2] = {SpellTimer_da4b94f92d67ca9ccecb24bec1db6e2b, SpellTimer_9248008bbb6d0ee7ce13f6ee45680051, SpellTimer_8d0febf2348ea712b2b375ae95601d5f, SpellTimer_6d5e7d83d8358745ae4dcf61d16bd1f3, SpellTimer_61136d0fcb72bd11d172044127e2fdbc}; return true; end end end function SpellTimer_a4eea13ec784b4a22e3e6c63fece18c0(SpellTimer_caa997efdeb36851b2f828f934939927) if (not SpellTimer_Config.Spells) then return 1; end if (not SpellTimer_Config.Spells[SpellTimer_caa997efdeb36851b2f828f934939927]) then return 1; end if (not SpellTimer_Config.Spells[SpellTimer_caa997efdeb36851b2f828f934939927].disabled) then return 1; end end function SpellTimer_f845ab0dcf04d13a5604b67f77d44085(SpellTimer_caa997efdeb36851b2f828f934939927) if (not SpellTimer_Config.Spells) then return 0; end if (not SpellTimer_Config.Spells[SpellTimer_caa997efdeb36851b2f828f934939927]) then return 0; end if (not SpellTimer_Config.Spells[SpellTimer_caa997efdeb36851b2f828f934939927].delay) then return 0; end return SpellTimer_Config.Spells[SpellTimer_caa997efdeb36851b2f828f934939927].delay; end function SpellTimer_b0556f1aaeaa866b8ccad95c7373294e(SpellTimer_98a5dc0296fddcc9b5b804f038f1994c) if (SpellTimer_98a5dc0296fddcc9b5b804f038f1994c) then for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, 8 do local SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("SpellTimerOptionFrameSpellOption"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); SpellTimer_3be838d68df73407c2239d3183a6244e(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a, 1); end SpellTimerScrollFrameScrollBarScrollUpButton:Enable(); SpellTimerScrollFrameScrollBarScrollDownButton:Enable(); if (SpellTimer_Config.ShowProgressBar) then MobElement_Enable(SpellTimerOptionShowProgress); else MobElement_Disable(SpellTimerOptionShowProgress); end if (SpellTimer_Config.ShowName) then MobElement_Enable(SpellTimerOptionShowName); else MobElement_Disable(SpellTimerOptionShowName); end else for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, 8 do local SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a = getglobal("SpellTimerOptionFrameSpellOption"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); SpellTimer_3be838d68df73407c2239d3183a6244e(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a, nil); end SpellTimerScrollFrameScrollBarScrollUpButton:Disable(); SpellTimerScrollFrameScrollBarScrollDownButton:Disable(); SpellTimer_Config.EnabledTest = nil; MobElement_Disable(SpellTimerOptionShowProgress); MobElement_Disable(SpellTimerOptionShowName); end end function SpellTimer_Toggle(SpellTimer_43975aa4b29e368c1d658b08e332e857) if (SpellTimer_43975aa4b29e368c1d658b08e332e857) then SpellTimer_Config.EnabledTest = 1; SpellTimer_b0556f1aaeaa866b8ccad95c7373294e(1); SpellTimer_1fab9cbd5d0d1f0b74ae278965b34955(1); else SpellTimer_b0556f1aaeaa866b8ccad95c7373294e(nil); SpellTimer_1fab9cbd5d0d1f0b74ae278965b34955(nil); end end function SpellTimer_3be838d68df73407c2239d3183a6244e(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a, SpellTimer_98a5dc0296fddcc9b5b804f038f1994c) local SpellTimer_c269a7243ef2264d0e08729eacacb038 = getglobal(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:GetName().."Checkbox"); local SpellTimer_9a5baa865ddb6d5b53f628db54f897b0 = getglobal(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:GetName().."Slider"); if (SpellTimer_98a5dc0296fddcc9b5b804f038f1994c) then MobElement_Enable(SpellTimer_c269a7243ef2264d0e08729eacacb038); SpellTimer_2b14a674989878028026d5603a7c21bc(SpellTimer_9a5baa865ddb6d5b53f628db54f897b0); else MobElement_Disable(SpellTimer_c269a7243ef2264d0e08729eacacb038); SpellTimer_2b0f13c734936c2b4b0b98f69e9b4fc2(SpellTimer_9a5baa865ddb6d5b53f628db54f897b0); end end function SpellTimerOptionFrameCheckbox_OnClick(self, SpellTimer_da7eff566d49dac34624d7d3bb115e5c) if (self:GetChecked() == 1) then if (not SpellTimer_Config.Spells) then SpellTimer_Config.Spells = {}; end if (not SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]]) then SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]] = {}; end SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]].disabled = nil; local SpellTimer_9a5baa865ddb6d5b53f628db54f897b0 SpellTimer_2b14a674989878028026d5603a7c21bc(getglobal(self:GetParent():GetName().."Slider")); else if (not SpellTimer_Config.Spells) then SpellTimer_Config.Spells = {}; end if (not SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]]) then SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]] = {}; end SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]].disabled = 1; SpellTimer_2b0f13c734936c2b4b0b98f69e9b4fc2(getglobal(self:GetParent():GetName().."Slider")); end end function SpellTimer_1986f425c4fa82e2e76ea1f8af49bd46() if (not SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a) then SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a = {n = 0}; local SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2; for SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2 in pairs(SPELL_TIMER_PATTERN_TABLE[SpellTimer_ae8d8c7afbb4680c5b7e91f4cd2e3e5c]) do table.insert(SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a, SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2); end end end function SpellTimerOptionFrame_OnShow(self) SpellTimerList_Update(); end function SpellTimer_bf10b5333c29f45f02035eb5a932b2fb() SpellTimer_1986f425c4fa82e2e76ea1f8af49bd46(); return #SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a; end function SpellTimer_2b12b46b0db755920b4e17e7c0c193e4(SpellTimer_da7eff566d49dac34624d7d3bb115e5c) SpellTimer_1986f425c4fa82e2e76ea1f8af49bd46(); if (SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]) then if (not SpellTimer_Config.Spells) then SpellTimer_Config.Spells = {}; end if (SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]]) then return SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c], not SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]].disabled, SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]].delay; else return SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c], 1, nil; end end end function SpellTimer_36d693cf2663d0647fde688e5562ccf4(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a, SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2, SpellTimer_98a5dc0296fddcc9b5b804f038f1994c, SpellTimer_fa0e20b884d24b5fee3e57d9608679e2) if (SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2) then local SpellTimer_c269a7243ef2264d0e08729eacacb038 = getglobal(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:GetName().."Checkbox"); local SpellTimer_9a5baa865ddb6d5b53f628db54f897b0 = getglobal(SpellTimer_411b8aa6d5954c6020f0b9c9e80e847a:GetName().."Slider"); local SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117 = getglobal(SpellTimer_c269a7243ef2264d0e08729eacacb038:GetName().."Text"); SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117:SetText(SpellTimer_b48c6d810781a0aaca7a1daf572bf0a2); if (SpellTimer_98a5dc0296fddcc9b5b804f038f1994c) then SpellTimer_c269a7243ef2264d0e08729eacacb038:SetChecked(1); SpellTimer_2b14a674989878028026d5603a7c21bc(SpellTimer_9a5baa865ddb6d5b53f628db54f897b0); else SpellTimer_c269a7243ef2264d0e08729eacacb038:SetChecked(0); SpellTimer_2b0f13c734936c2b4b0b98f69e9b4fc2(SpellTimer_9a5baa865ddb6d5b53f628db54f897b0); end if (SpellTimer_fa0e20b884d24b5fee3e57d9608679e2) then local SpellTimer_568f88f46bc831ec9a490203db9f3d9f = getglobal(SpellTimer_9a5baa865ddb6d5b53f628db54f897b0:GetName().."Text"); SpellTimer_9a5baa865ddb6d5b53f628db54f897b0:SetValue(SpellTimer_fa0e20b884d24b5fee3e57d9608679e2); SpellTimer_568f88f46bc831ec9a490203db9f3d9f:SetText(SpellTimer_fa0e20b884d24b5fee3e57d9608679e2); else local SpellTimer_568f88f46bc831ec9a490203db9f3d9f = getglobal(SpellTimer_9a5baa865ddb6d5b53f628db54f897b0:GetName().."Text"); SpellTimer_9a5baa865ddb6d5b53f628db54f897b0:SetValue(0); SpellTimer_568f88f46bc831ec9a490203db9f3d9f:SetText(0); end end end function SpellTimerList_Update() local SpellTimer_602dceb5418dc9410df12b60b7a8437a = SpellTimer_bf10b5333c29f45f02035eb5a932b2fb(); local SpellTimer_fa4677999269b67d6951c7147be84a0e = FauxScrollFrame_GetOffset(SpellTimerScrollFrame); local SpellTimer_da7eff566d49dac34624d7d3bb115e5c; for SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f = 1, 8 do SpellTimer_da7eff566d49dac34624d7d3bb115e5c = SpellTimer_fa4677999269b67d6951c7147be84a0e + SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f; local SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117, SpellTimer_98a5dc0296fddcc9b5b804f038f1994c, SpellTimer_7786351efad8dcf3438f3e45f70c452d = SpellTimer_2b12b46b0db755920b4e17e7c0c193e4(SpellTimer_da7eff566d49dac34624d7d3bb115e5c); local SpellTimer_55cde830d72c225f3ffd4edac63a0cdc = getglobal("SpellTimerOptionFrameSpellOption"..SpellTimer_e914904fab9d05d3f54d52bfc31a0f3f); SpellTimer_55cde830d72c225f3ffd4edac63a0cdc:SetID(SpellTimer_da7eff566d49dac34624d7d3bb115e5c); SpellTimer_36d693cf2663d0647fde688e5562ccf4(SpellTimer_55cde830d72c225f3ffd4edac63a0cdc, SpellTimer_e6955c64cf39bdb23dc86de1a9ec2117, SpellTimer_98a5dc0296fddcc9b5b804f038f1994c, SpellTimer_7786351efad8dcf3438f3e45f70c452d); if ( SpellTimer_da7eff566d49dac34624d7d3bb115e5c > SpellTimer_602dceb5418dc9410df12b60b7a8437a ) then SpellTimer_55cde830d72c225f3ffd4edac63a0cdc:Hide(); else SpellTimer_55cde830d72c225f3ffd4edac63a0cdc:Show(); end end if (SpellTimer_Config.EnabledTest) then FauxScrollFrame_Update(SpellTimerScrollFrame, SpellTimer_602dceb5418dc9410df12b60b7a8437a, 8, 20); else FauxScrollFrame_Update(SpellTimerScrollFrame, 1, 8, 20); end end function SpellTimerOptionShowProgress_OnClick(self) if (self:GetChecked() == 1) then SpellTimer_Config.ShowProgressBar = 1; else SpellTimer_Config.ShowProgressBar = nil; end end function SpellTimerOptionShowProgress_OnShow(self) getglobal(self:GetName().."Text"):SetText(SPELL_TIMER_SHOW_PROGRESS); if (SpellTimer_Config.EnabledTest) then MobElement_Enable(self); else MobElement_Disable(self); end if (SpellTimer_Config.ShowProgressBar) then self:SetChecked(1); else self:SetChecked(0); end end function SpellTimerOptionShowName_OnClick(self) if (self:GetChecked() == 1) then SpellTimer_Config.ShowName = 1; else SpellTimer_Config.ShowName = nil; end end function SpellTimerOptionShowName_OnShow(self) getglobal(self:GetName().."Text"):SetText(SPELL_TIMER_SHOW_NAME); if (SpellTimer_Config.EnabledTest) then MobElement_Enable(self); else MobElement_Disable(self); end if (SpellTimer_Config.ShowName) then self:SetChecked(1); else self:SetChecked(0); end end function SpellTimerOptionFrameSlider_OnChange(self, SpellTimer_da7eff566d49dac34624d7d3bb115e5c) if (self.disabled) then return; end local delay_time = self:GetValue(); self.value = delay_time; getglobal(self:GetName().."Text"):SetText(delay_time); if (delay_time > 0) then if (not SpellTimer_Config.Spells) then SpellTimer_Config.Spells = {}; end if (not SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]]) then SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]] = {}; end SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]].delay = delay_time; else if (not SpellTimer_Config.Spells) then SpellTimer_Config.Spells = {}; end if (not SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]]) then SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]] = {}; end SpellTimer_Config.Spells[SpellTimer_0efc14f8ac640530f8f2c1e4309a1a5a[SpellTimer_da7eff566d49dac34624d7d3bb115e5c]].delay = nil; end end function SpellTimer_2b0f13c734936c2b4b0b98f69e9b4fc2(slider) local name = slider:GetName(); getglobal(name.."Thumb"):Hide(); getglobal(name.."Text"):SetVertexColor(GRAY_FONT_COLOR.r, GRAY_FONT_COLOR.g, GRAY_FONT_COLOR.b); slider.disabled = 1; end function SpellTimer_2b14a674989878028026d5603a7c21bc(slider) local name = slider:GetName(); getglobal(name.."Thumb"):Show(); getglobal(name.."Text"):SetVertexColor(NORMAL_FONT_COLOR.r , NORMAL_FONT_COLOR.g , NORMAL_FONT_COLOR.b); slider.disabled = nil; if (slider.value) then slider:SetValue(slider.value); end end 
