 local AUTOEQUIP_SAVE_INFO,AUTOEQUIP_DEL_INFO,AUTOEQUIP_SAVE_FINFO,AUTOEQUIP_ERROR_INFO,AUTOEQUIP_DEL_TEXT,AUTOEQUIP_TEXT_SAVED local AUTOEQUIP_TEXT_RENAME,AUTOEQUIP_HELP_SAVE_BTN_TITLE,AUTOEQUIP_HELP_SAVE_BTN_DESC,AUTOEQUIP_HELP_SET_BTN_COMMENT1 local AUTOEQUIP_HELP_SET_BTN_COMMENT2,AUTOEQUIP_HELP_SET_BTN_COMMENT3,AUTOEQUIP_MOVE_TOOLTIP,AUTOEQUIP_TEXT_SWITCH,AUTOEQUIP_RAID_TIP if ( GetLocale() == "zhCN" ) then AUTOEQUIP_NAME = "自动换装"; BINDING_HEADER_AUTOEQUIP_TITLE = "自动换装按键"; BINDING_NAME_AUTOEQUIP_SET1 = "套装 1"; BINDING_NAME_AUTOEQUIP_SET2 = "套装 2"; BINDING_NAME_AUTOEQUIP_SET3 = "套装 3"; BINDING_NAME_AUTOEQUIP_SET4 = "套装 4"; BINDING_NAME_AUTOEQUIP_SET5 = "套装 5"; BINDING_NAME_AUTOEQUIP_SET6 = "套装 6"; BINDING_NAME_AUTOEQUIP_SET7 = "套装 7"; BINDING_NAME_AUTOEQUIP_SET8 = "套装 8"; BINDING_NAME_AUTOEQUIP_NEXT = "切换到下一套装备"; BINDING_NAME_AUTOEQUIP_PREV = "切换到上一套装备"; AUTOEQUIP_SAVE_INFO = "执行该操作将覆盖以前的设置，您是否真的想这么做？"; AUTOEQUIP_DEL_INFO = "确定要删除此方案吗？"; AUTOEQUIP_SAVE_FINFO ="该方案未保存任何配置,是否新建一个装备方案？"; AUTOEQUIP_ERROR_INFO ="请检查是否与其他方案名称冲突！"; AUTOEQUIP_DEL_TEXT = "套装方案 %s 已删除"; AUTOEQUIP_TEXT_SAVED = "套装方案 %s 已保存"; AUTOEQUIP_TEXT_RENAME = "已将方案 %s 重命名为 %s "; AUTOEQUIP_HELP_SAVE_BTN_TITLE = "保存装备配置"; AUTOEQUIP_HELP_SAVE_BTN_DESC = "左键单击覆盖或添加套裝方案，右键单击卸除所有装备。"; AUTOEQUIP_HELP_SET_BTN_COMMENT1 = "左键单击切换到此方案"; AUTOEQUIP_HELP_SET_BTN_COMMENT2 = "右键单击删除该方案"; AUTOEQUIP_HELP_SET_BTN_COMMENT3 = "Shift+左键更改套装方案名称"; AUTOEQUIP_MOVE_TOOLTIP = "按住Shift和鼠标左键可拖动框体。"; AUTOEQUIP_TEXT_SWITCH = "|cff00adef<自动换装>|r 当前装备的套装为 %s。"; AUTOEQUIP_RAID_TIP = "你现在处于团队中，自动换装界面自动隐藏。为了切换装备套装，请移动鼠标到自己头像上，界面将会显示。"; elseif ( GetLocale() == "zhTW" ) then AUTOEQUIP_NAME = "自動換裝"; BINDING_HEADER_AUTOEQUIP_TITLE = "自動換裝按鍵"; BINDING_NAME_AUTOEQUIP_SET1 = "套裝 1"; BINDING_NAME_AUTOEQUIP_SET2 = "套裝 2"; BINDING_NAME_AUTOEQUIP_SET3 = "套裝 3"; BINDING_NAME_AUTOEQUIP_SET4 = "套裝 4"; BINDING_NAME_AUTOEQUIP_SET5 = "套裝 5"; BINDING_NAME_AUTOEQUIP_SET6 = "套裝 6"; BINDING_NAME_AUTOEQUIP_SET7 = "套裝 7"; BINDING_NAME_AUTOEQUIP_SET8 = "套裝 8"; BINDING_NAME_AUTOEQUIP_NEXT = "切換到下一套裝備"; BINDING_NAME_AUTOEQUIP_PREV = "切換到上一套裝備"; AUTOEQUIP_SAVE_INFO = "執行該操作將覆蓋以前的設置，您是否真的想這麼做？"; AUTOEQUIP_DEL_INFO = "確定要刪除此號方案嗎？"; AUTOEQUIP_SAVE_FINFO ="該方案未保存任何配置,是否新建一個裝備方案？"; AUTOEQUIP_ERROR_INFO ="請檢查是否與其他方案名稱衝突！"; AUTOEQUIP_DEL_TEXT = "套裝方案 %s 已刪除"; AUTOEQUIP_TEXT_SAVED = "套裝方案 %s 已保存"; AUTOEQUIP_TEXT_RENAME = "已將方案 %s 重命名為 %s "; AUTOEQUIP_HELP_SAVE_BTN_TITLE = "保存裝備配置"; AUTOEQUIP_HELP_SAVE_BTN_DESC = "左鍵單擊覆蓋或添加套装方案，右鍵單擊卸除所有裝備。"; AUTOEQUIP_HELP_SET_BTN_COMMENT1 = "左鍵單擊切換到此方案"; AUTOEQUIP_HELP_SET_BTN_COMMENT2 = "右鍵單擊刪除該方案"; AUTOEQUIP_HELP_SET_BTN_COMMENT3 = "Shift+左鍵更改套裝方案名稱"; AUTOEQUIP_MOVE_TOOLTIP = "按住Shift和滑鼠左鍵可拖動框體。"; AUTOEQUIP_TEXT_SWITCH = "|cff00adef<自動換裝>|r 當前裝備的套裝為 %s。"; AUTOEQUIP_RAID_TIP = "你現在處於團隊中，自動換裝介面自動隱藏。為了切換裝備套裝，請移動滑鼠到自己頭像上，介面將會顯示。"; else AUTOEQUIP_NAME = "Auto Equip"; BINDING_HEADER_AUTOEQUIP_TITLE = "Auto Equip"; BINDING_NAME_AUTOEQUIP_SET1 = "Set 1"; BINDING_NAME_AUTOEQUIP_SET2 = "Set 2"; BINDING_NAME_AUTOEQUIP_SET3 = "Set 3"; BINDING_NAME_AUTOEQUIP_SET4 = "Set 4"; BINDING_NAME_AUTOEQUIP_SET5 = "Set 5"; BINDING_NAME_AUTOEQUIP_SET6 = "Set 6"; BINDING_NAME_AUTOEQUIP_SET7 = "Set 7"; BINDING_NAME_AUTOEQUIP_SET8 = "Set 8"; BINDING_NAME_AUTOEQUIP_NEXT = "Switch to next set"; BINDING_NAME_AUTOEQUIP_PREV = "Switch to previous set"; AUTOEQUIP_SAVE_INFO = "The previous settings will be replaced, do you really want to do?"; AUTOEQUIP_DEL_INFO = "Are you sure to delete this plan?"; AUTOEQUIP_SAVE_FINFO ="The scheme not save any configuration, whether a new equipment plan?"; AUTOEQUIP_ERROR_INFO ="Please check whether the name conflicts with other schemes!"; AUTOEQUIP_DEL_TEXT = "Suit scheme %s The deleted"; AUTOEQUIP_TEXT_SAVED = "Suit scheme %s Has preserved"; AUTOEQUIP_TEXT_RENAME = "Has suit scheme %s Renamed %s "; AUTOEQUIP_HELP_SAVE_BTN_TITLE = "Save settings"; AUTOEQUIP_HELP_SAVE_BTN_DESC = "Left-click on cover or add suit scheme, right-click the unloading all equipment."; AUTOEQUIP_HELP_SET_BTN_COMMENT1 = "Left-click switching suit scheme"; AUTOEQUIP_HELP_SET_BTN_COMMENT2 = "Right-click delete this scheme"; AUTOEQUIP_HELP_SET_BTN_COMMENT3 = "Shift+Left-click Change suit scheme name"; AUTOEQUIP_MOVE_TOOLTIP = "Hold shift key and Left button to drag frame."; AUTOEQUIP_TEXT_SWITCH = "|cff00adef<AutoEquip>|r Current equipped set: %s ."; AUTOEQUIP_RAID_TIP = "You are now in raid, the AutoEquip interface will be hide automatically. To switch your equipment set, move your mouse on your portrait, the interface will be shown."; end AutoEquip_Cf = AutoEquip_Cf or {}; local AutoEquip_352a74c60685e01427cbef1c647d5199; local AutoEquip_6781199f633c5d9ede0aa8c0a5a346d0; local AutoEquip_642022feafc2fd091c1bc9b53b20e8d1; local AutoEquip_123e1ec47f9120d9bfcd7384f302ca34; local AutoEquip_56e159532861d78f73a525a8660bba8d; local _index; local AutoEquip_a4ed2c6153d1a73ae298b67f0bcbabce = BLibrary("BInfo", "chat", AUTOEQUIP_NAME); local default_icon = "Interface\\Icons\\Achievement_General"; local AutoEquip_b5afb1939b42d2489f5d7985e2839133 = { 16, 17, 5, 7, 1, 3, 8, 10, 9, 6, 18, 2, 15, 11, 12, 13, 14, 4, 19, }; StaticPopupDialogs["DELETE_SET"] = { text = AUTOEQUIP_DEL_INFO, button1 = TEXT(YES), button2 = TEXT(NO), OnAccept = function(self) AutoEquip_bf737188f1f5a0018780565eaf91afc0(StaticPopupDialogs["DELETE_SET"].setId) end, OnCancel = function(self) AutoEquip_Cf.curPos = _index; if _index then _G["AutoEquipSetButton".._index]:SetChecked(1); end end, showAlert = 1, timeout = 0, }; StaticPopupDialogs["SAVE_SET"] = { text = GEARSETS_POPUP_TEXT, button1 = ACCEPT, button2 = CANCEL, hasEditBox = 1, maxLetters = 16, OnAccept = function(self) local editBox = _G[self:GetName().."EditBox"]; if StaticPopupDialogs["SAVE_SET"].switch then AutoEquip_5eb24152420f2e356247c122dfb5cdbc(_index,editBox:GetText()); StaticPopupDialogs["SAVE_SET"].switch = nil; else if not AutoEquip_Cf.curPos then if GetNumEquipmentSets() <1 then AutoEquip_Cf.curPos = 1; else AutoEquip_Cf.curPos = GetNumEquipmentSets()+1; end end AutoEquip_224246a2aec3ecad61ed8d03e82f9cb2(AutoEquip_Cf.curPos,editBox:GetText()); end end, OnShow = function(self) local AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f = AutoEquip_4028c7da12ff52455abb865b298ff7e2(AutoEquip_Cf.curPos); if (AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f and AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f[0]) then _G[self:GetName().."EditBox"]:SetText(AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f[0]); _G[self:GetName().."EditBox"]:HighlightText(); end end, OnHide = function(self) _G[self:GetName().."EditBox"]:SetText(""); end, OnCancel = function(self) AutoEquip_Cf.curPos = _index; if _index then _G["AutoEquipSetButton".._index]:SetChecked(1); end end, EditBoxOnEnterPressed = function(self) local editBox = _G[self:GetName()]; if StaticPopupDialogs["SAVE_SET"].switch then AutoEquip_5eb24152420f2e356247c122dfb5cdbc(_index,editBox:GetText()); StaticPopupDialogs["SAVE_SET"].switch = nil; else if not AutoEquip_Cf.curPos then if GetNumEquipmentSets() <1 then AutoEquip_Cf.curPos = 1; else AutoEquip_Cf.curPos = GetNumEquipmentSets()+1; end end AutoEquip_224246a2aec3ecad61ed8d03e82f9cb2(AutoEquip_Cf.curPos,editBox:GetText()); end self:GetParent():Hide(); end, EditBoxOnEscapePressed = function(self) self:GetParent():Hide(); AutoEquip_Cf.curPos = _index; if _index then _G["AutoEquipSetButton".._index]:SetChecked(1); end end, timeout = 0, exclusive = 1, whileDead = 1, hideOnEscape = 1 }; StaticPopupDialogs["SAVE_FSET"] = { text = AUTOEQUIP_SAVE_FINFO, button1 = TEXT(YES), button2 = TEXT(NO), OnAccept = function(self) StaticPopup_Show("SAVE_SET"); end, OnCancel = function(self) AutoEquip_Cf.curPos = _index; if _index then _G["AutoEquipSetButton".._index]:SetChecked(1); end end, showAlert = 1, timeout = 0, }; StaticPopupDialogs["SAVE_RESAVE"] = { text = AUTOEQUIP_SAVE_INFO, button1 = TEXT(YES), button2 = TEXT(NO), OnAccept = function(self) local name = GetEquipmentSetInfo(AutoEquip_Cf.curPos) AutoEquip_224246a2aec3ecad61ed8d03e82f9cb2(AutoEquip_Cf.curPos,name,1) end, showAlert = 1, timeout = 0, }; function AutoEquip_Toggle(switch) if (switch) then AutoEquip_6781199f633c5d9ede0aa8c0a5a346d0 = 1; AutoEquipFrame:Show(); if ( GetLocale() == "zhCN" ) then AutoEquip_56e159532861d78f73a525a8660bba8d= GetCVarBool("equipmentManager"); SetCVar("equipmentManager", 1); InterfaceOptionsFeaturesPanelEquipmentManager:Disable(); end else AutoEquip_6781199f633c5d9ede0aa8c0a5a346d0 = nil; AutoEquipFrame:Hide(); if ( GetLocale() == "zhCN" ) then SetCVar("equipmentManager", AutoEquip_56e159532861d78f73a525a8660bba8d); InterfaceOptionsFeaturesPanelEquipmentManager:Enable(); end end end function AutoEquip_ToggleMode(mode) if (mode == "normal") then AutoEquip_352a74c60685e01427cbef1c647d5199 = nil; AutoEquipFrame:SetWidth(120); AutoEquipFrame:SetHeight(23); AutoEquipFrame:EnableMouse(false); AutoEquipFrame:SetHitRectInsets(0, 0, 119, 22); AutoEquipFrame:ClearAllPoints(); AutoEquipFrame:SetPoint("TOPLEFT", "PlayerFrame", "TOPLEFT", 90, -1); AutoEquipFrame:SetFrameStrata("HIGH"); AutoEquipFrame:SetMovable(false); AutoEquipFrame:SetClampedToScreen(false); AutoEquipFrame:SetParent(PlayerFrame); AutoEquipFrameBackground:SetAllPoints(); AutoEquipFrameBackground:SetTexCoord(0, 0.46484375, 0, 0.171875); AutoEquipFrameBackground.normal_coords = {0, 0.46484375, 0, 0.171875}; AutoEquipFrameBackground.hilight_coords = {0, 0.46484375, 0, 0.171875}; AutoEquipFrameBackground:SetTexCoord(unpack(AutoEquipFrameBackground.normal_coords)); AutoEquipSetButton5:Hide(); AutoEquipSetButton6:Hide(); AutoEquipSetButton7:Hide(); AutoEquipSetButton8:Hide(); local AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f; for AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f = 1, 8, 1 do local AutoEquip_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 = _G["AutoEquipSetButton"..AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f]; AutoEquip_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetNormalTexture():SetTexCoord(0 + (AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f - 1) * 0.07421875, 0.07421875 + (AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f - 1) * 0.07421875, 0.6484375, 0.78125); AutoEquip_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetPushedTexture():SetTexCoord(0 + (AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f - 1) * 0.07421875, 0.07421875 + (AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f - 1) * 0.07421875, 0.7890625, 0.921875); end AutoEquipSaveButton:SetPoint("TOPLEFT", AutoEquipFrame, "TOPLEFT", 6, -2); AutoEquipSetButton1:SetPoint("LEFT", AutoEquipSaveButton, "RIGHT", 3, 0); AutoEquipSetButton2:SetPoint("LEFT", AutoEquipSetButton1, "RIGHT", 3, 0); AutoEquipSetButton3:SetPoint("LEFT", AutoEquipSetButton2, "RIGHT", 3, 0); AutoEquipSetButton4:SetPoint("LEFT", AutoEquipSetButton3, "RIGHT", 3, 0); AutoEquipSetButton5:SetPoint("LEFT", AutoEquipSetButton4, "RIGHT", 3, 0); AutoEquipSetButton6:SetPoint("LEFT", AutoEquipSetButton5, "RIGHT", 3, 0); AutoEquipSetButton7:SetPoint("LEFT", AutoEquipSetButton6, "RIGHT", 3, 0); AutoEquipSetButton8:SetPoint("LEFT", AutoEquipSetButton7, "RIGHT", 3, 0); MoveIcons(); elseif (mode == "advance") then AutoEquip_352a74c60685e01427cbef1c647d5199 = true; AutoEquipFrame:SetWidth(240); AutoEquipFrame:SetHeight(30); AutoEquipFrame:SetHitRectInsets(0, 204, 0, 0); AutoEquipFrame:EnableMouse(true); AutoEquipFrame:ClearAllPoints(); AutoEquipFrame:SetPoint("CENTER", "UIParent", "CENTER", 0, 0); AutoEquipFrame:SetFrameStrata("MEDIUM"); AutoEquipFrame:SetMovable(true); AutoEquipFrame:SetClampedToScreen(true); AutoEquipFrame:SetParent(UIParent); AutoEquipFrameBackground:SetAllPoints(); AutoEquipFrameBackground.normal_coords = {0, 0.93359375, 0.1796875, 0.40625}; AutoEquipFrameBackground.hilight_coords = {0, 0.93359375, 0.4140625, 0.640625}; AutoEquipFrameBackground:SetTexCoord(unpack(AutoEquipFrameBackground.normal_coords)); AutoEquipSetButton5:Show(); AutoEquipSetButton6:Show(); AutoEquipSetButton7:Show(); AutoEquipSetButton8:Show(); local AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f; for AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f = 1, 8, 1 do local AutoEquip_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 = _G["AutoEquipSetButton"..AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f]; AutoEquip_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetNormalTexture():SetTexCoord(0 + (AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f - 1) * 0.07421875, 0.07421875 + (AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f - 1) * 0.07421875, 0.6484375, 0.78125); AutoEquip_99f3cf2c6f1fdfadb0fd4ab6e0843bf5:GetPushedTexture():SetTexCoord(0 + (AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f - 1) * 0.07421875, 0.07421875 + (AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f - 1) * 0.07421875, 0.7890625, 0.921875); end AutoEquipSaveButton:SetPoint("TOPLEFT", AutoEquipFrame, "TOPLEFT", 37, -5); AutoEquipSetButton1:SetPoint("LEFT", AutoEquipSaveButton, "RIGHT", 4, 0); AutoEquipSetButton2:SetPoint("LEFT", AutoEquipSetButton1, "RIGHT", 3, 0); AutoEquipSetButton3:SetPoint("LEFT", AutoEquipSetButton2, "RIGHT", 3, 0); AutoEquipSetButton4:SetPoint("LEFT", AutoEquipSetButton3, "RIGHT", 3, 0); AutoEquipSetButton5:SetPoint("LEFT", AutoEquipSetButton4, "RIGHT", 3, 0); AutoEquipSetButton6:SetPoint("LEFT", AutoEquipSetButton5, "RIGHT", 3, 0); AutoEquipSetButton7:SetPoint("LEFT", AutoEquipSetButton6, "RIGHT", 3, 0); AutoEquipSetButton8:SetPoint("LEFT", AutoEquipSetButton7, "RIGHT", 3, 0); ResetIcons(); RegisterForSaveFrame(AutoEquipFrame, "AutoEquipFrame"); end end function AutoEquipFrame_OnMouseDown(self, button) if (AutoEquip_352a74c60685e01427cbef1c647d5199 and IsShiftKeyDown()) then self:StartMoving(); self.moving = true; end end function AutoEquipFrame_OnMouseUp(self, button) if (self.moving) then self:StopMovingOrSizing(); end end function AutoEquipFrame_OnEnter(self) AutoEquipFrameBackground:SetTexCoord(unpack(AutoEquipFrameBackground.hilight_coords)); BigFoot_ShowNewbieTooltip(AUTOEQUIP_NAME, AUTOEQUIP_MOVE_TOOLTIP); end function AutoEquipFrame_OnLeave(self) AutoEquipFrameBackground:SetTexCoord(unpack(AutoEquipFrameBackground.normal_coords)); GameTooltip:Hide(); end function AutoEquip_EnableAutoHide(switch) if (switch) then AutoEquip_642022feafc2fd091c1bc9b53b20e8d1 = true; if (AutoEquip_6781199f633c5d9ede0aa8c0a5a346d0) then if (GetNumRaidMembers() ~= 0) then AutoEquipFrame:Hide(); AutoEquip_a4ed2c6153d1a73ae298b67f0bcbabce:Print(AUTOEQUIP_RAID_TIP); AutoEquip_123e1ec47f9120d9bfcd7384f302ca34 = true; else AutoEquipFrame:Show(); end end else AutoEquip_642022feafc2fd091c1bc9b53b20e8d1 = nil; if (AutoEquip_6781199f633c5d9ede0aa8c0a5a346d0) then AutoEquipFrame:Show(); end end end function AutoEquip_KeyBinding() BigFoot_ShowKeyBindingFrame("HEADER_AUTOEQUIP_TITLE"); end function AutoEquip_PlayerFrame_OnEnter() if (AutoEquip_6781199f633c5d9ede0aa8c0a5a346d0) then AutoEquipFrame:Show(); end end function AutoEquip_PlayerFrame_OnUpdate() if (AutoEquip_6781199f633c5d9ede0aa8c0a5a346d0 and AutoEquip_642022feafc2fd091c1bc9b53b20e8d1 and not AutoEquip_352a74c60685e01427cbef1c647d5199) then if (AutoEquipFrame:IsVisible() and PlayerFrameGroupIndicator:IsVisible()) then local AutoEquip_7242cf1b41caa7510cf530297a011730, AutoEquip_cf709faa4d1d5a25a70ffb7820ac3c77 = GetCursorPosition(); if ( AutoEquip_cf709faa4d1d5a25a70ffb7820ac3c77 < 600) then AutoEquipFrame:Hide(); end end end end function AutoEquip_PlayerFrame_UpdateGroupIndicator() if (AutoEquip_6781199f633c5d9ede0aa8c0a5a346d0 and AutoEquip_642022feafc2fd091c1bc9b53b20e8d1 and not AutoEquip_352a74c60685e01427cbef1c647d5199) then if (GetNumRaidMembers() == 0) then AutoEquipFrame:Show(); AutoEquip_123e1ec47f9120d9bfcd7384f302ca34 = nil; else AutoEquipFrame:Hide(); if (not AutoEquip_123e1ec47f9120d9bfcd7384f302ca34) then AutoEquip_a4ed2c6153d1a73ae298b67f0bcbabce:Print(AUTOEQUIP_RAID_TIP); AutoEquip_123e1ec47f9120d9bfcd7384f302ca34 = true; end end end end function AutoEquipFrame_OnLoad(self) hooksecurefunc("PlayerFrame_UpdateGroupIndicator", AutoEquip_PlayerFrame_UpdateGroupIndicator); PlayerFrame:HookScript("OnEnter", AutoEquip_PlayerFrame_OnEnter); PlayerFrame:HookScript("OnUpdate", AutoEquip_PlayerFrame_OnUpdate); self:RegisterEvent("ADDON_LOADED"); self:RegisterEvent("EQUIPMENT_SETS_CHANGED"); end function AutoEquip_edde6b9defd14002a775b763b5f565e3(id) local name = GetEquipmentSetInfo(id) if name then EquipmentManager_EquipSet(name) end _G["AutoEquipSetButton"..id]:SetChecked(1); local str = string.format(AUTOEQUIP_TEXT_SWITCH, name); BigFoot_Report("info", str); PlaySound("igCharacterInfoOpen"); end function AutoEquip_bf737188f1f5a0018780565eaf91afc0(id) local name = (GetEquipmentSetInfo(id)) if name then DeleteEquipmentSet(name); local str = string.format(AUTOEQUIP_DEL_TEXT, name); BigFoot_Report("info", str); end end function AutoEquip_7fa14bf1c4f9fdb64a455dfd719908d8() local inx=AutoEquip_Cf.curPos; local inName; if inx and (GetEquipmentSetInfo(inx)) then inName = (GetEquipmentSetInfo(inx)); end AutoEquip_Cf = { curPos = inx }; for AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f = 1, 8, 1 do _G["AutoEquipSetButton"..AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f]:SetChecked(nil); end for i = 1, GetNumEquipmentSets() do local name = (GetEquipmentSetInfo(i)) if name then local AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f = AutoEquip_4028c7da12ff52455abb865b298ff7e2(i); AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f[0] = name; if name == inName then _G["AutoEquipSetButton"..inx]:SetChecked(1); end end end end function AutoEquip_4028c7da12ff52455abb865b298ff7e2(AutoEquip_ff1b4022732c44ba86eae6bf2228a25a) local AutoEquip_8d0febf2348ea712b2b375ae95601d5f = tonumber(AutoEquip_ff1b4022732c44ba86eae6bf2228a25a); if ( not AutoEquip_8d0febf2348ea712b2b375ae95601d5f ) then return; end if ( not AutoEquip_Cf[AutoEquip_8d0febf2348ea712b2b375ae95601d5f] ) then AutoEquip_Cf[AutoEquip_8d0febf2348ea712b2b375ae95601d5f] = {}; end return AutoEquip_Cf[AutoEquip_8d0febf2348ea712b2b375ae95601d5f]; end function AutoEquip_224246a2aec3ecad61ed8d03e82f9cb2(AutoEquip_ff1b4022732c44ba86eae6bf2228a25a,_Newname,switch) if not AutoEquip_ff1b4022732c44ba86eae6bf2228a25a then return end if not switch then for i,v in ipairs(AutoEquip_Cf) do if v[0] == _Newname then BigFoot_Report("info", AUTOEQUIP_ERROR_INFO); if _index then _G["AutoEquipSetButton".._index]:SetChecked(1); AutoEquip_Cf.curPos = _index; end return; end end end local _,icon = GetEquipmentSetInfo(AutoEquip_ff1b4022732c44ba86eae6bf2228a25a); if not icon then icon = default_icon; end SaveEquipmentSet(_Newname,GetIconIDFromTexture(icon)); local str = string.format(AUTOEQUIP_TEXT_SAVED, _Newname); BigFoot_Report("info", str); AutoEquip_Cf.curPos = AutoEquip_ff1b4022732c44ba86eae6bf2228a25a; _G["AutoEquipSetButton"..AutoEquip_ff1b4022732c44ba86eae6bf2228a25a]:SetChecked(1); end function AutoEquip_5eb24152420f2e356247c122dfb5cdbc(AutoEquip_ff1b4022732c44ba86eae6bf2228a25a,_Newname) if not AutoEquip_ff1b4022732c44ba86eae6bf2228a25a then return end for i,v in ipairs(AutoEquip_Cf) do if v[0] == _Newname then BigFoot_Report("info", AUTOEQUIP_ERROR_INFO); _G["AutoEquipSetButton"..AutoEquip_Cf.curPos]:SetChecked(1); return; end end local _name,icon = GetEquipmentSetInfo(AutoEquip_ff1b4022732c44ba86eae6bf2228a25a); if _name then RenameEquipmentSet(_name,_Newname); end local str = string.format(AUTOEQUIP_TEXT_RENAME, _name,_Newname); BigFoot_Report("info", str); _G["AutoEquipSetButton"..AutoEquip_ff1b4022732c44ba86eae6bf2228a25a]:SetChecked(1); end function GetIconIDFromTexture(iconTexture) if not strfind(iconTexture, "\\") then iconTexture = "Interface\\Icons\\"..iconTexture end RefreshEquipmentSetIconInfo() local numIcons = GetNumMacroIcons() for i = INVSLOT_FIRST_EQUIPPED, INVSLOT_LAST_EQUIPPED do if GetInventoryItemTexture("player", i) then numIcons = numIcons + 1 end end for i = 1, numIcons do local texture, id = GetEquipmentSetIconInfo(i) if texture == iconTexture then return id end end return 1 end function AutoEquipSetButton_OnClick(self, __index, AutoEquip_965069e21146643edfb189f810a01269, AutoEquip_99f3cf2c6f1fdfadb0fd4ab6e0843bf5) if CursorHasItem() then return end _index = AutoEquip_Cf.curPos; for AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f = 1, 8, 1 do _G["AutoEquipSetButton"..AutoEquip_e914904fab9d05d3f54d52bfc31a0f3f]:SetChecked(nil); end local name = (GetEquipmentSetInfo(__index)) if not name then if GetNumEquipmentSets() <1 then AutoEquip_Cf.curPos = 1; else AutoEquip_Cf.curPos = GetNumEquipmentSets()+1; end StaticPopup_Show("SAVE_FSET"); return; end if (AutoEquip_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 and AutoEquip_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 == "RightButton") then StaticPopupDialogs["DELETE_SET"].setId = __index; StaticPopup_Show("DELETE_SET"); elseif (AutoEquip_99f3cf2c6f1fdfadb0fd4ab6e0843bf5 and IsShiftKeyDown() and AutoEquip_Cf.curPos == __index ) then StaticPopupDialogs["SAVE_SET"].switch = 1; StaticPopup_Show("SAVE_SET"); else AutoEquip_Cf.curPos = __index; AutoEquip_edde6b9defd14002a775b763b5f565e3(__index); end end function AutoEquipSaveButton_OnClick(self, button) if ( button and button == "RightButton" ) then StripOff(); else if AutoEquip_Cf.curPos then StaticPopup_Show("SAVE_RESAVE"); else StaticPopup_Show("SAVE_SET"); end end end local function GetAvailableBags() local bags = {} for i = 0, 4 do local slots, family = GetContainerNumFreeSlots(i) bags[i] = (family == 0) and slots or 0 end return bags end local function IsEquippableSlot(slot) return slot > 15 or not InCombatLockdown() end local function GetFirstAvailableBag(bags) for i = 0, 4 do if bags[i] > 0 then return i end end end function StripOff() local bags = GetAvailableBags() for i,v in pairs(AutoEquip_b5afb1939b42d2489f5d7985e2839133) do local lnk = GetInventoryItemLink("player", v) if lnk and IsEquippableSlot(v) then local bag = GetFirstAvailableBag(bags) if bag then bags[bag] = bags[bag] - 1 PickupInventoryItem(v) if CursorHasItem() then if bag == 0 then PutItemInBackpack() else PutItemInBag(19 + bag) end end else BigFoot_Report("info", ERR_INV_FULL); return; end end end end function AutoEquipFrame_OnEvent(self, AutoEquip_d0708241b607c9a9dd1953c812fadfb7, ...) local AutoEquip_1652701c940a7445a6e43b954d36ec9b = ...; if AutoEquip_1652701c940a7445a6e43b954d36ec9b == "AutoEquip" or AutoEquip_d0708241b607c9a9dd1953c812fadfb7 == "EQUIPMENT_SETS_CHANGED" then AutoEquip_7fa14bf1c4f9fdb64a455dfd719908d8(); end end function AutoEquip_SwitchToNext() local num = GetNumEquipmentSets(); if num<1 then return end if not AutoEquip_Cf.curPos then AutoEquipSetButton_OnClick(nil, 1); return; end local AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f = AutoEquip_Cf.curPos + 1; if ( AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f > num ) then AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f = 1; end AutoEquipSetButton_OnClick(nil, AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f); end function AutoEquip_SwitchToPrev() local num = GetNumEquipmentSets(); if num<1 then return end if not AutoEquip_Cf.curPos then AutoEquipSetButton_OnClick(nil, 1); return; end local AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f = AutoEquip_Cf.curPos - 1; if ( AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f < 1 ) then AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f = num; end AutoEquipSetButton_OnClick(nil, AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f); end function MoveIcons() PlayerLeaderIcon:ClearAllPoints(); PlayerLeaderIcon:SetPoint("TOPLEFT", "PlayerFrame", "TOPLEFT", 55, -12); PlayerMasterIcon:ClearAllPoints(); PlayerMasterIcon:SetPoint("TOPLEFT", "PlayerFrame", "TOPLEFT", 80, -12); end function ResetIcons() PlayerLeaderIcon:ClearAllPoints(); PlayerLeaderIcon:SetPoint("TOPLEFT", "PlayerFrame", "TOPLEFT", 44, -10); PlayerMasterIcon:ClearAllPoints(); PlayerMasterIcon:SetPoint("TOPLEFT", "PlayerFrame", "TOPLEFT", 80, -10); end function AutoEquipSaveButton_OnEnter(self) GameTooltip_AddNewbieTip(self, AUTOEQUIP_HELP_SAVE_BTN_TITLE, 1.0, 1.0, 1.0, AUTOEQUIP_HELP_SAVE_BTN_DESC, 1); end function AutoEquipSetButton_OnEnter(self, AutoEquip_8d0febf2348ea712b2b375ae95601d5f) local AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f = AutoEquip_4028c7da12ff52455abb865b298ff7e2(AutoEquip_8d0febf2348ea712b2b375ae95601d5f); if (AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f and AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f[0] and type(AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f[0]) == "string") then BigFoot_ShowNewbieTooltip(AutoEquip_8f81cccca434aa7ae8e147d0fcfb685f[0], AUTOEQUIP_HELP_SET_BTN_COMMENT1, AUTOEQUIP_HELP_SET_BTN_COMMENT2,AUTOEQUIP_HELP_SET_BTN_COMMENT3); end end 
