 local BEvent_dbdf11f5b07258936fb1c5a31eaa969c = 1; local BEvent_1b5523f0adb45c4b8ee51f89ebf6f2b2 = 0; local BEvent = {registry={},frame = nil}; BEvent.frame = CreateFrame("Frame", "BigFootEventFrame", UIparent); BEvent.frame:SetScript("OnEvent", function(self, BEvent_d0708241b607c9a9dd1953c812fadfb7, ...) BEvent:BEvent_c8db7dfdbccc70b6c4ca668944f139f8(BEvent_d0708241b607c9a9dd1953c812fadfb7, ...); end) local BEvent_96740f5a57dad2b0bc9410bc76c32e26 = setmetatable({}, {__mode = "BEvent_63a9ce6f1eeac72ef41293b7d0303335"}); function BEvent:BEvent_c8db7dfdbccc70b6c4ca668944f139f8(BEvent_d0708241b607c9a9dd1953c812fadfb7, ...) assert(BEvent_d0708241b607c9a9dd1953c812fadfb7 and type(BEvent_d0708241b607c9a9dd1953c812fadfb7)=="string","Invalid BEvent_d0708241b607c9a9dd1953c812fadfb7. The type of BEvent_d0708241b607c9a9dd1953c812fadfb7 must be string."); local BEvent_fa2167574a7f10a8ceef1d978b1d1540 = next(BEvent_96740f5a57dad2b0bc9410bc76c32e26) or {}; BEvent_96740f5a57dad2b0bc9410bc76c32e26[BEvent_fa2167574a7f10a8ceef1d978b1d1540] = nil; if (BEvent_d0708241b607c9a9dd1953c812fadfb7 and BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7]) then for BEvent_89d99bb0d06dd535e6d6f6d9b3f04006, BEvent_102f59c700c9d50fbbe02ae3f8f42302 in pairs(BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7]) do if (BEvent_d0708241b607c9a9dd1953c812fadfb7 == "COMBAT_LOG_EVENT_UNFILTERED" or BEvent_d0708241b607c9a9dd1953c812fadfb7 == "COMBAT_LOG_EVENT") then BEvent_fa2167574a7f10a8ceef1d978b1d1540[BEvent_89d99bb0d06dd535e6d6f6d9b3f04006] = BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7][BEvent_89d99bb0d06dd535e6d6f6d9b3f04006][select(2, ...)]; else BEvent_fa2167574a7f10a8ceef1d978b1d1540[BEvent_89d99bb0d06dd535e6d6f6d9b3f04006] = BEvent_102f59c700c9d50fbbe02ae3f8f42302; end end end for BEvent_423819614be4117387118072509b7ed9, BEvent_a00724ebfb071ad7332b17a872f4f736 in pairs(BEvent_fa2167574a7f10a8ceef1d978b1d1540) do if (type(BEvent_a00724ebfb071ad7332b17a872f4f736) == "string") then if (BEvent_423819614be4117387118072509b7ed9[BEvent_a00724ebfb071ad7332b17a872f4f736] and type(BEvent_423819614be4117387118072509b7ed9[BEvent_a00724ebfb071ad7332b17a872f4f736]) == "function") then BEvent_423819614be4117387118072509b7ed9[BEvent_a00724ebfb071ad7332b17a872f4f736](BEvent_423819614be4117387118072509b7ed9, ...); end elseif (BEvent_a00724ebfb071ad7332b17a872f4f736 and type(BEvent_a00724ebfb071ad7332b17a872f4f736) == "function") then BEvent_a00724ebfb071ad7332b17a872f4f736(BEvent_d0708241b607c9a9dd1953c812fadfb7, ...); end BEvent_fa2167574a7f10a8ceef1d978b1d1540[BEvent_423819614be4117387118072509b7ed9] = nil; end end function BEvent:RegisterEvent(BEvent_d0708241b607c9a9dd1953c812fadfb7, BEvent_102f59c700c9d50fbbe02ae3f8f42302) assert(BEvent_d0708241b607c9a9dd1953c812fadfb7 and type(BEvent_d0708241b607c9a9dd1953c812fadfb7) == "string", "BEvent: Invalid event. The type of event must be string."); if (BEvent_d0708241b607c9a9dd1953c812fadfb7 == "COMBAT_LOG_EVENT_UNFILTERED" or BEvent_d0708241b607c9a9dd1953c812fadfb7 == "COMBAT_LOG_EVENT") then assert(BEvent_102f59c700c9d50fbbe02ae3f8f42302 and type(BEvent_102f59c700c9d50fbbe02ae3f8f42302) == "string", string.gsub("BEvent: '$EVENT' - Invalid combat log event.", "$EVENT", tostring(BEvent_102f59c700c9d50fbbe02ae3f8f42302))); if (not BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7]) then BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7] = {}; BEvent.frame:RegisterEvent(BEvent_d0708241b607c9a9dd1953c812fadfb7); end BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7][self] = BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7][self] or {}; BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7][self][BEvent_102f59c700c9d50fbbe02ae3f8f42302] = BEvent_102f59c700c9d50fbbe02ae3f8f42302; else BEvent_102f59c700c9d50fbbe02ae3f8f42302 = BEvent_102f59c700c9d50fbbe02ae3f8f42302 or BEvent_d0708241b607c9a9dd1953c812fadfb7; if (not BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7]) then BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7] = {}; BEvent.frame:RegisterEvent(BEvent_d0708241b607c9a9dd1953c812fadfb7); end BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7][self] = BEvent_102f59c700c9d50fbbe02ae3f8f42302; end end function BEvent:UnregisterEvent(BEvent_d0708241b607c9a9dd1953c812fadfb7, BEvent_102f59c700c9d50fbbe02ae3f8f42302) assert(type(BEvent_d0708241b607c9a9dd1953c812fadfb7)=="string","Invalid event. The type of event must be string."); if (BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7] and BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7][self]) then if (BEvent_d0708241b607c9a9dd1953c812fadfb7 == "COMBAT_LOG_EVENT_UNFILTERED" or BEvent_d0708241b607c9a9dd1953c812fadfb7 == "COMBAT_LOG_EVENT") then if ( BEvent_102f59c700c9d50fbbe02ae3f8f42302 and BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7][self][BEvent_102f59c700c9d50fbbe02ae3f8f42302]) then BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7][self][BEvent_102f59c700c9d50fbbe02ae3f8f42302] = nil; else BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7][self] = nil; end else BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7][self] = nil; end if (not next(BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7])) then BEvent.registry[BEvent_d0708241b607c9a9dd1953c812fadfb7] = nil BEvent.frame:UnregisterEvent(BEvent_d0708241b607c9a9dd1953c812fadfb7) end end end function BEvent:UnregisterAllEvent() for BEvent_d0708241b607c9a9dd1953c812fadfb7, BEvent_8e6c2aaeb6b11f026ff5cb0a29aebe68 in pairs(BEvent.registry) do if (BEvent_8e6c2aaeb6b11f026ff5cb0a29aebe68[self]) then self:UnregisterEvent(BEvent_d0708241b607c9a9dd1953c812fadfb7); end end end BEvent.Initialization = {}; function BEvent:Init(...) local BEvent_b4d3314490a868cf61f5fbd057900b0b = select(1, ...); BEvent_b4d3314490a868cf61f5fbd057900b0b = type(BEvent_b4d3314490a868cf61f5fbd057900b0b) == "table" and BEvent_b4d3314490a868cf61f5fbd057900b0b or {}; BEvent_b4d3314490a868cf61f5fbd057900b0b.name = BEvent_b4d3314490a868cf61f5fbd057900b0b.name or BEvent_b4d3314490a868cf61f5fbd057900b0b[1] or "Unknown"; BEvent_b4d3314490a868cf61f5fbd057900b0b.func = BEvent_b4d3314490a868cf61f5fbd057900b0b.func or BEvent_b4d3314490a868cf61f5fbd057900b0b[2] or function() end; BEvent:RegisterEvent("ADDON_LOADED"); table.insert(BEvent.Initialization, BEvent_b4d3314490a868cf61f5fbd057900b0b); end function BEvent.ADDON_LOADED(...) local _,arg1 = ... local BEvent_63a9ce6f1eeac72ef41293b7d0303335, BEvent_8d0644c92128c1ff68223fd74ba63b56; for BEvent_63a9ce6f1eeac72ef41293b7d0303335, BEvent_8d0644c92128c1ff68223fd74ba63b56 in pairs(BEvent.Initialization) do if (arg1 == BEvent_8d0644c92128c1ff68223fd74ba63b56.name) then assert(BEvent_8d0644c92128c1ff68223fd74ba63b56.func, string.format("<%s> need a init function", BEvent_8d0644c92128c1ff68223fd74ba63b56.name)); BEvent_8d0644c92128c1ff68223fd74ba63b56:func(); table.remove(BEvent.Initialization, BEvent_63a9ce6f1eeac72ef41293b7d0303335); break; end end end function BEvent:constructor() end BLibrary:Register(BEvent,"BEvent",BEvent_dbdf11f5b07258936fb1c5a31eaa969c,BEvent_1b5523f0adb45c4b8ee51f89ebf6f2b2);
